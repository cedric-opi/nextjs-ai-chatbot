{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/sidebar-toggle.tsx"],"sourcesContent":["import type { ComponentProps } from \"react\";\n\nimport { type SidebarTrigger, useSidebar } from \"@/components/ui/sidebar\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { SidebarLeftIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\nexport function SidebarToggle({\n  className,\n}: ComponentProps<typeof SidebarTrigger>) {\n  const { toggleSidebar } = useSidebar();\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>\n        <Button\n          className={cn(\"h-8 px-2 md:h-fit md:px-2\", className)}\n          data-testid=\"sidebar-toggle-button\"\n          onClick={toggleSidebar}\n          variant=\"outline\"\n        >\n          <SidebarLeftIcon size={16} />\n        </Button>\n      </TooltipTrigger>\n      <TooltipContent align=\"start\" className=\"hidden md:block\">\n        Toggle Sidebar\n      </TooltipContent>\n    </Tooltip>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAKA;AACA;AACA;;;;;;;;AAEO,SAAS,cAAc,EAC5B,SAAS,EAC6B;;IACtC,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,aAAU,AAAD;IAEnC,qBACE,kaAAC,+HAAA,CAAA,UAAO;;0BACN,kaAAC,+HAAA,CAAA,iBAAc;gBAAC,OAAO;0BACrB,cAAA,kaAAC,8HAAA,CAAA,SAAM;oBACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B;oBAC3C,eAAY;oBACZ,SAAS;oBACT,SAAQ;8BAER,cAAA,kaAAC,uHAAA,CAAA,kBAAe;wBAAC,MAAM;;;;;;;;;;;;;;;;0BAG3B,kaAAC,+HAAA,CAAA,iBAAc;gBAAC,OAAM;gBAAQ,WAAU;0BAAkB;;;;;;;;;;;;AAKhE;GAtBgB;;QAGY,+HAAA,CAAA,aAAU;;;KAHtB","debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/visibility-selector.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ReactNode, useMemo, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { useChatVisibility } from \"@/hooks/use-chat-visibility\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  CheckCircleFillIcon,\n  ChevronDownIcon,\n  GlobeIcon,\n  LockIcon,\n} from \"./icons\";\n\nexport type VisibilityType = \"private\" | \"public\";\n\nconst visibilities: Array<{\n  id: VisibilityType;\n  label: string;\n  description: string;\n  icon: ReactNode;\n}> = [\n  {\n    id: \"private\",\n    label: \"Private\",\n    description: \"Only you can access this chat\",\n    icon: <LockIcon />,\n  },\n  {\n    id: \"public\",\n    label: \"Public\",\n    description: \"Anyone with the link can access this chat\",\n    icon: <GlobeIcon />,\n  },\n];\n\nexport function VisibilitySelector({\n  chatId,\n  className,\n  selectedVisibilityType,\n}: {\n  chatId: string;\n  selectedVisibilityType: VisibilityType;\n} & React.ComponentProps<typeof Button>) {\n  const [open, setOpen] = useState(false);\n\n  const { visibilityType, setVisibilityType } = useChatVisibility({\n    chatId,\n    initialVisibilityType: selectedVisibilityType,\n  });\n\n  const selectedVisibility = useMemo(\n    () => visibilities.find((visibility) => visibility.id === visibilityType),\n    [visibilityType]\n  );\n\n  return (\n    <DropdownMenu onOpenChange={setOpen} open={open}>\n      <DropdownMenuTrigger\n        asChild\n        className={cn(\n          \"w-fit data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n          className\n        )}\n      >\n        <Button\n          className=\"hidden h-8 focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 md:flex md:h-fit md:px-2\"\n          data-testid=\"visibility-selector\"\n          variant=\"outline\"\n        >\n          {selectedVisibility?.icon}\n          <span className=\"md:sr-only\">{selectedVisibility?.label}</span>\n          <ChevronDownIcon />\n        </Button>\n      </DropdownMenuTrigger>\n\n      <DropdownMenuContent align=\"start\" className=\"min-w-[300px]\">\n        {visibilities.map((visibility) => (\n          <DropdownMenuItem\n            className=\"group/item flex flex-row items-center justify-between gap-4\"\n            data-active={visibility.id === visibilityType}\n            data-testid={`visibility-selector-item-${visibility.id}`}\n            key={visibility.id}\n            onSelect={() => {\n              setVisibilityType(visibility.id);\n              setOpen(false);\n            }}\n          >\n            <div className=\"flex flex-col items-start gap-1\">\n              {visibility.label}\n              {visibility.description && (\n                <div className=\"text-muted-foreground text-xs\">\n                  {visibility.description}\n                </div>\n              )}\n            </div>\n            <div className=\"text-foreground opacity-0 group-data-[active=true]/item:opacity-100 dark:text-foreground\">\n              <CheckCircleFillIcon />\n            </div>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAMA;AACA;AACA;;;AAZA;;;;;;;AAqBA,MAAM,eAKD;IACH;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;;;;;IACjB;IACA;QACE,IAAI;QACJ,OAAO;QACP,aAAa;QACb,oBAAM,kaAAC,uHAAA,CAAA,YAAS;;;;;IAClB;CACD;AAEM,SAAS,mBAAmB,EACjC,MAAM,EACN,SAAS,EACT,sBAAsB,EAIe;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAEjC,MAAM,EAAE,cAAc,EAAE,iBAAiB,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,oBAAiB,AAAD,EAAE;QAC9D;QACA,uBAAuB;IACzB;IAEA,MAAM,qBAAqB,CAAA,GAAA,kYAAA,CAAA,UAAO,AAAD;0DAC/B,IAAM,aAAa,IAAI;kEAAC,CAAC,aAAe,WAAW,EAAE,KAAK;;yDAC1D;QAAC;KAAe;IAGlB,qBACE,kaAAC,wIAAA,CAAA,eAAY;QAAC,cAAc;QAAS,MAAM;;0BACzC,kaAAC,wIAAA,CAAA,sBAAmB;gBAClB,OAAO;gBACP,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,8EACA;0BAGF,cAAA,kaAAC,8HAAA,CAAA,SAAM;oBACL,WAAU;oBACV,eAAY;oBACZ,SAAQ;;wBAEP,oBAAoB;sCACrB,kaAAC;4BAAK,WAAU;sCAAc,oBAAoB;;;;;;sCAClD,kaAAC,uHAAA,CAAA,kBAAe;;;;;;;;;;;;;;;;0BAIpB,kaAAC,wIAAA,CAAA,sBAAmB;gBAAC,OAAM;gBAAQ,WAAU;0BAC1C,aAAa,GAAG,CAAC,CAAC,2BACjB,kaAAC,wIAAA,CAAA,mBAAgB;wBACf,WAAU;wBACV,eAAa,WAAW,EAAE,KAAK;wBAC/B,eAAa,CAAC,yBAAyB,EAAE,WAAW,EAAE,EAAE;wBAExD,UAAU;4BACR,kBAAkB,WAAW,EAAE;4BAC/B,QAAQ;wBACV;;0CAEA,kaAAC;gCAAI,WAAU;;oCACZ,WAAW,KAAK;oCAChB,WAAW,WAAW,kBACrB,kaAAC;wCAAI,WAAU;kDACZ,WAAW,WAAW;;;;;;;;;;;;0CAI7B,kaAAC;gCAAI,WAAU;0CACb,cAAA,kaAAC,uHAAA,CAAA,sBAAmB;;;;;;;;;;;uBAfjB,WAAW,EAAE;;;;;;;;;;;;;;;;AAsB9B;GApEgB;;QAUgC,qIAAA,CAAA,oBAAiB;;;KAVjD","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/chat-header.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { memo } from \"react\";\nimport { useWindowSize } from \"usehooks-ts\";\nimport { SidebarToggle } from \"@/components/sidebar-toggle\";\nimport { Button } from \"@/components/ui/button\";\nimport { PlusIcon, VercelIcon } from \"./icons\";\nimport { useSidebar } from \"./ui/sidebar\";\nimport { VisibilitySelector, type VisibilityType } from \"./visibility-selector\";\n\nfunction PureChatHeader({\n  chatId,\n  selectedVisibilityType,\n  isReadonly,\n}: {\n  chatId: string;\n  selectedVisibilityType: VisibilityType;\n  isReadonly: boolean;\n}) {\n  const router = useRouter();\n  const { open } = useSidebar();\n\n  const { width: windowWidth } = useWindowSize();\n\n  return (\n    <header className=\"sticky top-0 flex items-center gap-2 bg-background px-2 py-1.5 md:px-2\">\n      <SidebarToggle />\n\n      {(!open || windowWidth < 768) && (\n        <Button\n          className=\"order-2 ml-auto h-8 px-2 md:order-1 md:ml-0 md:h-fit md:px-2\"\n          onClick={() => {\n            router.push(\"/\");\n            router.refresh();\n          }}\n          variant=\"outline\"\n        >\n          <PlusIcon />\n          <span className=\"md:sr-only\">New Chat</span>\n        </Button>\n      )}\n\n      {!isReadonly && (\n        <VisibilitySelector\n          chatId={chatId}\n          className=\"order-1 md:order-2\"\n          selectedVisibilityType={selectedVisibilityType}\n        />\n      )}\n\n      <Button\n        asChild\n        className=\"order-3 hidden bg-zinc-900 px-2 text-zinc-50 hover:bg-zinc-800 md:ml-auto md:flex md:h-fit dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-zinc-200\"\n      >\n        <Link\n          href={\"https://vercel.com/templates/next.js/nextjs-ai-chatbot\"}\n          rel=\"noreferrer\"\n          target=\"_noblank\"\n        >\n          <VercelIcon size={16} />\n          Deploy with Vercel\n        </Link>\n      </Button>\n    </header>\n  );\n}\n\nexport const ChatHeader = memo(PureChatHeader, (prevProps, nextProps) => {\n  return (\n    prevProps.chatId === nextProps.chatId &&\n    prevProps.selectedVisibilityType === nextProps.selectedVisibilityType &&\n    prevProps.isReadonly === nextProps.isReadonly\n  );\n});\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAYA,SAAS,eAAe,EACtB,MAAM,EACN,sBAAsB,EACtB,UAAU,EAKX;;IACC,MAAM,SAAS,CAAA,GAAA,0VAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,aAAU,AAAD;IAE1B,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,CAAA,GAAA,iQAAA,CAAA,gBAAa,AAAD;IAE3C,qBACE,kaAAC;QAAO,WAAU;;0BAChB,kaAAC,mIAAA,CAAA,gBAAa;;;;;YAEb,CAAC,CAAC,QAAQ,cAAc,GAAG,mBAC1B,kaAAC,8HAAA,CAAA,SAAM;gBACL,WAAU;gBACV,SAAS;oBACP,OAAO,IAAI,CAAC;oBACZ,OAAO,OAAO;gBAChB;gBACA,SAAQ;;kCAER,kaAAC,uHAAA,CAAA,WAAQ;;;;;kCACT,kaAAC;wBAAK,WAAU;kCAAa;;;;;;;;;;;;YAIhC,CAAC,4BACA,kaAAC,wIAAA,CAAA,qBAAkB;gBACjB,QAAQ;gBACR,WAAU;gBACV,wBAAwB;;;;;;0BAI5B,kaAAC,8HAAA,CAAA,SAAM;gBACL,OAAO;gBACP,WAAU;0BAEV,cAAA,kaAAC,oXAAA,CAAA,UAAI;oBACH,MAAM;oBACN,KAAI;oBACJ,QAAO;;sCAEP,kaAAC,uHAAA,CAAA,aAAU;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAMlC;GAvDS;;QASQ,0VAAA,CAAA,YAAS;QACP,+HAAA,CAAA,aAAU;QAEI,iQAAA,CAAA,gBAAa;;;KAZrC;AAyDF,MAAM,2BAAa,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAAE,gBAAgB,CAAC,WAAW;IACzD,OACE,UAAU,MAAM,KAAK,UAAU,MAAM,IACrC,UAAU,sBAAsB,KAAK,UAAU,sBAAsB,IACrE,UAAU,UAAU,KAAK,UAAU,UAAU;AAEjD","debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/hooks/use-artifact.ts"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useMemo } from \"react\";\nimport useSWR from \"swr\";\nimport type { UIArtifact } from \"@/components/artifact\";\n\nexport const initialArtifactData: UIArtifact = {\n  documentId: \"init\",\n  content: \"\",\n  kind: \"text\",\n  title: \"\",\n  status: \"idle\",\n  isVisible: false,\n  boundingBox: {\n    top: 0,\n    left: 0,\n    width: 0,\n    height: 0,\n  },\n};\n\ntype Selector<T> = (state: UIArtifact) => T;\n\nexport function useArtifactSelector<Selected>(selector: Selector<Selected>) {\n  const { data: localArtifact } = useSWR<UIArtifact>(\"artifact\", null, {\n    fallbackData: initialArtifactData,\n  });\n\n  const selectedValue = useMemo(() => {\n    if (!localArtifact) {\n      return selector(initialArtifactData);\n    }\n    return selector(localArtifact);\n  }, [localArtifact, selector]);\n\n  return selectedValue;\n}\n\nexport function useArtifact() {\n  const { data: localArtifact, mutate: setLocalArtifact } = useSWR<UIArtifact>(\n    \"artifact\",\n    null,\n    {\n      fallbackData: initialArtifactData,\n    }\n  );\n\n  const artifact = useMemo(() => {\n    if (!localArtifact) {\n      return initialArtifactData;\n    }\n    return localArtifact;\n  }, [localArtifact]);\n\n  const setArtifact = useCallback(\n    (updaterFn: UIArtifact | ((currentArtifact: UIArtifact) => UIArtifact)) => {\n      setLocalArtifact((currentArtifact) => {\n        const artifactToUpdate = currentArtifact || initialArtifactData;\n\n        if (typeof updaterFn === \"function\") {\n          return updaterFn(artifactToUpdate);\n        }\n\n        return updaterFn;\n      });\n    },\n    [setLocalArtifact]\n  );\n\n  const { data: localArtifactMetadata, mutate: setLocalArtifactMetadata } =\n    useSWR<any>(\n      () =>\n        artifact.documentId ? `artifact-metadata-${artifact.documentId}` : null,\n      null,\n      {\n        fallbackData: null,\n      }\n    );\n\n  return useMemo(\n    () => ({\n      artifact,\n      setArtifact,\n      metadata: localArtifactMetadata,\n      setMetadata: setLocalArtifactMetadata,\n    }),\n    [artifact, setArtifact, localArtifactMetadata, setLocalArtifactMetadata]\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;AAHA;;;AAMO,MAAM,sBAAkC;IAC7C,YAAY;IACZ,SAAS;IACT,MAAM;IACN,OAAO;IACP,QAAQ;IACR,WAAW;IACX,aAAa;QACX,KAAK;QACL,MAAM;QACN,OAAO;QACP,QAAQ;IACV;AACF;AAIO,SAAS,oBAA8B,QAA4B;;IACxE,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,CAAA,GAAA,qQAAA,CAAA,UAAM,AAAD,EAAc,YAAY,MAAM;QACnE,cAAc;IAChB;IAEA,MAAM,gBAAgB,CAAA,GAAA,kYAAA,CAAA,UAAO,AAAD;sDAAE;YAC5B,IAAI,CAAC,eAAe;gBAClB,OAAO,SAAS;YAClB;YACA,OAAO,SAAS;QAClB;qDAAG;QAAC;QAAe;KAAS;IAE5B,OAAO;AACT;GAbgB;;QACkB,qQAAA,CAAA,UAAM;;;AAcjC,SAAS;;IACd,MAAM,EAAE,MAAM,aAAa,EAAE,QAAQ,gBAAgB,EAAE,GAAG,CAAA,GAAA,qQAAA,CAAA,UAAM,AAAD,EAC7D,YACA,MACA;QACE,cAAc;IAChB;IAGF,MAAM,WAAW,CAAA,GAAA,kYAAA,CAAA,UAAO,AAAD;yCAAE;YACvB,IAAI,CAAC,eAAe;gBAClB,OAAO;YACT;YACA,OAAO;QACT;wCAAG;QAAC;KAAc;IAElB,MAAM,cAAc,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD;gDAC5B,CAAC;YACC;wDAAiB,CAAC;oBAChB,MAAM,mBAAmB,mBAAmB;oBAE5C,IAAI,OAAO,cAAc,YAAY;wBACnC,OAAO,UAAU;oBACnB;oBAEA,OAAO;gBACT;;QACF;+CACA;QAAC;KAAiB;IAGpB,MAAM,EAAE,MAAM,qBAAqB,EAAE,QAAQ,wBAAwB,EAAE,GACrE,CAAA,GAAA,qQAAA,CAAA,UAAM,AAAD;8BACH,IACE,SAAS,UAAU,GAAG,CAAC,kBAAkB,EAAE,SAAS,UAAU,EAAE,GAAG;6BACrE,MACA;QACE,cAAc;IAChB;IAGJ,OAAO,CAAA,GAAA,kYAAA,CAAA,UAAO,AAAD;+BACX,IAAM,CAAC;gBACL;gBACA;gBACA,UAAU;gBACV,aAAa;YACf,CAAC;8BACD;QAAC;QAAU;QAAa;QAAuB;KAAyB;AAE5E;IAlDgB;;QAC4C,qQAAA,CAAA,UAAM;QA+B9D,qQAAA,CAAA,UAAM","debugId":null}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/hooks/use-auto-resume.ts"],"sourcesContent":["\"use client\";\n\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { useEffect } from \"react\";\nimport { useDataStream } from \"@/components/data-stream-provider\";\nimport type { ChatMessage } from \"@/lib/types\";\n\nexport type UseAutoResumeParams = {\n  autoResume: boolean;\n  initialMessages: ChatMessage[];\n  resumeStream: UseChatHelpers<ChatMessage>[\"resumeStream\"];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n};\n\nexport function useAutoResume({\n  autoResume,\n  initialMessages,\n  resumeStream,\n  setMessages,\n}: UseAutoResumeParams) {\n  const { dataStream } = useDataStream();\n\n  useEffect(() => {\n    if (!autoResume) {\n      return;\n    }\n\n    const mostRecentMessage = initialMessages.at(-1);\n\n    if (mostRecentMessage?.role === \"user\") {\n      resumeStream();\n    }\n\n    // we intentionally run this once\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [autoResume, initialMessages.at, resumeStream]);\n\n  useEffect(() => {\n    if (!dataStream) {\n      return;\n    }\n    if (dataStream.length === 0) {\n      return;\n    }\n\n    const dataPart = dataStream[0];\n\n    if (dataPart.type === \"data-appendMessage\") {\n      const message = JSON.parse(dataPart.data);\n      setMessages([...initialMessages, message]);\n    }\n  }, [dataStream, initialMessages, setMessages]);\n}\n"],"names":[],"mappings":";;;AAGA;AACA;;AAJA;;;AAcO,SAAS,cAAc,EAC5B,UAAU,EACV,eAAe,EACf,YAAY,EACZ,WAAW,EACS;;IACpB,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,gBAAa,AAAD;IAEnC,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,YAAY;gBACf;YACF;YAEA,MAAM,oBAAoB,gBAAgB,EAAE,CAAC,CAAC;YAE9C,IAAI,mBAAmB,SAAS,QAAQ;gBACtC;YACF;QAEA,iCAAiC;QACjC,uDAAuD;QACzD;kCAAG;QAAC;QAAY,gBAAgB,EAAE;QAAE;KAAa;IAEjD,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,CAAC,YAAY;gBACf;YACF;YACA,IAAI,WAAW,MAAM,KAAK,GAAG;gBAC3B;YACF;YAEA,MAAM,WAAW,UAAU,CAAC,EAAE;YAE9B,IAAI,SAAS,IAAI,KAAK,sBAAsB;gBAC1C,MAAM,UAAU,KAAK,KAAK,CAAC,SAAS,IAAI;gBACxC,YAAY;uBAAI;oBAAiB;iBAAQ;YAC3C;QACF;kCAAG;QAAC;QAAY;QAAiB;KAAY;AAC/C;GAtCgB;;QAMS,4IAAA,CAAA,gBAAa","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/code-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport { python } from \"@codemirror/lang-python\";\nimport { EditorState, Transaction } from \"@codemirror/state\";\nimport { oneDark } from \"@codemirror/theme-one-dark\";\nimport { EditorView } from \"@codemirror/view\";\nimport { basicSetup } from \"codemirror\";\nimport { memo, useEffect, useRef } from \"react\";\nimport type { Suggestion } from \"@/lib/db/schema\";\n\ntype EditorProps = {\n  content: string;\n  onSaveContent: (updatedContent: string, debounce: boolean) => void;\n  status: \"streaming\" | \"idle\";\n  isCurrentVersion: boolean;\n  currentVersionIndex: number;\n  suggestions: Suggestion[];\n};\n\nfunction PureCodeEditor({ content, onSaveContent, status }: EditorProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const editorRef = useRef<EditorView | null>(null);\n\n  useEffect(() => {\n    if (containerRef.current && !editorRef.current) {\n      const startState = EditorState.create({\n        doc: content,\n        extensions: [basicSetup, python(), oneDark],\n      });\n\n      editorRef.current = new EditorView({\n        state: startState,\n        parent: containerRef.current,\n      });\n    }\n\n    return () => {\n      if (editorRef.current) {\n        editorRef.current.destroy();\n        editorRef.current = null;\n      }\n    };\n    // NOTE: we only want to run this effect once\n    // eslint-disable-next-line\n  }, [content]);\n\n  useEffect(() => {\n    if (editorRef.current) {\n      const updateListener = EditorView.updateListener.of((update) => {\n        if (update.docChanged) {\n          const transaction = update.transactions.find(\n            (tr) => !tr.annotation(Transaction.remote)\n          );\n\n          if (transaction) {\n            const newContent = update.state.doc.toString();\n            onSaveContent(newContent, true);\n          }\n        }\n      });\n\n      const currentSelection = editorRef.current.state.selection;\n\n      const newState = EditorState.create({\n        doc: editorRef.current.state.doc,\n        extensions: [basicSetup, python(), oneDark, updateListener],\n        selection: currentSelection,\n      });\n\n      editorRef.current.setState(newState);\n    }\n  }, [onSaveContent]);\n\n  useEffect(() => {\n    if (editorRef.current && content) {\n      const currentContent = editorRef.current.state.doc.toString();\n\n      if (status === \"streaming\" || currentContent !== content) {\n        const transaction = editorRef.current.state.update({\n          changes: {\n            from: 0,\n            to: currentContent.length,\n            insert: content,\n          },\n          annotations: [Transaction.remote.of(true)],\n        });\n\n        editorRef.current.dispatch(transaction);\n      }\n    }\n  }, [content, status]);\n\n  return (\n    <div\n      className=\"not-prose relative w-full pb-[calc(80dvh)] text-sm\"\n      ref={containerRef}\n    />\n  );\n}\n\nfunction areEqual(prevProps: EditorProps, nextProps: EditorProps) {\n  if (prevProps.suggestions !== nextProps.suggestions) {\n    return false;\n  }\n  if (prevProps.currentVersionIndex !== nextProps.currentVersionIndex) {\n    return false;\n  }\n  if (prevProps.isCurrentVersion !== nextProps.isCurrentVersion) {\n    return false;\n  }\n  if (prevProps.status === \"streaming\" && nextProps.status === \"streaming\") {\n    return false;\n  }\n  if (prevProps.content !== nextProps.content) {\n    return false;\n  }\n\n  return true;\n}\n\nexport const CodeEditor = memo(PureCodeEditor, areEqual);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/loader.tsx"],"sourcesContent":["import type { HTMLAttributes } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype LoaderIconProps = {\n  size?: number;\n};\n\nconst LoaderIcon = ({ size = 16 }: LoaderIconProps) => (\n  <svg\n    height={size}\n    strokeLinejoin=\"round\"\n    style={{ color: \"currentcolor\" }}\n    viewBox=\"0 0 16 16\"\n    width={size}\n  >\n    <title>Loader</title>\n    <g clipPath=\"url(#clip0_2393_1490)\">\n      <path d=\"M8 0V4\" stroke=\"currentColor\" strokeWidth=\"1.5\" />\n      <path\n        d=\"M8 16V12\"\n        opacity=\"0.5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M3.29773 1.52783L5.64887 4.7639\"\n        opacity=\"0.9\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M12.7023 1.52783L10.3511 4.7639\"\n        opacity=\"0.1\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M12.7023 14.472L10.3511 11.236\"\n        opacity=\"0.4\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M3.29773 14.472L5.64887 11.236\"\n        opacity=\"0.6\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M15.6085 5.52783L11.8043 6.7639\"\n        opacity=\"0.2\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M0.391602 10.472L4.19583 9.23598\"\n        opacity=\"0.7\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M15.6085 10.4722L11.8043 9.2361\"\n        opacity=\"0.3\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n      <path\n        d=\"M0.391602 5.52783L4.19583 6.7639\"\n        opacity=\"0.8\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_2393_1490\">\n        <rect fill=\"white\" height=\"16\" width=\"16\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nexport type LoaderProps = HTMLAttributes<HTMLDivElement> & {\n  size?: number;\n};\n\nexport const Loader = ({ className, size = 16, ...props }: LoaderProps) => (\n  <div\n    className={cn(\n      \"inline-flex animate-spin items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    <LoaderIcon size={size} />\n  </div>\n);\n"],"names":[],"mappings":";;;;AACA;;;AAMA,MAAM,aAAa,CAAC,EAAE,OAAO,EAAE,EAAmB,iBAChD,kaAAC;QACC,QAAQ;QACR,gBAAe;QACf,OAAO;YAAE,OAAO;QAAe;QAC/B,SAAQ;QACR,OAAO;;0BAEP,kaAAC;0BAAM;;;;;;0BACP,kaAAC;gBAAE,UAAS;;kCACV,kaAAC;wBAAK,GAAE;wBAAS,QAAO;wBAAe,aAAY;;;;;;kCACnD,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;kCAEd,kaAAC;wBACC,GAAE;wBACF,SAAQ;wBACR,QAAO;wBACP,aAAY;;;;;;;;;;;;0BAGhB,kaAAC;0BACC,cAAA,kaAAC;oBAAS,IAAG;8BACX,cAAA,kaAAC;wBAAK,MAAK;wBAAQ,QAAO;wBAAK,OAAM;;;;;;;;;;;;;;;;;;;;;;KApEvC;AA8EC,MAAM,SAAS,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,GAAG,OAAoB,iBACpE,kaAAC;QACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,kaAAC;YAAW,MAAM;;;;;;;;;;;MART","debugId":null}},
    {"offset": {"line": 904, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/console.tsx"],"sourcesContent":["import {\n  type Dispatch,\n  type SetStateAction,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { useArtifactSelector } from \"@/hooks/use-artifact\";\nimport { cn } from \"@/lib/utils\";\nimport { Loader } from \"./elements/loader\";\nimport { CrossSmallIcon, TerminalWindowIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\nexport type ConsoleOutputContent = {\n  type: \"text\" | \"image\";\n  value: string;\n};\n\nexport type ConsoleOutput = {\n  id: string;\n  status: \"in_progress\" | \"loading_packages\" | \"completed\" | \"failed\";\n  contents: ConsoleOutputContent[];\n};\n\ntype ConsoleProps = {\n  consoleOutputs: ConsoleOutput[];\n  setConsoleOutputs: Dispatch<SetStateAction<ConsoleOutput[]>>;\n};\n\nexport function Console({ consoleOutputs, setConsoleOutputs }: ConsoleProps) {\n  const [height, setHeight] = useState<number>(300);\n  const [isResizing, setIsResizing] = useState(false);\n  const consoleEndRef = useRef<HTMLDivElement>(null);\n\n  const isArtifactVisible = useArtifactSelector((state) => state.isVisible);\n\n  const minHeight = 100;\n  const maxHeight = 800;\n\n  const startResizing = useCallback(() => {\n    setIsResizing(true);\n  }, []);\n\n  const stopResizing = useCallback(() => {\n    setIsResizing(false);\n  }, []);\n\n  const resize = useCallback(\n    (e: MouseEvent) => {\n      if (isResizing) {\n        const newHeight = window.innerHeight - e.clientY;\n        if (newHeight >= minHeight && newHeight <= maxHeight) {\n          setHeight(newHeight);\n        }\n      }\n    },\n    [isResizing]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"mousemove\", resize);\n    window.addEventListener(\"mouseup\", stopResizing);\n    return () => {\n      window.removeEventListener(\"mousemove\", resize);\n      window.removeEventListener(\"mouseup\", stopResizing);\n    };\n  }, [resize, stopResizing]);\n\n  useEffect(() => {\n    consoleEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, []);\n\n  useEffect(() => {\n    if (!isArtifactVisible) {\n      setConsoleOutputs([]);\n    }\n  }, [isArtifactVisible, setConsoleOutputs]);\n\n  return consoleOutputs.length > 0 ? (\n    <>\n      <div\n        aria-label=\"Resize console\"\n        aria-orientation=\"horizontal\"\n        aria-valuemax={maxHeight}\n        aria-valuemin={minHeight}\n        aria-valuenow={height}\n        className=\"fixed z-50 h-2 w-full cursor-ns-resize\"\n        onKeyDown={(e) => {\n          if (e.key === \"ArrowUp\") {\n            setHeight((prev) => Math.min(prev + 10, maxHeight));\n          } else if (e.key === \"ArrowDown\") {\n            setHeight((prev) => Math.max(prev - 10, minHeight));\n          }\n        }}\n        onMouseDown={startResizing}\n        role=\"slider\"\n        style={{ bottom: height - 4 }}\n        tabIndex={0}\n      />\n\n      <div\n        className={cn(\n          \"fixed bottom-0 z-40 flex w-full flex-col overflow-x-hidden overflow-y-scroll border-zinc-200 border-t bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-900\",\n          {\n            \"select-none\": isResizing,\n          }\n        )}\n        style={{ height }}\n      >\n        <div className=\"sticky top-0 z-50 flex h-fit w-full flex-row items-center justify-between border-zinc-200 border-b bg-muted px-2 py-1 dark:border-zinc-700\">\n          <div className=\"flex flex-row items-center gap-3 pl-2 text-sm text-zinc-800 dark:text-zinc-50\">\n            <div className=\"text-muted-foreground\">\n              <TerminalWindowIcon />\n            </div>\n            <div>Console</div>\n          </div>\n          <Button\n            className=\"size-fit p-1 hover:bg-zinc-200 dark:hover:bg-zinc-700\"\n            onClick={() => setConsoleOutputs([])}\n            size=\"icon\"\n            variant=\"ghost\"\n          >\n            <CrossSmallIcon />\n          </Button>\n        </div>\n\n        <div>\n          {consoleOutputs.map((consoleOutput, index) => (\n            <div\n              className=\"flex flex-row border-zinc-200 border-b bg-zinc-50 px-4 py-2 font-mono text-sm dark:border-zinc-700 dark:bg-zinc-900\"\n              key={consoleOutput.id}\n            >\n              <div\n                className={cn(\"w-12 shrink-0\", {\n                  \"text-muted-foreground\": [\n                    \"in_progress\",\n                    \"loading_packages\",\n                  ].includes(consoleOutput.status),\n                  \"text-emerald-500\": consoleOutput.status === \"completed\",\n                  \"text-red-400\": consoleOutput.status === \"failed\",\n                })}\n              >\n                [{index + 1}]\n              </div>\n              {[\"in_progress\", \"loading_packages\"].includes(\n                consoleOutput.status\n              ) ? (\n                <div className=\"flex flex-row gap-2\">\n                  <div className=\"mt-0.5 mb-auto size-fit self-center\">\n                    <Loader size={16} />\n                  </div>\n                  <div className=\"text-muted-foreground\">\n                    {consoleOutput.status === \"in_progress\"\n                      ? \"Initializing...\"\n                      : consoleOutput.status === \"loading_packages\"\n                        ? consoleOutput.contents.map((content) =>\n                            content.type === \"text\" ? content.value : null\n                          )\n                        : null}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex w-full flex-col gap-2 overflow-x-scroll text-zinc-900 dark:text-zinc-50\">\n                  {consoleOutput.contents.map((content, contentIndex) =>\n                    content.type === \"image\" ? (\n                      <picture key={`${consoleOutput.id}-${contentIndex}`}>\n                        {/** biome-ignore lint/nursery/useImageSize: \"Generated image without explicit size\" */}\n                        <img\n                          alt=\"output\"\n                          className=\"w-full max-w-(--breakpoint-toast-mobile) rounded-md\"\n                          src={content.value}\n                        />\n                      </picture>\n                    ) : (\n                      <div\n                        className=\"w-full whitespace-pre-line break-words\"\n                        key={`${consoleOutput.id}-${contentIndex}`}\n                      >\n                        {content.value}\n                      </div>\n                    )\n                  )}\n                </div>\n              )}\n            </div>\n          ))}\n          <div ref={consoleEndRef} />\n        </div>\n      </div>\n    </>\n  ) : null;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1204, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/create-artifact.tsx"],"sourcesContent":["import type { UseChatHelpers } from \"@ai-sdk/react\";\nimport type { DataUIPart } from \"ai\";\nimport type { ComponentType, Dispatch, ReactNode, SetStateAction } from \"react\";\nimport type { Suggestion } from \"@/lib/db/schema\";\nimport type { ChatMessage, CustomUIDataTypes } from \"@/lib/types\";\nimport type { UIArtifact } from \"./artifact\";\n\nexport type ArtifactActionContext<M = any> = {\n  content: string;\n  handleVersionChange: (type: \"next\" | \"prev\" | \"toggle\" | \"latest\") => void;\n  currentVersionIndex: number;\n  isCurrentVersion: boolean;\n  mode: \"edit\" | \"diff\";\n  metadata: M;\n  setMetadata: Dispatch<SetStateAction<M>>;\n};\n\ntype ArtifactAction<M = any> = {\n  icon: ReactNode;\n  label?: string;\n  description: string;\n  onClick: (context: ArtifactActionContext<M>) => Promise<void> | void;\n  isDisabled?: (context: ArtifactActionContext<M>) => boolean;\n};\n\nexport type ArtifactToolbarContext = {\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n};\n\nexport type ArtifactToolbarItem = {\n  description: string;\n  icon: ReactNode;\n  onClick: (context: ArtifactToolbarContext) => void;\n};\n\ntype ArtifactContent<M = any> = {\n  title: string;\n  content: string;\n  mode: \"edit\" | \"diff\";\n  isCurrentVersion: boolean;\n  currentVersionIndex: number;\n  status: \"streaming\" | \"idle\";\n  suggestions: Suggestion[];\n  onSaveContent: (updatedContent: string, debounce: boolean) => void;\n  isInline: boolean;\n  getDocumentContentById: (index: number) => string;\n  isLoading: boolean;\n  metadata: M;\n  setMetadata: Dispatch<SetStateAction<M>>;\n};\n\ntype InitializeParameters<M = any> = {\n  documentId: string;\n  setMetadata: Dispatch<SetStateAction<M>>;\n};\n\ntype ArtifactConfig<T extends string, M = any> = {\n  kind: T;\n  description: string;\n  content: ComponentType<ArtifactContent<M>>;\n  actions: ArtifactAction<M>[];\n  toolbar: ArtifactToolbarItem[];\n  initialize?: (parameters: InitializeParameters<M>) => void;\n  onStreamPart: (args: {\n    setMetadata: Dispatch<SetStateAction<M>>;\n    setArtifact: Dispatch<SetStateAction<UIArtifact>>;\n    streamPart: DataUIPart<CustomUIDataTypes>;\n  }) => void;\n};\n\nexport class Artifact<T extends string, M = any> {\n  readonly kind: T;\n  readonly description: string;\n  readonly content: ComponentType<ArtifactContent<M>>;\n  readonly actions: ArtifactAction<M>[];\n  readonly toolbar: ArtifactToolbarItem[];\n  readonly initialize?: (parameters: InitializeParameters) => void;\n  readonly onStreamPart: (args: {\n    setMetadata: Dispatch<SetStateAction<M>>;\n    setArtifact: Dispatch<SetStateAction<UIArtifact>>;\n    streamPart: DataUIPart<CustomUIDataTypes>;\n  }) => void;\n\n  constructor(config: ArtifactConfig<T, M>) {\n    this.kind = config.kind;\n    this.description = config.description;\n    this.content = config.content;\n    this.actions = config.actions || [];\n    this.toolbar = config.toolbar || [];\n    this.initialize = config.initialize || (async () => ({}));\n    this.onStreamPart = config.onStreamPart;\n  }\n}\n"],"names":[],"mappings":";;;AAsEO,MAAM;IACF,KAAQ;IACR,YAAoB;IACpB,QAA2C;IAC3C,QAA6B;IAC7B,QAA+B;IAC/B,WAAwD;IACxD,aAIE;IAEX,YAAY,MAA4B,CAAE;QACxC,IAAI,CAAC,IAAI,GAAG,OAAO,IAAI;QACvB,IAAI,CAAC,WAAW,GAAG,OAAO,WAAW;QACrC,IAAI,CAAC,OAAO,GAAG,OAAO,OAAO;QAC7B,IAAI,CAAC,OAAO,GAAG,OAAO,OAAO,IAAI,EAAE;QACnC,IAAI,CAAC,OAAO,GAAG,OAAO,OAAO,IAAI,EAAE;QACnC,IAAI,CAAC,UAAU,GAAG,OAAO,UAAU,IAAI,CAAC,UAAY,CAAC,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY;IACzC;AACF","debugId":null}},
    {"offset": {"line": 1234, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/artifacts/code/client.tsx"],"sourcesContent":["import { toast } from \"sonner\";\nimport { CodeEditor } from \"@/components/code-editor\";\nimport {\n  Console,\n  type ConsoleOutput,\n  type ConsoleOutputContent,\n} from \"@/components/console\";\nimport { Artifact } from \"@/components/create-artifact\";\nimport {\n  CopyIcon,\n  LogsIcon,\n  MessageIcon,\n  PlayIcon,\n  RedoIcon,\n  UndoIcon,\n} from \"@/components/icons\";\nimport { generateUUID } from \"@/lib/utils\";\n\nconst OUTPUT_HANDLERS = {\n  matplotlib: `\n    import io\n    import base64\n    from matplotlib import pyplot as plt\n\n    # Clear any existing plots\n    plt.clf()\n    plt.close('all')\n\n    # Switch to agg backend\n    plt.switch_backend('agg')\n\n    def setup_matplotlib_output():\n        def custom_show():\n            if plt.gcf().get_size_inches().prod() * plt.gcf().dpi ** 2 > 25_000_000:\n                print(\"Warning: Plot size too large, reducing quality\")\n                plt.gcf().set_dpi(100)\n\n            png_buf = io.BytesIO()\n            plt.savefig(png_buf, format='png')\n            png_buf.seek(0)\n            png_base64 = base64.b64encode(png_buf.read()).decode('utf-8')\n            print(f'data:image/png;base64,{png_base64}')\n            png_buf.close()\n\n            plt.clf()\n            plt.close('all')\n\n        plt.show = custom_show\n  `,\n  basic: `\n    # Basic output capture setup\n  `,\n};\n\nfunction detectRequiredHandlers(code: string): string[] {\n  const handlers: string[] = [\"basic\"];\n\n  if (code.includes(\"matplotlib\") || code.includes(\"plt.\")) {\n    handlers.push(\"matplotlib\");\n  }\n\n  return handlers;\n}\n\ntype Metadata = {\n  outputs: ConsoleOutput[];\n};\n\nexport const codeArtifact = new Artifact<\"code\", Metadata>({\n  kind: \"code\",\n  description:\n    \"Useful for code generation; Code execution is only available for python code.\",\n  initialize: ({ setMetadata }) => {\n    setMetadata({\n      outputs: [],\n    });\n  },\n  onStreamPart: ({ streamPart, setArtifact }) => {\n    if (streamPart.type === \"data-codeDelta\") {\n      setArtifact((draftArtifact) => ({\n        ...draftArtifact,\n        content: streamPart.data,\n        isVisible:\n          draftArtifact.status === \"streaming\" &&\n          draftArtifact.content.length > 300 &&\n          draftArtifact.content.length < 310\n            ? true\n            : draftArtifact.isVisible,\n        status: \"streaming\",\n      }));\n    }\n  },\n  content: ({ metadata, setMetadata, ...props }) => {\n    return (\n      <>\n        <div className=\"px-1\">\n          <CodeEditor {...props} />\n        </div>\n\n        {metadata?.outputs && (\n          <Console\n            consoleOutputs={metadata.outputs}\n            setConsoleOutputs={() => {\n              setMetadata({\n                ...metadata,\n                outputs: [],\n              });\n            }}\n          />\n        )}\n      </>\n    );\n  },\n  actions: [\n    {\n      icon: <PlayIcon size={18} />,\n      label: \"Run\",\n      description: \"Execute code\",\n      onClick: async ({ content, setMetadata }) => {\n        const runId = generateUUID();\n        const outputContent: ConsoleOutputContent[] = [];\n\n        setMetadata((metadata) => ({\n          ...metadata,\n          outputs: [\n            ...metadata.outputs,\n            {\n              id: runId,\n              contents: [],\n              status: \"in_progress\",\n            },\n          ],\n        }));\n\n        try {\n          // @ts-expect-error - loadPyodide is not defined\n          const currentPyodideInstance = await globalThis.loadPyodide({\n            indexURL: \"https://cdn.jsdelivr.net/pyodide/v0.23.4/full/\",\n          });\n\n          currentPyodideInstance.setStdout({\n            batched: (output: string) => {\n              outputContent.push({\n                type: output.startsWith(\"data:image/png;base64\")\n                  ? \"image\"\n                  : \"text\",\n                value: output,\n              });\n            },\n          });\n\n          await currentPyodideInstance.loadPackagesFromImports(content, {\n            messageCallback: (message: string) => {\n              setMetadata((metadata) => ({\n                ...metadata,\n                outputs: [\n                  ...metadata.outputs.filter((output) => output.id !== runId),\n                  {\n                    id: runId,\n                    contents: [{ type: \"text\", value: message }],\n                    status: \"loading_packages\",\n                  },\n                ],\n              }));\n            },\n          });\n\n          const requiredHandlers = detectRequiredHandlers(content);\n          for (const handler of requiredHandlers) {\n            if (OUTPUT_HANDLERS[handler as keyof typeof OUTPUT_HANDLERS]) {\n              await currentPyodideInstance.runPythonAsync(\n                OUTPUT_HANDLERS[handler as keyof typeof OUTPUT_HANDLERS]\n              );\n\n              if (handler === \"matplotlib\") {\n                await currentPyodideInstance.runPythonAsync(\n                  \"setup_matplotlib_output()\"\n                );\n              }\n            }\n          }\n\n          await currentPyodideInstance.runPythonAsync(content);\n\n          setMetadata((metadata) => ({\n            ...metadata,\n            outputs: [\n              ...metadata.outputs.filter((output) => output.id !== runId),\n              {\n                id: runId,\n                contents: outputContent,\n                status: \"completed\",\n              },\n            ],\n          }));\n        } catch (error: any) {\n          setMetadata((metadata) => ({\n            ...metadata,\n            outputs: [\n              ...metadata.outputs.filter((output) => output.id !== runId),\n              {\n                id: runId,\n                contents: [{ type: \"text\", value: error.message }],\n                status: \"failed\",\n              },\n            ],\n          }));\n        }\n      },\n    },\n    {\n      icon: <UndoIcon size={18} />,\n      description: \"View Previous version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"prev\");\n      },\n      isDisabled: ({ currentVersionIndex }) => {\n        if (currentVersionIndex === 0) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <RedoIcon size={18} />,\n      description: \"View Next version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"next\");\n      },\n      isDisabled: ({ isCurrentVersion }) => {\n        if (isCurrentVersion) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <CopyIcon size={18} />,\n      description: \"Copy code to clipboard\",\n      onClick: ({ content }) => {\n        navigator.clipboard.writeText(content);\n        toast.success(\"Copied to clipboard!\");\n      },\n    },\n  ],\n  toolbar: [\n    {\n      icon: <MessageIcon />,\n      description: \"Add comments\",\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            {\n              type: \"text\",\n              text: \"Add comments to the code snippet for understanding\",\n            },\n          ],\n        });\n      },\n    },\n    {\n      icon: <LogsIcon />,\n      description: \"Add logs\",\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            {\n              type: \"text\",\n              text: \"Add logs to the code snippet for debugging\",\n            },\n          ],\n        });\n      },\n    },\n  ],\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1548, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/image-editor.tsx"],"sourcesContent":["import cn from \"classnames\";\nimport { LoaderIcon } from \"./icons\";\n\ntype ImageEditorProps = {\n  title: string;\n  content: string;\n  isCurrentVersion: boolean;\n  currentVersionIndex: number;\n  status: string;\n  isInline: boolean;\n};\n\nexport function ImageEditor({\n  title,\n  content,\n  status,\n  isInline,\n}: ImageEditorProps) {\n  return (\n    <div\n      className={cn(\"flex w-full flex-row items-center justify-center\", {\n        \"h-[calc(100dvh-60px)]\": !isInline,\n        \"h-[200px]\": isInline,\n      })}\n    >\n      {status === \"streaming\" ? (\n        <div className=\"flex flex-row items-center gap-4\">\n          {!isInline && (\n            <div className=\"animate-spin\">\n              <LoaderIcon />\n            </div>\n          )}\n          <div>Generating Image...</div>\n        </div>\n      ) : (\n        <picture>\n          {/** biome-ignore lint/nursery/useImageSize: \"Generated image without explicit size\" */}\n          <img\n            alt={title}\n            className={cn(\"h-fit w-full max-w-[800px]\", {\n              \"p-0 md:p-20\": !isInline,\n            })}\n            src={`data:image/png;base64,${content}`}\n          />\n        </picture>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAWO,SAAS,YAAY,EAC1B,KAAK,EACL,OAAO,EACP,MAAM,EACN,QAAQ,EACS;IACjB,qBACE,kaAAC;QACC,WAAW,CAAA,GAAA,6LAAA,CAAA,UAAE,AAAD,EAAE,oDAAoD;YAChE,yBAAyB,CAAC;YAC1B,aAAa;QACf;kBAEC,WAAW,4BACV,kaAAC;YAAI,WAAU;;gBACZ,CAAC,0BACA,kaAAC;oBAAI,WAAU;8BACb,cAAA,kaAAC,uHAAA,CAAA,aAAU;;;;;;;;;;8BAGf,kaAAC;8BAAI;;;;;;;;;;;iCAGP,kaAAC;sBAEC,cAAA,kaAAC;gBACC,KAAK;gBACL,WAAW,CAAA,GAAA,6LAAA,CAAA,UAAE,AAAD,EAAE,8BAA8B;oBAC1C,eAAe,CAAC;gBAClB;gBACA,KAAK,CAAC,sBAAsB,EAAE,SAAS;;;;;;;;;;;;;;;;AAMnD;KApCgB","debugId":null}},
    {"offset": {"line": 1625, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/artifacts/image/client.tsx"],"sourcesContent":["import { toast } from \"sonner\";\nimport { Artifact } from \"@/components/create-artifact\";\nimport { CopyIcon, RedoIcon, UndoIcon } from \"@/components/icons\";\nimport { ImageEditor } from \"@/components/image-editor\";\n\nexport const imageArtifact = new Artifact({\n  kind: \"image\",\n  description: \"Useful for image generation\",\n  onStreamPart: ({ streamPart, setArtifact }) => {\n    if (streamPart.type === \"data-imageDelta\") {\n      setArtifact((draftArtifact) => ({\n        ...draftArtifact,\n        content: streamPart.data,\n        isVisible: true,\n        status: \"streaming\",\n      }));\n    }\n  },\n  content: ImageEditor,\n  actions: [\n    {\n      icon: <UndoIcon size={18} />,\n      description: \"View Previous version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"prev\");\n      },\n      isDisabled: ({ currentVersionIndex }) => {\n        if (currentVersionIndex === 0) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <RedoIcon size={18} />,\n      description: \"View Next version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"next\");\n      },\n      isDisabled: ({ isCurrentVersion }) => {\n        if (isCurrentVersion) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <CopyIcon size={18} />,\n      description: \"Copy image to clipboard\",\n      onClick: ({ content }) => {\n        const img = new Image();\n        img.src = `data:image/png;base64,${content}`;\n\n        img.onload = () => {\n          const canvas = document.createElement(\"canvas\");\n          canvas.width = img.width;\n          canvas.height = img.height;\n          const ctx = canvas.getContext(\"2d\");\n          ctx?.drawImage(img, 0, 0);\n          canvas.toBlob((blob) => {\n            if (blob) {\n              navigator.clipboard.write([\n                new ClipboardItem({ \"image/png\": blob }),\n              ]);\n            }\n          }, \"image/png\");\n        };\n\n        toast.success(\"Copied image to clipboard!\");\n      },\n    },\n  ],\n  toolbar: [],\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAEO,MAAM,gBAAgB,IAAI,oIAAA,CAAA,WAAQ,CAAC;IACxC,MAAM;IACN,aAAa;IACb,cAAc,CAAC,EAAE,UAAU,EAAE,WAAW,EAAE;QACxC,IAAI,WAAW,IAAI,KAAK,mBAAmB;YACzC,YAAY,CAAC,gBAAkB,CAAC;oBAC9B,GAAG,aAAa;oBAChB,SAAS,WAAW,IAAI;oBACxB,WAAW;oBACX,QAAQ;gBACV,CAAC;QACH;IACF;IACA,SAAS,iIAAA,CAAA,cAAW;IACpB,SAAS;QACP;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;gBAAC,MAAM;;;;;;YACtB,aAAa;YACb,SAAS,CAAC,EAAE,mBAAmB,EAAE;gBAC/B,oBAAoB;YACtB;YACA,YAAY,CAAC,EAAE,mBAAmB,EAAE;gBAClC,IAAI,wBAAwB,GAAG;oBAC7B,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;QACA;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;gBAAC,MAAM;;;;;;YACtB,aAAa;YACb,SAAS,CAAC,EAAE,mBAAmB,EAAE;gBAC/B,oBAAoB;YACtB;YACA,YAAY,CAAC,EAAE,gBAAgB,EAAE;gBAC/B,IAAI,kBAAkB;oBACpB,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;QACA;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;gBAAC,MAAM;;;;;;YACtB,aAAa;YACb,SAAS,CAAC,EAAE,OAAO,EAAE;gBACnB,MAAM,MAAM,IAAI;gBAChB,IAAI,GAAG,GAAG,CAAC,sBAAsB,EAAE,SAAS;gBAE5C,IAAI,MAAM,GAAG;oBACX,MAAM,SAAS,SAAS,aAAa,CAAC;oBACtC,OAAO,KAAK,GAAG,IAAI,KAAK;oBACxB,OAAO,MAAM,GAAG,IAAI,MAAM;oBAC1B,MAAM,MAAM,OAAO,UAAU,CAAC;oBAC9B,KAAK,UAAU,KAAK,GAAG;oBACvB,OAAO,MAAM,CAAC,CAAC;wBACb,IAAI,MAAM;4BACR,UAAU,SAAS,CAAC,KAAK,CAAC;gCACxB,IAAI,cAAc;oCAAE,aAAa;gCAAK;6BACvC;wBACH;oBACF,GAAG;gBACL;gBAEA,qWAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YAChB;QACF;KACD;IACD,SAAS,EAAE;AACb","debugId":null}},
    {"offset": {"line": 1734, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/sheet-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTheme } from \"next-themes\";\nimport { parse, unparse } from \"papaparse\";\nimport { memo, useEffect, useMemo, useState } from \"react\";\nimport DataGrid, { textEditor } from \"react-data-grid\";\nimport { cn } from \"@/lib/utils\";\n\nimport \"react-data-grid/lib/styles.css\";\n\ntype SheetEditorProps = {\n  content: string;\n  saveContent: (content: string, isCurrentVersion: boolean) => void;\n  currentVersionIndex: number;\n  isCurrentVersion: boolean;\n  status: string;\n};\n\nconst MIN_ROWS = 50;\nconst MIN_COLS = 26;\n\nconst PureSpreadsheetEditor = ({ content, saveContent }: SheetEditorProps) => {\n  const { resolvedTheme } = useTheme();\n\n  const parseData = useMemo(() => {\n    if (!content) {\n      return new Array(MIN_ROWS).fill(new Array(MIN_COLS).fill(\"\"));\n    }\n    const result = parse<string[]>(content, { skipEmptyLines: true });\n\n    const paddedData = result.data.map((row) => {\n      const paddedRow = [...row];\n      while (paddedRow.length < MIN_COLS) {\n        paddedRow.push(\"\");\n      }\n      return paddedRow;\n    });\n\n    while (paddedData.length < MIN_ROWS) {\n      paddedData.push(new Array(MIN_COLS).fill(\"\"));\n    }\n\n    return paddedData;\n  }, [content]);\n\n  const columns = useMemo(() => {\n    const rowNumberColumn = {\n      key: \"rowNumber\",\n      name: \"\",\n      frozen: true,\n      width: 50,\n      renderCell: ({ rowIdx }: { rowIdx: number }) => rowIdx + 1,\n      cellClass: \"border-t border-r dark:bg-zinc-950 dark:text-zinc-50\",\n      headerCellClass: \"border-t border-r dark:bg-zinc-900 dark:text-zinc-50\",\n    };\n\n    const dataColumns = Array.from({ length: MIN_COLS }, (_, i) => ({\n      key: i.toString(),\n      name: String.fromCharCode(65 + i),\n      renderEditCell: textEditor,\n      width: 120,\n      cellClass: cn(\"border-t dark:bg-zinc-950 dark:text-zinc-50\", {\n        \"border-l\": i !== 0,\n      }),\n      headerCellClass: cn(\"border-t dark:bg-zinc-900 dark:text-zinc-50\", {\n        \"border-l\": i !== 0,\n      }),\n    }));\n\n    return [rowNumberColumn, ...dataColumns];\n  }, []);\n\n  const initialRows = useMemo(() => {\n    return parseData.map((row, rowIndex) => {\n      const rowData: any = {\n        id: rowIndex,\n        rowNumber: rowIndex + 1,\n      };\n\n      columns.slice(1).forEach((col, colIndex) => {\n        rowData[col.key] = row[colIndex] || \"\";\n      });\n\n      return rowData;\n    });\n  }, [parseData, columns]);\n\n  const [localRows, setLocalRows] = useState(initialRows);\n\n  useEffect(() => {\n    setLocalRows(initialRows);\n  }, [initialRows]);\n\n  const generateCsv = (data: any[][]) => {\n    return unparse(data);\n  };\n\n  const handleRowsChange = (newRows: any[]) => {\n    setLocalRows(newRows);\n\n    const updatedData = newRows.map((row) => {\n      return columns.slice(1).map((col) => row[col.key] || \"\");\n    });\n\n    const newCsvContent = generateCsv(updatedData);\n    saveContent(newCsvContent, true);\n  };\n\n  return (\n    <DataGrid\n      className={resolvedTheme === \"dark\" ? \"rdg-dark\" : \"rdg-light\"}\n      columns={columns}\n      defaultColumnOptions={{\n        resizable: true,\n        sortable: true,\n      }}\n      enableVirtualization\n      onCellClick={(args) => {\n        if (args.column.key !== \"rowNumber\") {\n          args.selectCell(true);\n        }\n      }}\n      onRowsChange={handleRowsChange}\n      rows={localRows}\n      style={{ height: \"100%\" }}\n    />\n  );\n};\n\nfunction areEqual(prevProps: SheetEditorProps, nextProps: SheetEditorProps) {\n  return (\n    prevProps.currentVersionIndex === nextProps.currentVersionIndex &&\n    prevProps.isCurrentVersion === nextProps.isCurrentVersion &&\n    !(prevProps.status === \"streaming\" && nextProps.status === \"streaming\") &&\n    prevProps.content === nextProps.content &&\n    prevProps.saveContent === nextProps.saveContent\n  );\n}\n\nexport const SpreadsheetEditor = memo(PureSpreadsheetEditor, areEqual);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1906, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/artifacts/sheet/client.tsx"],"sourcesContent":["import { parse, unparse } from \"papaparse\";\nimport { toast } from \"sonner\";\nimport { Artifact } from \"@/components/create-artifact\";\nimport {\n  CopyIcon,\n  LineChartIcon,\n  RedoIcon,\n  SparklesIcon,\n  UndoIcon,\n} from \"@/components/icons\";\nimport { SpreadsheetEditor } from \"@/components/sheet-editor\";\n\ntype Metadata = any;\n\nexport const sheetArtifact = new Artifact<\"sheet\", Metadata>({\n  kind: \"sheet\",\n  description: \"Useful for working with spreadsheets\",\n  initialize: () => null,\n  onStreamPart: ({ setArtifact, streamPart }) => {\n    if (streamPart.type === \"data-sheetDelta\") {\n      setArtifact((draftArtifact) => ({\n        ...draftArtifact,\n        content: streamPart.data,\n        isVisible: true,\n        status: \"streaming\",\n      }));\n    }\n  },\n  content: ({ content, currentVersionIndex, onSaveContent, status }) => {\n    return (\n      <SpreadsheetEditor\n        content={content}\n        currentVersionIndex={currentVersionIndex}\n        isCurrentVersion={true}\n        saveContent={onSaveContent}\n        status={status}\n      />\n    );\n  },\n  actions: [\n    {\n      icon: <UndoIcon size={18} />,\n      description: \"View Previous version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"prev\");\n      },\n      isDisabled: ({ currentVersionIndex }) => {\n        if (currentVersionIndex === 0) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <RedoIcon size={18} />,\n      description: \"View Next version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"next\");\n      },\n      isDisabled: ({ isCurrentVersion }) => {\n        if (isCurrentVersion) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <CopyIcon />,\n      description: \"Copy as .csv\",\n      onClick: ({ content }) => {\n        const parsed = parse<string[]>(content, { skipEmptyLines: true });\n\n        const nonEmptyRows = parsed.data.filter((row) =>\n          row.some((cell) => cell.trim() !== \"\")\n        );\n\n        const cleanedCsv = unparse(nonEmptyRows);\n\n        navigator.clipboard.writeText(cleanedCsv);\n        toast.success(\"Copied csv to clipboard!\");\n      },\n    },\n  ],\n  toolbar: [\n    {\n      description: \"Format and clean data\",\n      icon: <SparklesIcon />,\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            { type: \"text\", text: \"Can you please format and clean the data?\" },\n          ],\n        });\n      },\n    },\n    {\n      description: \"Analyze and visualize data\",\n      icon: <LineChartIcon />,\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            {\n              type: \"text\",\n              text: \"Can you please analyze and visualize the data by creating a new code artifact in python?\",\n            },\n          ],\n        });\n      },\n    },\n  ],\n});\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAOA;;;;;;;AAIO,MAAM,gBAAgB,IAAI,oIAAA,CAAA,WAAQ,CAAoB;IAC3D,MAAM;IACN,aAAa;IACb,YAAY,IAAM;IAClB,cAAc,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE;QACxC,IAAI,WAAW,IAAI,KAAK,mBAAmB;YACzC,YAAY,CAAC,gBAAkB,CAAC;oBAC9B,GAAG,aAAa;oBAChB,SAAS,WAAW,IAAI;oBACxB,WAAW;oBACX,QAAQ;gBACV,CAAC;QACH;IACF;IACA,SAAS,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,aAAa,EAAE,MAAM,EAAE;QAC/D,qBACE,kaAAC,iIAAA,CAAA,oBAAiB;YAChB,SAAS;YACT,qBAAqB;YACrB,kBAAkB;YAClB,aAAa;YACb,QAAQ;;;;;;IAGd;IACA,SAAS;QACP;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;gBAAC,MAAM;;;;;;YACtB,aAAa;YACb,SAAS,CAAC,EAAE,mBAAmB,EAAE;gBAC/B,oBAAoB;YACtB;YACA,YAAY,CAAC,EAAE,mBAAmB,EAAE;gBAClC,IAAI,wBAAwB,GAAG;oBAC7B,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;QACA;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;gBAAC,MAAM;;;;;;YACtB,aAAa;YACb,SAAS,CAAC,EAAE,mBAAmB,EAAE;gBAC/B,oBAAoB;YACtB;YACA,YAAY,CAAC,EAAE,gBAAgB,EAAE;gBAC/B,IAAI,kBAAkB;oBACpB,OAAO;gBACT;gBAEA,OAAO;YACT;QACF;QACA;YACE,oBAAM,kaAAC,uHAAA,CAAA,WAAQ;;;;;YACf,aAAa;YACb,SAAS,CAAC,EAAE,OAAO,EAAE;gBACnB,MAAM,SAAS,CAAA,GAAA,sMAAA,CAAA,QAAK,AAAD,EAAY,SAAS;oBAAE,gBAAgB;gBAAK;gBAE/D,MAAM,eAAe,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,MACvC,IAAI,IAAI,CAAC,CAAC,OAAS,KAAK,IAAI,OAAO;gBAGrC,MAAM,aAAa,CAAA,GAAA,sMAAA,CAAA,UAAO,AAAD,EAAE;gBAE3B,UAAU,SAAS,CAAC,SAAS,CAAC;gBAC9B,qWAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YAChB;QACF;KACD;IACD,SAAS;QACP;YACE,aAAa;YACb,oBAAM,kaAAC,uHAAA,CAAA,eAAY;;;;;YACnB,SAAS,CAAC,EAAE,WAAW,EAAE;gBACvB,YAAY;oBACV,MAAM;oBACN,OAAO;wBACL;4BAAE,MAAM;4BAAQ,MAAM;wBAA4C;qBACnE;gBACH;YACF;QACF;QACA;YACE,aAAa;YACb,oBAAM,kaAAC,uHAAA,CAAA,gBAAa;;;;;YACpB,SAAS,CAAC,EAAE,WAAW,EAAE;gBACvB,YAAY;oBACV,MAAM;oBACN,OAAO;wBACL;4BACE,MAAM;4BACN,MAAM;wBACR;qBACD;gBACH;YACF;QACF;KACD;AACH","debugId":null}},
    {"offset": {"line": 2055, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/editor/diff.js"],"sourcesContent":["// Modified from https://github.com/hamflx/prosemirror-diff/blob/master/src/diff.js\n\nimport { diff_match_patch } from \"diff-match-patch\";\nimport { Fragment, Node } from \"prosemirror-model\";\n\nexport const DiffType = {\n  Unchanged: 0,\n  Deleted: -1,\n  Inserted: 1,\n};\n\nexport const patchDocumentNode = (schema, oldNode, newNode) => {\n  assertNodeTypeEqual(oldNode, newNode);\n\n  const finalLeftChildren = [];\n  const finalRightChildren = [];\n\n  const oldChildren = normalizeNodeContent(oldNode);\n  const newChildren = normalizeNodeContent(newNode);\n  const oldChildLen = oldChildren.length;\n  const newChildLen = newChildren.length;\n  const minChildLen = Math.min(oldChildLen, newChildLen);\n\n  let left = 0;\n  let right = 0;\n\n  for (; left < minChildLen; left++) {\n    const oldChild = oldChildren[left];\n    const newChild = newChildren[left];\n    if (!isNodeEqual(oldChild, newChild)) {\n      break;\n    }\n    finalLeftChildren.push(...ensureArray(oldChild));\n  }\n\n  for (; right + left + 1 < minChildLen; right++) {\n    const oldChild = oldChildren[oldChildLen - right - 1];\n    const newChild = newChildren[newChildLen - right - 1];\n    if (!isNodeEqual(oldChild, newChild)) {\n      break;\n    }\n    finalRightChildren.unshift(...ensureArray(oldChild));\n  }\n\n  const diffOldChildren = oldChildren.slice(left, oldChildLen - right);\n  const diffNewChildren = newChildren.slice(left, newChildLen - right);\n\n  if (diffOldChildren.length && diffNewChildren.length) {\n    const matchedNodes = matchNodes(\n      schema,\n      diffOldChildren,\n      diffNewChildren\n    ).sort((a, b) => b.count - a.count);\n    const bestMatch = matchedNodes[0];\n    if (bestMatch) {\n      const { oldStartIndex, newStartIndex, oldEndIndex, newEndIndex } =\n        bestMatch;\n      const oldBeforeMatchChildren = diffOldChildren.slice(0, oldStartIndex);\n      const newBeforeMatchChildren = diffNewChildren.slice(0, newStartIndex);\n\n      finalLeftChildren.push(\n        ...patchRemainNodes(\n          schema,\n          oldBeforeMatchChildren,\n          newBeforeMatchChildren\n        )\n      );\n      finalLeftChildren.push(\n        ...diffOldChildren.slice(oldStartIndex, oldEndIndex)\n      );\n\n      const oldAfterMatchChildren = diffOldChildren.slice(oldEndIndex);\n      const newAfterMatchChildren = diffNewChildren.slice(newEndIndex);\n\n      finalRightChildren.unshift(\n        ...patchRemainNodes(\n          schema,\n          oldAfterMatchChildren,\n          newAfterMatchChildren\n        )\n      );\n    } else {\n      finalLeftChildren.push(\n        ...patchRemainNodes(schema, diffOldChildren, diffNewChildren)\n      );\n    }\n  } else {\n    finalLeftChildren.push(\n      ...patchRemainNodes(schema, diffOldChildren, diffNewChildren)\n    );\n  }\n\n  return createNewNode(oldNode, [...finalLeftChildren, ...finalRightChildren]);\n};\n\nconst matchNodes = (_schema, oldChildren, newChildren) => {\n  const matches = [];\n  for (\n    let oldStartIndex = 0;\n    oldStartIndex < oldChildren.length;\n    oldStartIndex++\n  ) {\n    const oldStartNode = oldChildren[oldStartIndex];\n    const newStartIndex = findMatchNode(newChildren, oldStartNode);\n\n    if (newStartIndex !== -1) {\n      let oldEndIndex = oldStartIndex + 1;\n      let newEndIndex = newStartIndex + 1;\n      for (\n        ;\n        oldEndIndex < oldChildren.length && newEndIndex < newChildren.length;\n        oldEndIndex++, newEndIndex++\n      ) {\n        const oldEndNode = oldChildren[oldEndIndex];\n        if (!isNodeEqual(newChildren[newEndIndex], oldEndNode)) {\n          break;\n        }\n      }\n      matches.push({\n        oldStartIndex,\n        newStartIndex,\n        oldEndIndex,\n        newEndIndex,\n        count: newEndIndex - newStartIndex,\n      });\n    }\n  }\n  return matches;\n};\n\nconst findMatchNode = (children, node, startIndex = 0) => {\n  for (let i = startIndex; i < children.length; i++) {\n    if (isNodeEqual(children[i], node)) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nconst patchRemainNodes = (schema, oldChildren, newChildren) => {\n  const finalLeftChildren = [];\n  const finalRightChildren = [];\n  const oldChildLen = oldChildren.length;\n  const newChildLen = newChildren.length;\n  let left = 0;\n  let right = 0;\n  while (oldChildLen - left - right > 0 && newChildLen - left - right > 0) {\n    const leftOldNode = oldChildren[left];\n    const leftNewNode = newChildren[left];\n    const rightOldNode = oldChildren[oldChildLen - right - 1];\n    const rightNewNode = newChildren[newChildLen - right - 1];\n    let updateLeft =\n      !isTextNode(leftOldNode) && matchNodeType(leftOldNode, leftNewNode);\n    let updateRight =\n      !isTextNode(rightOldNode) && matchNodeType(rightOldNode, rightNewNode);\n    if (Array.isArray(leftOldNode) && Array.isArray(leftNewNode)) {\n      finalLeftChildren.push(\n        ...patchTextNodes(schema, leftOldNode, leftNewNode)\n      );\n      left += 1;\n      continue;\n    }\n\n    if (updateLeft && updateRight) {\n      const equalityLeft = computeChildEqualityFactor(leftOldNode, leftNewNode);\n      const equalityRight = computeChildEqualityFactor(\n        rightOldNode,\n        rightNewNode\n      );\n      if (equalityLeft < equalityRight) {\n        updateLeft = false;\n      } else {\n        updateRight = false;\n      }\n    }\n    if (updateLeft) {\n      finalLeftChildren.push(\n        patchDocumentNode(schema, leftOldNode, leftNewNode)\n      );\n      left += 1;\n    } else if (updateRight) {\n      finalRightChildren.unshift(\n        patchDocumentNode(schema, rightOldNode, rightNewNode)\n      );\n      right += 1;\n    } else {\n      // Delete and insert\n      finalLeftChildren.push(\n        createDiffNode(schema, leftOldNode, DiffType.Deleted)\n      );\n      finalLeftChildren.push(\n        createDiffNode(schema, leftNewNode, DiffType.Inserted)\n      );\n      left += 1;\n    }\n  }\n\n  const deleteNodeLen = oldChildLen - left - right;\n  const insertNodeLen = newChildLen - left - right;\n  if (deleteNodeLen) {\n    finalLeftChildren.push(\n      ...oldChildren\n        .slice(left, left + deleteNodeLen)\n        .flat()\n        .map((node) => createDiffNode(schema, node, DiffType.Deleted))\n    );\n  }\n\n  if (insertNodeLen) {\n    finalRightChildren.unshift(\n      ...newChildren\n        .slice(left, left + insertNodeLen)\n        .flat()\n        .map((node) => createDiffNode(schema, node, DiffType.Inserted))\n    );\n  }\n\n  return [...finalLeftChildren, ...finalRightChildren];\n};\n\n// Updated function to perform sentence-level diffs\nexport const patchTextNodes = (schema, oldNode, newNode) => {\n  const dmp = new diff_match_patch();\n\n  // Concatenate the text from the text nodes\n  const oldText = oldNode.map((n) => getNodeText(n)).join(\"\");\n  const newText = newNode.map((n) => getNodeText(n)).join(\"\");\n\n  // Tokenize the text into sentences\n  const oldSentences = tokenizeSentences(oldText);\n  const newSentences = tokenizeSentences(newText);\n\n  // Map sentences to unique characters\n  const { chars1, chars2, lineArray } = sentencesToChars(\n    oldSentences,\n    newSentences\n  );\n\n  // Perform the diff\n  let diffs = dmp.diff_main(chars1, chars2, false);\n\n  // Convert back to sentences\n  diffs = diffs.map(([type, text]) => {\n    const sentences = text\n      .split(\"\")\n      .map((char) => lineArray[char.charCodeAt(0)]);\n    return [type, sentences];\n  });\n\n  // Map diffs to nodes\n  const res = diffs.flatMap(([type, sentences]) => {\n    return sentences.map((sentence) => {\n      const node = createTextNode(\n        schema,\n        sentence,\n        type !== DiffType.Unchanged ? [createDiffMark(schema, type)] : []\n      );\n      return node;\n    });\n  });\n\n  return res;\n};\n\n// Function to tokenize text into sentences\nconst tokenizeSentences = (text) => {\n  return text.match(/[^.!?]+[.!?]*\\s*/g) || [];\n};\n\n// Function to map sentences to unique characters\nconst sentencesToChars = (oldSentences, newSentences) => {\n  const lineArray = [];\n  const lineHash = {};\n  let lineStart = 0;\n\n  const chars1 = oldSentences\n    .map((sentence) => {\n      const line = sentence;\n      if (line in lineHash) {\n        return String.fromCharCode(lineHash[line]);\n      }\n      lineHash[line] = lineStart;\n      lineArray[lineStart] = line;\n      lineStart++;\n      return String.fromCharCode(lineHash[line]);\n    })\n    .join(\"\");\n\n  const chars2 = newSentences\n    .map((sentence) => {\n      const line = sentence;\n      if (line in lineHash) {\n        return String.fromCharCode(lineHash[line]);\n      }\n      lineHash[line] = lineStart;\n      lineArray[lineStart] = line;\n      lineStart++;\n      return String.fromCharCode(lineHash[line]);\n    })\n    .join(\"\");\n\n  return { chars1, chars2, lineArray };\n};\n\nexport const computeChildEqualityFactor = (_node1, _node2) => {\n  return 0;\n};\n\nexport const assertNodeTypeEqual = (node1, node2) => {\n  if (getNodeProperty(node1, \"type\") !== getNodeProperty(node2, \"type\")) {\n    throw new Error(`node type not equal: ${node1.type} !== ${node2.type}`);\n  }\n};\n\nexport const ensureArray = (value) => {\n  return Array.isArray(value) ? value : [value];\n};\n\nexport const isNodeEqual = (node1, node2) => {\n  const isNode1Array = Array.isArray(node1);\n  const isNode2Array = Array.isArray(node2);\n  if (isNode1Array !== isNode2Array) {\n    return false;\n  }\n  if (isNode1Array) {\n    return (\n      node1.length === node2.length &&\n      node1.every((node, index) => isNodeEqual(node, node2[index]))\n    );\n  }\n\n  const type1 = getNodeProperty(node1, \"type\");\n  const type2 = getNodeProperty(node2, \"type\");\n  if (type1 !== type2) {\n    return false;\n  }\n  if (isTextNode(node1)) {\n    const text1 = getNodeProperty(node1, \"text\");\n    const text2 = getNodeProperty(node2, \"text\");\n    if (text1 !== text2) {\n      return false;\n    }\n  }\n  const attrs1 = getNodeAttributes(node1);\n  const attrs2 = getNodeAttributes(node2);\n  const attrs = [...new Set([...Object.keys(attrs1), ...Object.keys(attrs2)])];\n  for (const attr of attrs) {\n    if (attrs1[attr] !== attrs2[attr]) {\n      return false;\n    }\n  }\n  const marks1 = getNodeMarks(node1);\n  const marks2 = getNodeMarks(node2);\n  if (marks1.length !== marks2.length) {\n    return false;\n  }\n  for (let i = 0; i < marks1.length; i++) {\n    if (!isNodeEqual(marks1[i], marks2[i])) {\n      return false;\n    }\n  }\n  const children1 = getNodeChildren(node1);\n  const children2 = getNodeChildren(node2);\n  if (children1.length !== children2.length) {\n    return false;\n  }\n  for (let i = 0; i < children1.length; i++) {\n    if (!isNodeEqual(children1[i], children2[i])) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const normalizeNodeContent = (node) => {\n  const content = getNodeChildren(node) ?? [];\n  const res = [];\n  for (let i = 0; i < content.length; i++) {\n    const child = content[i];\n    if (isTextNode(child)) {\n      const textNodes = [];\n      for (\n        let textNode = content[i];\n        i < content.length && isTextNode(textNode);\n        textNode = content[++i]\n      ) {\n        textNodes.push(textNode);\n      }\n      i--;\n      res.push(textNodes);\n    } else {\n      res.push(child);\n    }\n  }\n  return res;\n};\n\nexport const getNodeProperty = (node, property) => {\n  if (property === \"type\") {\n    return node.type?.name;\n  }\n  return node[property];\n};\n\nexport const getNodeAttribute = (node, attribute) =>\n  node.attrs ? node.attrs[attribute] : undefined;\n\nexport const getNodeAttributes = (node) => (node.attrs ? node.attrs : {});\n\nexport const getNodeMarks = (node) => node.marks ?? [];\n\nexport const getNodeChildren = (node) => node.content?.content ?? [];\n\nexport const getNodeText = (node) => node.text;\n\nexport const isTextNode = (node) => node.type?.name === \"text\";\n\nexport const matchNodeType = (node1, node2) =>\n  node1.type?.name === node2.type?.name ||\n  (Array.isArray(node1) && Array.isArray(node2));\n\nexport const createNewNode = (oldNode, children) => {\n  if (!oldNode.type) {\n    throw new Error(\"oldNode.type is undefined\");\n  }\n  return new Node(\n    oldNode.type,\n    oldNode.attrs,\n    Fragment.fromArray(children),\n    oldNode.marks\n  );\n};\n\nexport const createDiffNode = (schema, node, type) => {\n  return mapDocumentNode(node, (currentNode) => {\n    if (isTextNode(currentNode)) {\n      return createTextNode(schema, getNodeText(currentNode), [\n        ...(currentNode.marks || []),\n        createDiffMark(schema, type),\n      ]);\n    }\n    return currentNode;\n  });\n};\n\nfunction mapDocumentNode(node, mapper) {\n  const copy = node.copy(\n    Fragment.from(\n      node.content.content\n        .map((currentNode) => mapDocumentNode(currentNode, mapper))\n        .filter((n) => n)\n    )\n  );\n  return mapper(copy) || copy;\n}\n\nexport const createDiffMark = (schema, type) => {\n  if (type === DiffType.Inserted) {\n    return schema.mark(\"diffMark\", { type });\n  }\n  if (type === DiffType.Deleted) {\n    return schema.mark(\"diffMark\", { type });\n  }\n  throw new Error(\"type is not valid\");\n};\n\nexport const createTextNode = (schema, content, marks = []) => {\n  return schema.text(content, marks);\n};\n\nexport const diffEditor = (schema, oldDoc, newDoc) => {\n  const oldNode = Node.fromJSON(schema, oldDoc);\n  const newNode = Node.fromJSON(schema, newDoc);\n  return patchDocumentNode(schema, oldNode, newNode);\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2444, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/diffview.tsx"],"sourcesContent":["import OrderedMap from \"orderedmap\";\nimport {\n  DOMParser,\n  type MarkSpec,\n  type Node as ProsemirrorNode,\n  Schema,\n} from \"prosemirror-model\";\nimport { schema } from \"prosemirror-schema-basic\";\nimport { addListNodes } from \"prosemirror-schema-list\";\nimport { EditorState } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\nimport { useEffect, useRef } from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { Streamdown } from \"streamdown\";\n\nimport { DiffType, diffEditor } from \"@/lib/editor/diff\";\n\nconst diffSchema = new Schema({\n  nodes: addListNodes(schema.spec.nodes, \"paragraph block*\", \"block\"),\n  marks: OrderedMap.from({\n    ...schema.spec.marks.toObject(),\n    diffMark: {\n      attrs: { type: { default: \"\" } },\n      toDOM(mark) {\n        let className = \"\";\n\n        switch (mark.attrs.type) {\n          case DiffType.Inserted:\n            className =\n              \"bg-green-100 text-green-700 dark:bg-green-500/70 dark:text-green-300\";\n            break;\n          case DiffType.Deleted:\n            className =\n              \"bg-red-100 line-through text-red-600 dark:bg-red-500/70 dark:text-red-300\";\n            break;\n          default:\n            className = \"\";\n        }\n        return [\"span\", { class: className }, 0];\n      },\n    } as MarkSpec,\n  }),\n});\n\nfunction computeDiff(oldDoc: ProsemirrorNode, newDoc: ProsemirrorNode) {\n  return diffEditor(diffSchema, oldDoc.toJSON(), newDoc.toJSON());\n}\n\ntype DiffEditorProps = {\n  oldContent: string;\n  newContent: string;\n};\n\nexport const DiffView = ({ oldContent, newContent }: DiffEditorProps) => {\n  const editorRef = useRef<HTMLDivElement>(null);\n  const viewRef = useRef<EditorView | null>(null);\n\n  useEffect(() => {\n    if (editorRef.current && !viewRef.current) {\n      const parser = DOMParser.fromSchema(diffSchema);\n\n      const oldHtmlContent = renderToString(\n        <Streamdown>{oldContent}</Streamdown>\n      );\n      const newHtmlContent = renderToString(\n        <Streamdown>{newContent}</Streamdown>\n      );\n\n      const oldContainer = document.createElement(\"div\");\n      oldContainer.innerHTML = oldHtmlContent;\n\n      const newContainer = document.createElement(\"div\");\n      newContainer.innerHTML = newHtmlContent;\n\n      const oldDoc = parser.parse(oldContainer);\n      const newDoc = parser.parse(newContainer);\n\n      const diffedDoc = computeDiff(oldDoc, newDoc);\n\n      const state = EditorState.create({\n        doc: diffedDoc,\n        plugins: [],\n      });\n\n      viewRef.current = new EditorView(editorRef.current, {\n        state,\n        editable: () => false,\n      });\n    }\n\n    return () => {\n      if (viewRef.current) {\n        viewRef.current.destroy();\n        viewRef.current = null;\n      }\n    };\n  }, [oldContent, newContent]);\n\n  return <div className=\"diff-editor\" ref={editorRef} />;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;AAEA,MAAM,aAAa,IAAI,0NAAA,CAAA,SAAM,CAAC;IAC5B,OAAO,CAAA,GAAA,2OAAA,CAAA,eAAY,AAAD,EAAE,6OAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK,EAAE,oBAAoB;IAC3D,OAAO,qMAAA,CAAA,UAAU,CAAC,IAAI,CAAC;QACrB,GAAG,6OAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;QAC/B,UAAU;YACR,OAAO;gBAAE,MAAM;oBAAE,SAAS;gBAAG;YAAE;YAC/B,OAAM,IAAI;gBACR,IAAI,YAAY;gBAEhB,OAAQ,KAAK,KAAK,CAAC,IAAI;oBACrB,KAAK,wHAAA,CAAA,WAAQ,CAAC,QAAQ;wBACpB,YACE;wBACF;oBACF,KAAK,wHAAA,CAAA,WAAQ,CAAC,OAAO;wBACnB,YACE;wBACF;oBACF;wBACE,YAAY;gBAChB;gBACA,OAAO;oBAAC;oBAAQ;wBAAE,OAAO;oBAAU;oBAAG;iBAAE;YAC1C;QACF;IACF;AACF;AAEA,SAAS,YAAY,MAAuB,EAAE,MAAuB;IACnE,OAAO,CAAA,GAAA,wHAAA,CAAA,aAAU,AAAD,EAAE,YAAY,OAAO,MAAM,IAAI,OAAO,MAAM;AAC9D;AAOO,MAAM,WAAW,CAAC,EAAE,UAAU,EAAE,UAAU,EAAmB;;IAClE,MAAM,YAAY,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAkB;IACzC,MAAM,UAAU,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAqB;IAE1C,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;8BAAE;YACR,IAAI,UAAU,OAAO,IAAI,CAAC,QAAQ,OAAO,EAAE;gBACzC,MAAM,SAAS,0NAAA,CAAA,YAAS,CAAC,UAAU,CAAC;gBAEpC,MAAM,iBAAiB,CAAA,GAAA,qZAAA,CAAA,iBAAc,AAAD,gBAClC,kaAAC,6RAAA,CAAA,aAAU;8BAAE;;;;;;gBAEf,MAAM,iBAAiB,CAAA,GAAA,qZAAA,CAAA,iBAAc,AAAD,gBAClC,kaAAC,6RAAA,CAAA,aAAU;8BAAE;;;;;;gBAGf,MAAM,eAAe,SAAS,aAAa,CAAC;gBAC5C,aAAa,SAAS,GAAG;gBAEzB,MAAM,eAAe,SAAS,aAAa,CAAC;gBAC5C,aAAa,SAAS,GAAG;gBAEzB,MAAM,SAAS,OAAO,KAAK,CAAC;gBAC5B,MAAM,SAAS,OAAO,KAAK,CAAC;gBAE5B,MAAM,YAAY,YAAY,QAAQ;gBAEtC,MAAM,QAAQ,yNAAA,CAAA,cAAW,CAAC,MAAM,CAAC;oBAC/B,KAAK;oBACL,SAAS,EAAE;gBACb;gBAEA,QAAQ,OAAO,GAAG,IAAI,wNAAA,CAAA,aAAU,CAAC,UAAU,OAAO,EAAE;oBAClD;oBACA,QAAQ;8CAAE,IAAM;;gBAClB;YACF;YAEA;sCAAO;oBACL,IAAI,QAAQ,OAAO,EAAE;wBACnB,QAAQ,OAAO,CAAC,OAAO;wBACvB,QAAQ,OAAO,GAAG;oBACpB;gBACF;;QACF;6BAAG;QAAC;QAAY;KAAW;IAE3B,qBAAO,kaAAC;QAAI,WAAU;QAAc,KAAK;;;;;;AAC3C;GA9Ca;KAAA","debugId":null}},
    {"offset": {"line": 2581, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/document-skeleton.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ArtifactKind } from \"./artifact\";\n\nexport const DocumentSkeleton = ({\n  artifactKind,\n}: {\n  artifactKind: ArtifactKind;\n}) => {\n  return artifactKind === \"image\" ? (\n    <div className=\"flex h-[calc(100dvh-60px)] w-full flex-col items-center justify-center gap-4\">\n      <div className=\"size-96 animate-pulse rounded-lg bg-muted-foreground/20\" />\n    </div>\n  ) : (\n    <div className=\"flex w-full flex-col gap-4\">\n      <div className=\"h-12 w-1/2 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-5 w-full animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-5 w-full animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-5 w-1/3 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-5 w-52 animate-pulse rounded-lg bg-transparent\" />\n      <div className=\"h-8 w-52 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-5 w-2/3 animate-pulse rounded-lg bg-muted-foreground/20\" />\n    </div>\n  );\n};\n\nexport const InlineDocumentSkeleton = () => {\n  return (\n    <div className=\"flex w-full flex-col gap-4\">\n      <div className=\"h-4 w-48 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-3/4 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-1/2 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-64 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-40 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-36 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      <div className=\"h-4 w-64 animate-pulse rounded-lg bg-muted-foreground/20\" />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;;AAIO,MAAM,mBAAmB,CAAC,EAC/B,YAAY,EAGb;IACC,OAAO,iBAAiB,wBACtB,kaAAC;QAAI,WAAU;kBACb,cAAA,kaAAC;YAAI,WAAU;;;;;;;;;;6BAGjB,kaAAC;QAAI,WAAU;;0BACb,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;KApBa;AAsBN,MAAM,yBAAyB;IACpC,qBACE,kaAAC;QAAI,WAAU;;0BACb,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;0BACf,kaAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;MAZa","debugId":null}},
    {"offset": {"line": 2735, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/response.tsx"],"sourcesContent":["\"use client\";\n\nimport { type ComponentProps, memo } from \"react\";\nimport { Streamdown } from \"streamdown\";\nimport { cn } from \"@/lib/utils\";\n\ntype ResponseProps = ComponentProps<typeof Streamdown>;\n\nexport const Response = memo(\n  ({ className, ...props }: ResponseProps) => (\n    <Streamdown\n      className={cn(\n        \"size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 [&_code]:whitespace-pre-wrap [&_code]:break-words [&_pre]:max-w-full [&_pre]:overflow-x-auto\",\n        className\n      )}\n      {...props}\n    />\n  ),\n  (prevProps, nextProps) => prevProps.children === nextProps.children\n);\n\nResponse.displayName = \"Response\";\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAQO,MAAM,yBAAW,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,OACzB,CAAC,EAAE,SAAS,EAAE,GAAG,OAAsB,iBACrC,kaAAC,6RAAA,CAAA,aAAU;QACT,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,uJACA;QAED,GAAG,KAAK;;;;;cAGb,CAAC,WAAW,YAAc,UAAU,QAAQ,KAAK,UAAU,QAAQ;;AAGrE,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2769, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/suggestion.tsx"],"sourcesContent":["\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useState } from \"react\";\nimport { useWindowSize } from \"usehooks-ts\";\n\nimport type { UISuggestion } from \"@/lib/editor/suggestions\";\nimport { cn } from \"@/lib/utils\";\nimport type { ArtifactKind } from \"./artifact\";\nimport { CrossIcon, MessageIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\nexport const Suggestion = ({\n  suggestion,\n  onApply,\n  artifactKind,\n}: {\n  suggestion: UISuggestion;\n  onApply: () => void;\n  artifactKind: ArtifactKind;\n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const { width: windowWidth } = useWindowSize();\n\n  return (\n    <AnimatePresence>\n      {isExpanded ? (\n        <motion.div\n          animate={{ opacity: 1, y: -20 }}\n          className=\"-right-12 md:-right-16 absolute z-50 flex w-56 flex-col gap-3 rounded-2xl border bg-background p-3 font-sans text-sm shadow-xl\"\n          exit={{ opacity: 0, y: -10 }}\n          initial={{ opacity: 0, y: -10 }}\n          key={suggestion.id}\n          transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n          whileHover={{ scale: 1.05 }}\n        >\n          <div className=\"flex flex-row items-center justify-between\">\n            <div className=\"flex flex-row items-center gap-2\">\n              <div className=\"size-4 rounded-full bg-muted-foreground/25\" />\n              <div className=\"font-medium\">Assistant</div>\n            </div>\n            <button\n              className=\"cursor-pointer text-gray-500 text-xs\"\n              onClick={() => {\n                setIsExpanded(false);\n              }}\n              type=\"button\"\n            >\n              <CrossIcon size={12} />\n            </button>\n          </div>\n          <div>{suggestion.description}</div>\n          <Button\n            className=\"w-fit rounded-full px-3 py-1.5\"\n            onClick={onApply}\n            variant=\"outline\"\n          >\n            Apply\n          </Button>\n        </motion.div>\n      ) : (\n        <motion.div\n          className={cn(\"cursor-pointer p-1 text-muted-foreground\", {\n            \"-right-8 absolute\": artifactKind === \"text\",\n            \"sticky top-0 right-4\": artifactKind === \"code\",\n          })}\n          onClick={() => {\n            setIsExpanded(true);\n          }}\n          whileHover={{ scale: 1.1 }}\n        >\n          <MessageIcon size={windowWidth && windowWidth < 768 ? 16 : 14} />\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAGA;AAEA;AACA;;;AAVA;;;;;;;AAYO,MAAM,aAAa,CAAC,EACzB,UAAU,EACV,OAAO,EACP,YAAY,EAKb;;IACC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,CAAA,GAAA,iQAAA,CAAA,gBAAa,AAAD;IAE3C,qBACE,kaAAC,qYAAA,CAAA,kBAAe;kBACb,2BACC,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,WAAU;YACV,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC3B,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAE9B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,YAAY;gBAAE,OAAO;YAAK;;8BAE1B,kaAAC;oBAAI,WAAU;;sCACb,kaAAC;4BAAI,WAAU;;8CACb,kaAAC;oCAAI,WAAU;;;;;;8CACf,kaAAC;oCAAI,WAAU;8CAAc;;;;;;;;;;;;sCAE/B,kaAAC;4BACC,WAAU;4BACV,SAAS;gCACP,cAAc;4BAChB;4BACA,MAAK;sCAEL,cAAA,kaAAC,uHAAA,CAAA,YAAS;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAGrB,kaAAC;8BAAK,WAAW,WAAW;;;;;;8BAC5B,kaAAC,8HAAA,CAAA,SAAM;oBACL,WAAU;oBACV,SAAS;oBACT,SAAQ;8BACT;;;;;;;WAxBI,WAAW,EAAE;;;;iCA6BpB,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;YACT,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,4CAA4C;gBACxD,qBAAqB,iBAAiB;gBACtC,wBAAwB,iBAAiB;YAC3C;YACA,SAAS;gBACP,cAAc;YAChB;YACA,YAAY;gBAAE,OAAO;YAAI;sBAEzB,cAAA,kaAAC,uHAAA,CAAA,cAAW;gBAAC,MAAM,eAAe,cAAc,MAAM,KAAK;;;;;;;;;;;;;;;;AAKrE;GAhEa;;QAUoB,iQAAA,CAAA,gBAAa;;;KAVjC","debugId":null}},
    {"offset": {"line": 2936, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/editor/suggestions.tsx"],"sourcesContent":["import type { Node } from \"prosemirror-model\";\nimport { Plugin, PluginKey } from \"prosemirror-state\";\nimport {\n  type Decoration,\n  DecorationSet,\n  type EditorView,\n} from \"prosemirror-view\";\nimport { createRoot } from \"react-dom/client\";\nimport type { ArtifactKind } from \"@/components/artifact\";\nimport { Suggestion as PreviewSuggestion } from \"@/components/suggestion\";\nimport type { Suggestion } from \"@/lib/db/schema\";\n\nexport interface UISuggestion extends Suggestion {\n  selectionStart: number;\n  selectionEnd: number;\n}\n\ntype Position = {\n  start: number;\n  end: number;\n};\n\nfunction findPositionsInDoc(doc: Node, searchText: string): Position | null {\n  let positions: { start: number; end: number } | null = null;\n\n  doc.nodesBetween(0, doc.content.size, (node, pos) => {\n    if (node.isText && node.text) {\n      const index = node.text.indexOf(searchText);\n\n      if (index !== -1) {\n        positions = {\n          start: pos + index,\n          end: pos + index + searchText.length,\n        };\n\n        return false;\n      }\n    }\n\n    return true;\n  });\n\n  return positions;\n}\n\nexport function projectWithPositions(\n  doc: Node,\n  suggestions: Suggestion[]\n): UISuggestion[] {\n  return suggestions.map((suggestion) => {\n    const positions = findPositionsInDoc(doc, suggestion.originalText);\n\n    if (!positions) {\n      return {\n        ...suggestion,\n        selectionStart: 0,\n        selectionEnd: 0,\n      };\n    }\n\n    return {\n      ...suggestion,\n      selectionStart: positions.start,\n      selectionEnd: positions.end,\n    };\n  });\n}\n\nexport function createSuggestionWidget(\n  suggestion: UISuggestion,\n  view: EditorView,\n  artifactKind: ArtifactKind = \"text\"\n): { dom: HTMLElement; destroy: () => void } {\n  const dom = document.createElement(\"span\");\n  const root = createRoot(dom);\n\n  dom.addEventListener(\"mousedown\", (event) => {\n    event.preventDefault();\n    view.dom.blur();\n  });\n\n  const onApply = () => {\n    const { state, dispatch } = view;\n\n    const decorationTransaction = state.tr;\n    const currentState = suggestionsPluginKey.getState(state);\n    const currentDecorations = currentState?.decorations;\n\n    if (currentDecorations) {\n      const newDecorations = DecorationSet.create(\n        state.doc,\n        currentDecorations.find().filter((decoration: Decoration) => {\n          return decoration.spec.suggestionId !== suggestion.id;\n        })\n      );\n\n      decorationTransaction.setMeta(suggestionsPluginKey, {\n        decorations: newDecorations,\n        selected: null,\n      });\n      dispatch(decorationTransaction);\n    }\n\n    const textTransaction = view.state.tr.replaceWith(\n      suggestion.selectionStart,\n      suggestion.selectionEnd,\n      state.schema.text(suggestion.suggestedText)\n    );\n\n    textTransaction.setMeta(\"no-debounce\", true);\n\n    dispatch(textTransaction);\n  };\n\n  root.render(\n    <PreviewSuggestion\n      artifactKind={artifactKind}\n      onApply={onApply}\n      suggestion={suggestion}\n    />\n  );\n\n  return {\n    dom,\n    destroy: () => {\n      // Wrapping unmount in setTimeout to avoid synchronous unmounting during render\n      setTimeout(() => {\n        root.unmount();\n      }, 0);\n    },\n  };\n}\n\nexport const suggestionsPluginKey = new PluginKey(\"suggestions\");\nexport const suggestionsPlugin = new Plugin({\n  key: suggestionsPluginKey,\n  state: {\n    init() {\n      return { decorations: DecorationSet.empty, selected: null };\n    },\n    apply(tr, state) {\n      const newDecorations = tr.getMeta(suggestionsPluginKey);\n      if (newDecorations) {\n        return newDecorations;\n      }\n\n      return {\n        decorations: state.decorations.map(tr.mapping, tr.doc),\n        selected: state.selected,\n      };\n    },\n  },\n  props: {\n    decorations(state) {\n      return this.getState(state)?.decorations ?? DecorationSet.empty;\n    },\n  },\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3067, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/editor/functions.tsx"],"sourcesContent":["\"use client\";\n\nimport { defaultMarkdownSerializer } from \"prosemirror-markdown\";\nimport { DOMParser, type Node } from \"prosemirror-model\";\nimport { Decoration, DecorationSet, type EditorView } from \"prosemirror-view\";\nimport { renderToString } from \"react-dom/server\";\n\nimport { Response } from \"@/components/elements/response\";\n\nimport { documentSchema } from \"./config\";\nimport { createSuggestionWidget, type UISuggestion } from \"./suggestions\";\n\nexport const buildDocumentFromContent = (content: string) => {\n  const parser = DOMParser.fromSchema(documentSchema);\n  const stringFromMarkdown = renderToString(<Response>{content}</Response>);\n  const tempContainer = document.createElement(\"div\");\n  tempContainer.innerHTML = stringFromMarkdown;\n  return parser.parse(tempContainer);\n};\n\nexport const buildContentFromDocument = (document: Node) => {\n  return defaultMarkdownSerializer.serialize(document);\n};\n\nexport const createDecorations = (\n  suggestions: UISuggestion[],\n  view: EditorView\n) => {\n  const decorations: Decoration[] = [];\n\n  for (const suggestion of suggestions) {\n    decorations.push(\n      Decoration.inline(\n        suggestion.selectionStart,\n        suggestion.selectionEnd,\n        {\n          class: \"suggestion-highlight\",\n        },\n        {\n          suggestionId: suggestion.id,\n          type: \"highlight\",\n        }\n      )\n    );\n\n    decorations.push(\n      Decoration.widget(\n        suggestion.selectionStart,\n        (currentView) => {\n          const { dom } = createSuggestionWidget(suggestion, currentView);\n          return dom;\n        },\n        {\n          suggestionId: suggestion.id,\n          type: \"widget\",\n        }\n      )\n    );\n  }\n\n  return DecorationSet.create(view.state.doc, decorations);\n};\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAVA;;;;;;;;;AAYO,MAAM,2BAA2B,CAAC;IACvC,MAAM,SAAS,0NAAA,CAAA,YAAS,CAAC,UAAU,CAAC,0HAAA,CAAA,iBAAc;IAClD,MAAM,qBAAqB,CAAA,GAAA,qZAAA,CAAA,iBAAc,AAAD,gBAAE,kaAAC,sIAAA,CAAA,WAAQ;kBAAE;;;;;;IACrD,MAAM,gBAAgB,SAAS,aAAa,CAAC;IAC7C,cAAc,SAAS,GAAG;IAC1B,OAAO,OAAO,KAAK,CAAC;AACtB;AAEO,MAAM,2BAA2B,CAAC;IACvC,OAAO,gOAAA,CAAA,4BAAyB,CAAC,SAAS,CAAC;AAC7C;AAEO,MAAM,oBAAoB,CAC/B,aACA;IAEA,MAAM,cAA4B,EAAE;IAEpC,KAAK,MAAM,cAAc,YAAa;QACpC,YAAY,IAAI,CACd,wNAAA,CAAA,aAAU,CAAC,MAAM,CACf,WAAW,cAAc,EACzB,WAAW,YAAY,EACvB;YACE,OAAO;QACT,GACA;YACE,cAAc,WAAW,EAAE;YAC3B,MAAM;QACR;QAIJ,YAAY,IAAI,CACd,wNAAA,CAAA,aAAU,CAAC,MAAM,CACf,WAAW,cAAc,EACzB,CAAC;YACC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,yBAAsB,AAAD,EAAE,YAAY;YACnD,OAAO;QACT,GACA;YACE,cAAc,WAAW,EAAE;YAC3B,MAAM;QACR;IAGN;IAEA,OAAO,wNAAA,CAAA,gBAAa,CAAC,MAAM,CAAC,KAAK,KAAK,CAAC,GAAG,EAAE;AAC9C","debugId":null}},
    {"offset": {"line": 3133, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/editor/config.ts"],"sourcesContent":["import { textblockTypeInputRule } from \"prosemirror-inputrules\";\nimport { Schema } from \"prosemirror-model\";\nimport { schema } from \"prosemirror-schema-basic\";\nimport { addListNodes } from \"prosemirror-schema-list\";\nimport type { Transaction } from \"prosemirror-state\";\nimport type { EditorView } from \"prosemirror-view\";\nimport type { MutableRefObject } from \"react\";\n\nimport { buildContentFromDocument } from \"./functions\";\n\nexport const documentSchema = new Schema({\n  nodes: addListNodes(schema.spec.nodes, \"paragraph block*\", \"block\"),\n  marks: schema.spec.marks,\n});\n\nexport function headingRule(level: number) {\n  return textblockTypeInputRule(\n    new RegExp(`^(#{1,${level}})\\\\s$`),\n    documentSchema.nodes.heading,\n    () => ({ level })\n  );\n}\n\nexport const handleTransaction = ({\n  transaction,\n  editorRef,\n  onSaveContent,\n}: {\n  transaction: Transaction;\n  editorRef: MutableRefObject<EditorView | null>;\n  onSaveContent: (updatedContent: string, debounce: boolean) => void;\n}) => {\n  if (!editorRef || !editorRef.current) {\n    return;\n  }\n\n  const newState = editorRef.current.state.apply(transaction);\n  editorRef.current.updateState(newState);\n\n  if (transaction.docChanged && !transaction.getMeta(\"no-save\")) {\n    const updatedContent = buildContentFromDocument(newState.doc);\n\n    if (transaction.getMeta(\"no-debounce\")) {\n      onSaveContent(updatedContent, false);\n    } else {\n      onSaveContent(updatedContent, true);\n    }\n  }\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAKA;;;;;;AAEO,MAAM,iBAAiB,IAAI,0NAAA,CAAA,SAAM,CAAC;IACvC,OAAO,CAAA,GAAA,2OAAA,CAAA,eAAY,AAAD,EAAE,6OAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK,EAAE,oBAAoB;IAC3D,OAAO,6OAAA,CAAA,SAAM,CAAC,IAAI,CAAC,KAAK;AAC1B;AAEO,SAAS,YAAY,KAAa;IACvC,OAAO,CAAA,GAAA,mOAAA,CAAA,yBAAsB,AAAD,EAC1B,IAAI,OAAO,CAAC,MAAM,EAAE,MAAM,MAAM,CAAC,GACjC,eAAe,KAAK,CAAC,OAAO,EAC5B,IAAM,CAAC;YAAE;QAAM,CAAC;AAEpB;AAEO,MAAM,oBAAoB,CAAC,EAChC,WAAW,EACX,SAAS,EACT,aAAa,EAKd;IACC,IAAI,CAAC,aAAa,CAAC,UAAU,OAAO,EAAE;QACpC;IACF;IAEA,MAAM,WAAW,UAAU,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC;IAC/C,UAAU,OAAO,CAAC,WAAW,CAAC;IAE9B,IAAI,YAAY,UAAU,IAAI,CAAC,YAAY,OAAO,CAAC,YAAY;QAC7D,MAAM,iBAAiB,CAAA,GAAA,8HAAA,CAAA,2BAAwB,AAAD,EAAE,SAAS,GAAG;QAE5D,IAAI,YAAY,OAAO,CAAC,gBAAgB;YACtC,cAAc,gBAAgB;QAChC,OAAO;YACL,cAAc,gBAAgB;QAChC;IACF;AACF","debugId":null}},
    {"offset": {"line": 3181, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/text-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport { exampleSetup } from \"prosemirror-example-setup\";\nimport { inputRules } from \"prosemirror-inputrules\";\nimport { EditorState } from \"prosemirror-state\";\nimport { EditorView } from \"prosemirror-view\";\nimport { memo, useEffect, useRef } from \"react\";\n\nimport type { Suggestion } from \"@/lib/db/schema\";\nimport {\n  documentSchema,\n  handleTransaction,\n  headingRule,\n} from \"@/lib/editor/config\";\nimport {\n  buildContentFromDocument,\n  buildDocumentFromContent,\n  createDecorations,\n} from \"@/lib/editor/functions\";\nimport {\n  projectWithPositions,\n  suggestionsPlugin,\n  suggestionsPluginKey,\n} from \"@/lib/editor/suggestions\";\n\ntype EditorProps = {\n  content: string;\n  onSaveContent: (updatedContent: string, debounce: boolean) => void;\n  status: \"streaming\" | \"idle\";\n  isCurrentVersion: boolean;\n  currentVersionIndex: number;\n  suggestions: Suggestion[];\n};\n\nfunction PureEditor({\n  content,\n  onSaveContent,\n  suggestions,\n  status,\n}: EditorProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const editorRef = useRef<EditorView | null>(null);\n\n  useEffect(() => {\n    if (containerRef.current && !editorRef.current) {\n      const state = EditorState.create({\n        doc: buildDocumentFromContent(content),\n        plugins: [\n          ...exampleSetup({ schema: documentSchema, menuBar: false }),\n          inputRules({\n            rules: [\n              headingRule(1),\n              headingRule(2),\n              headingRule(3),\n              headingRule(4),\n              headingRule(5),\n              headingRule(6),\n            ],\n          }),\n          suggestionsPlugin,\n        ],\n      });\n\n      editorRef.current = new EditorView(containerRef.current, {\n        state,\n      });\n    }\n\n    return () => {\n      if (editorRef.current) {\n        editorRef.current.destroy();\n        editorRef.current = null;\n      }\n    };\n    // NOTE: we only want to run this effect once\n    // eslint-disable-next-line\n  }, [content]);\n\n  useEffect(() => {\n    if (editorRef.current) {\n      editorRef.current.setProps({\n        dispatchTransaction: (transaction) => {\n          handleTransaction({\n            transaction,\n            editorRef,\n            onSaveContent,\n          });\n        },\n      });\n    }\n  }, [onSaveContent]);\n\n  useEffect(() => {\n    if (editorRef.current && content) {\n      const currentContent = buildContentFromDocument(\n        editorRef.current.state.doc\n      );\n\n      if (status === \"streaming\") {\n        const newDocument = buildDocumentFromContent(content);\n\n        const transaction = editorRef.current.state.tr.replaceWith(\n          0,\n          editorRef.current.state.doc.content.size,\n          newDocument.content\n        );\n\n        transaction.setMeta(\"no-save\", true);\n        editorRef.current.dispatch(transaction);\n        return;\n      }\n\n      if (currentContent !== content) {\n        const newDocument = buildDocumentFromContent(content);\n\n        const transaction = editorRef.current.state.tr.replaceWith(\n          0,\n          editorRef.current.state.doc.content.size,\n          newDocument.content\n        );\n\n        transaction.setMeta(\"no-save\", true);\n        editorRef.current.dispatch(transaction);\n      }\n    }\n  }, [content, status]);\n\n  useEffect(() => {\n    if (editorRef.current?.state.doc && content) {\n      const projectedSuggestions = projectWithPositions(\n        editorRef.current.state.doc,\n        suggestions\n      ).filter(\n        (suggestion) => suggestion.selectionStart && suggestion.selectionEnd\n      );\n\n      const decorations = createDecorations(\n        projectedSuggestions,\n        editorRef.current\n      );\n\n      const transaction = editorRef.current.state.tr;\n      transaction.setMeta(suggestionsPluginKey, { decorations });\n      editorRef.current.dispatch(transaction);\n    }\n  }, [suggestions, content]);\n\n  return (\n    <div className=\"prose dark:prose-invert relative\" ref={containerRef} />\n  );\n}\n\nfunction areEqual(prevProps: EditorProps, nextProps: EditorProps) {\n  return (\n    prevProps.suggestions === nextProps.suggestions &&\n    prevProps.currentVersionIndex === nextProps.currentVersionIndex &&\n    prevProps.isCurrentVersion === nextProps.isCurrentVersion &&\n    !(prevProps.status === \"streaming\" && nextProps.status === \"streaming\") &&\n    prevProps.content === nextProps.content &&\n    prevProps.onSaveContent === nextProps.onSaveContent\n  );\n}\n\nexport const Editor = memo(PureEditor, areEqual);\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAGA;AAKA;AAKA;;;AAnBA;;;;;;;;;AAkCA,SAAS,WAAW,EAClB,OAAO,EACP,aAAa,EACb,WAAW,EACX,MAAM,EACM;;IACZ,MAAM,eAAe,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAkB;IAC5C,MAAM,YAAY,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAqB;IAE5C,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,aAAa,OAAO,IAAI,CAAC,UAAU,OAAO,EAAE;gBAC9C,MAAM,QAAQ,yNAAA,CAAA,cAAW,CAAC,MAAM,CAAC;oBAC/B,KAAK,CAAA,GAAA,8HAAA,CAAA,2BAAwB,AAAD,EAAE;oBAC9B,SAAS;2BACJ,CAAA,GAAA,+OAAA,CAAA,eAAY,AAAD,EAAE;4BAAE,QAAQ,0HAAA,CAAA,iBAAc;4BAAE,SAAS;wBAAM;wBACzD,CAAA,GAAA,mOAAA,CAAA,aAAU,AAAD,EAAE;4BACT,OAAO;gCACL,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;gCACZ,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;gCACZ,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;gCACZ,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;gCACZ,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;gCACZ,CAAA,GAAA,0HAAA,CAAA,cAAW,AAAD,EAAE;6BACb;wBACH;wBACA,gIAAA,CAAA,oBAAiB;qBAClB;gBACH;gBAEA,UAAU,OAAO,GAAG,IAAI,wNAAA,CAAA,aAAU,CAAC,aAAa,OAAO,EAAE;oBACvD;gBACF;YACF;YAEA;wCAAO;oBACL,IAAI,UAAU,OAAO,EAAE;wBACrB,UAAU,OAAO,CAAC,OAAO;wBACzB,UAAU,OAAO,GAAG;oBACtB;gBACF;;QACA,6CAA6C;QAC7C,2BAA2B;QAC7B;+BAAG;QAAC;KAAQ;IAEZ,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,UAAU,OAAO,EAAE;gBACrB,UAAU,OAAO,CAAC,QAAQ,CAAC;oBACzB,mBAAmB;gDAAE,CAAC;4BACpB,CAAA,GAAA,0HAAA,CAAA,oBAAiB,AAAD,EAAE;gCAChB;gCACA;gCACA;4BACF;wBACF;;gBACF;YACF;QACF;+BAAG;QAAC;KAAc;IAElB,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,UAAU,OAAO,IAAI,SAAS;gBAChC,MAAM,iBAAiB,CAAA,GAAA,8HAAA,CAAA,2BAAwB,AAAD,EAC5C,UAAU,OAAO,CAAC,KAAK,CAAC,GAAG;gBAG7B,IAAI,WAAW,aAAa;oBAC1B,MAAM,cAAc,CAAA,GAAA,8HAAA,CAAA,2BAAwB,AAAD,EAAE;oBAE7C,MAAM,cAAc,UAAU,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CACxD,GACA,UAAU,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EACxC,YAAY,OAAO;oBAGrB,YAAY,OAAO,CAAC,WAAW;oBAC/B,UAAU,OAAO,CAAC,QAAQ,CAAC;oBAC3B;gBACF;gBAEA,IAAI,mBAAmB,SAAS;oBAC9B,MAAM,cAAc,CAAA,GAAA,8HAAA,CAAA,2BAAwB,AAAD,EAAE;oBAE7C,MAAM,cAAc,UAAU,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CACxD,GACA,UAAU,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EACxC,YAAY,OAAO;oBAGrB,YAAY,OAAO,CAAC,WAAW;oBAC/B,UAAU,OAAO,CAAC,QAAQ,CAAC;gBAC7B;YACF;QACF;+BAAG;QAAC;QAAS;KAAO;IAEpB,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;gCAAE;YACR,IAAI,UAAU,OAAO,EAAE,MAAM,OAAO,SAAS;gBAC3C,MAAM,uBAAuB,CAAA,GAAA,gIAAA,CAAA,uBAAoB,AAAD,EAC9C,UAAU,OAAO,CAAC,KAAK,CAAC,GAAG,EAC3B,aACA,MAAM;iEACN,CAAC,aAAe,WAAW,cAAc,IAAI,WAAW,YAAY;;gBAGtE,MAAM,cAAc,CAAA,GAAA,8HAAA,CAAA,oBAAiB,AAAD,EAClC,sBACA,UAAU,OAAO;gBAGnB,MAAM,cAAc,UAAU,OAAO,CAAC,KAAK,CAAC,EAAE;gBAC9C,YAAY,OAAO,CAAC,gIAAA,CAAA,uBAAoB,EAAE;oBAAE;gBAAY;gBACxD,UAAU,OAAO,CAAC,QAAQ,CAAC;YAC7B;QACF;+BAAG;QAAC;QAAa;KAAQ;IAEzB,qBACE,kaAAC;QAAI,WAAU;QAAmC,KAAK;;;;;;AAE3D;GApHS;KAAA;AAsHT,SAAS,SAAS,SAAsB,EAAE,SAAsB;IAC9D,OACE,UAAU,WAAW,KAAK,UAAU,WAAW,IAC/C,UAAU,mBAAmB,KAAK,UAAU,mBAAmB,IAC/D,UAAU,gBAAgB,KAAK,UAAU,gBAAgB,IACzD,CAAC,CAAC,UAAU,MAAM,KAAK,eAAe,UAAU,MAAM,KAAK,WAAW,KACtE,UAAU,OAAO,KAAK,UAAU,OAAO,IACvC,UAAU,aAAa,KAAK,UAAU,aAAa;AAEvD;AAEO,MAAM,uBAAS,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAAE,YAAY","debugId":null}},
    {"offset": {"line": 3337, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/artifacts/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { getSuggestionsByDocumentId } from \"@/lib/db/queries\";\n\nexport async function getSuggestions({ documentId }: { documentId: string }) {\n  const suggestions = await getSuggestionsByDocumentId({ documentId });\n  return suggestions ?? [];\n}\n"],"names":[],"mappings":";;;;;;IAIsB,iBAAA,WAAA,GAAA,CAAA,GAAA,8aAAA,CAAA,wBAAA,EAAA,8CAAA,8aAAA,CAAA,aAAA,EAAA,KAAA,GAAA,8aAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 3353, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/artifacts/text/client.tsx"],"sourcesContent":["import { toast } from \"sonner\";\nimport { Artifact } from \"@/components/create-artifact\";\nimport { DiffView } from \"@/components/diffview\";\nimport { DocumentSkeleton } from \"@/components/document-skeleton\";\nimport {\n  ClockRewind,\n  CopyIcon,\n  MessageIcon,\n  PenIcon,\n  RedoIcon,\n  UndoIcon,\n} from \"@/components/icons\";\nimport { Editor } from \"@/components/text-editor\";\nimport type { Suggestion } from \"@/lib/db/schema\";\nimport { getSuggestions } from \"../actions\";\n\ntype TextArtifactMetadata = {\n  suggestions: Suggestion[];\n};\n\nexport const textArtifact = new Artifact<\"text\", TextArtifactMetadata>({\n  kind: \"text\",\n  description: \"Useful for text content, like drafting essays and emails.\",\n  initialize: async ({ documentId, setMetadata }) => {\n    const suggestions = await getSuggestions({ documentId });\n\n    setMetadata({\n      suggestions,\n    });\n  },\n  onStreamPart: ({ streamPart, setMetadata, setArtifact }) => {\n    if (streamPart.type === \"data-suggestion\") {\n      setMetadata((metadata) => {\n        return {\n          suggestions: [...metadata.suggestions, streamPart.data],\n        };\n      });\n    }\n\n    if (streamPart.type === \"data-textDelta\") {\n      setArtifact((draftArtifact) => {\n        return {\n          ...draftArtifact,\n          content: draftArtifact.content + streamPart.data,\n          isVisible:\n            draftArtifact.status === \"streaming\" &&\n            draftArtifact.content.length > 400 &&\n            draftArtifact.content.length < 450\n              ? true\n              : draftArtifact.isVisible,\n          status: \"streaming\",\n        };\n      });\n    }\n  },\n  content: ({\n    mode,\n    status,\n    content,\n    isCurrentVersion,\n    currentVersionIndex,\n    onSaveContent,\n    getDocumentContentById,\n    isLoading,\n    metadata,\n  }) => {\n    if (isLoading) {\n      return <DocumentSkeleton artifactKind=\"text\" />;\n    }\n\n    if (mode === \"diff\") {\n      const oldContent = getDocumentContentById(currentVersionIndex - 1);\n      const newContent = getDocumentContentById(currentVersionIndex);\n\n      return <DiffView newContent={newContent} oldContent={oldContent} />;\n    }\n\n    return (\n      <div className=\"flex flex-row px-4 py-8 md:p-20\">\n        <Editor\n          content={content}\n          currentVersionIndex={currentVersionIndex}\n          isCurrentVersion={isCurrentVersion}\n          onSaveContent={onSaveContent}\n          status={status}\n          suggestions={metadata ? metadata.suggestions : []}\n        />\n\n        {metadata?.suggestions && metadata.suggestions.length > 0 ? (\n          <div className=\"h-dvh w-12 shrink-0 md:hidden\" />\n        ) : null}\n      </div>\n    );\n  },\n  actions: [\n    {\n      icon: <ClockRewind size={18} />,\n      description: \"View changes\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"toggle\");\n      },\n      isDisabled: ({ currentVersionIndex }) => {\n        if (currentVersionIndex === 0) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <UndoIcon size={18} />,\n      description: \"View Previous version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"prev\");\n      },\n      isDisabled: ({ currentVersionIndex }) => {\n        if (currentVersionIndex === 0) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <RedoIcon size={18} />,\n      description: \"View Next version\",\n      onClick: ({ handleVersionChange }) => {\n        handleVersionChange(\"next\");\n      },\n      isDisabled: ({ isCurrentVersion }) => {\n        if (isCurrentVersion) {\n          return true;\n        }\n\n        return false;\n      },\n    },\n    {\n      icon: <CopyIcon size={18} />,\n      description: \"Copy to clipboard\",\n      onClick: ({ content }) => {\n        navigator.clipboard.writeText(content);\n        toast.success(\"Copied to clipboard!\");\n      },\n    },\n  ],\n  toolbar: [\n    {\n      icon: <PenIcon />,\n      description: \"Add final polish\",\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            {\n              type: \"text\",\n              text: \"Please add final polish and check for grammar, add section titles for better structure, and ensure everything reads smoothly.\",\n            },\n          ],\n        });\n      },\n    },\n    {\n      icon: <MessageIcon />,\n      description: \"Request suggestions\",\n      onClick: ({ sendMessage }) => {\n        sendMessage({\n          role: \"user\",\n          parts: [\n            {\n              type: \"text\",\n              text: \"Please add suggestions you have that could improve the writing.\",\n            },\n          ],\n        });\n      },\n    },\n  ],\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3579, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/artifact-actions.tsx"],"sourcesContent":["import { type Dispatch, memo, type SetStateAction, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { cn } from \"@/lib/utils\";\nimport { artifactDefinitions, type UIArtifact } from \"./artifact\";\nimport type { ArtifactActionContext } from \"./create-artifact\";\nimport { Button } from \"./ui/button\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"./ui/tooltip\";\n\ntype ArtifactActionsProps = {\n  artifact: UIArtifact;\n  handleVersionChange: (type: \"next\" | \"prev\" | \"toggle\" | \"latest\") => void;\n  currentVersionIndex: number;\n  isCurrentVersion: boolean;\n  mode: \"edit\" | \"diff\";\n  metadata: any;\n  setMetadata: Dispatch<SetStateAction<any>>;\n};\n\nfunction PureArtifactActions({\n  artifact,\n  handleVersionChange,\n  currentVersionIndex,\n  isCurrentVersion,\n  mode,\n  metadata,\n  setMetadata,\n}: ArtifactActionsProps) {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const artifactDefinition = artifactDefinitions.find(\n    (definition) => definition.kind === artifact.kind\n  );\n\n  if (!artifactDefinition) {\n    throw new Error(\"Artifact definition not found!\");\n  }\n\n  const actionContext: ArtifactActionContext = {\n    content: artifact.content,\n    handleVersionChange,\n    currentVersionIndex,\n    isCurrentVersion,\n    mode,\n    metadata,\n    setMetadata,\n  };\n\n  return (\n    <div className=\"flex flex-row gap-1\">\n      {artifactDefinition.actions.map((action) => (\n        <Tooltip key={action.description}>\n          <TooltipTrigger asChild>\n            <Button\n              className={cn(\"h-fit dark:hover:bg-zinc-700\", {\n                \"p-2\": !action.label,\n                \"px-2 py-1.5\": action.label,\n              })}\n              disabled={\n                isLoading || artifact.status === \"streaming\"\n                  ? true\n                  : action.isDisabled\n                    ? action.isDisabled(actionContext)\n                    : false\n              }\n              onClick={async () => {\n                setIsLoading(true);\n\n                try {\n                  await Promise.resolve(action.onClick(actionContext));\n                } catch (_error) {\n                  toast.error(\"Failed to execute action\");\n                } finally {\n                  setIsLoading(false);\n                }\n              }}\n              variant=\"outline\"\n            >\n              {action.icon}\n              {action.label}\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent>{action.description}</TooltipContent>\n        </Tooltip>\n      ))}\n    </div>\n  );\n}\n\nexport const ArtifactActions = memo(\n  PureArtifactActions,\n  (prevProps, nextProps) => {\n    if (prevProps.artifact.status !== nextProps.artifact.status) {\n      return false;\n    }\n    if (prevProps.currentVersionIndex !== nextProps.currentVersionIndex) {\n      return false;\n    }\n    if (prevProps.isCurrentVersion !== nextProps.isCurrentVersion) {\n      return false;\n    }\n    if (prevProps.artifact.content !== nextProps.artifact.content) {\n      return false;\n    }\n\n    return true;\n  }\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAEA;AACA;;;;;;;;;AAYA,SAAS,oBAAoB,EAC3B,QAAQ,EACR,mBAAmB,EACnB,mBAAmB,EACnB,gBAAgB,EAChB,IAAI,EACJ,QAAQ,EACR,WAAW,EACU;;IACrB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,qBAAqB,0HAAA,CAAA,sBAAmB,CAAC,IAAI,CACjD,CAAC,aAAe,WAAW,IAAI,KAAK,SAAS,IAAI;IAGnD,IAAI,CAAC,oBAAoB;QACvB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,gBAAuC;QAC3C,SAAS,SAAS,OAAO;QACzB;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,kaAAC;QAAI,WAAU;kBACZ,mBAAmB,OAAO,CAAC,GAAG,CAAC,CAAC,uBAC/B,kaAAC,+HAAA,CAAA,UAAO;;kCACN,kaAAC,+HAAA,CAAA,iBAAc;wBAAC,OAAO;kCACrB,cAAA,kaAAC,8HAAA,CAAA,SAAM;4BACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,gCAAgC;gCAC5C,OAAO,CAAC,OAAO,KAAK;gCACpB,eAAe,OAAO,KAAK;4BAC7B;4BACA,UACE,aAAa,SAAS,MAAM,KAAK,cAC7B,OACA,OAAO,UAAU,GACf,OAAO,UAAU,CAAC,iBAClB;4BAER,SAAS;gCACP,aAAa;gCAEb,IAAI;oCACF,MAAM,QAAQ,OAAO,CAAC,OAAO,OAAO,CAAC;gCACvC,EAAE,OAAO,QAAQ;oCACf,qWAAA,CAAA,QAAK,CAAC,KAAK,CAAC;gCACd,SAAU;oCACR,aAAa;gCACf;4BACF;4BACA,SAAQ;;gCAEP,OAAO,IAAI;gCACX,OAAO,KAAK;;;;;;;;;;;;kCAGjB,kaAAC,+HAAA,CAAA,iBAAc;kCAAE,OAAO,WAAW;;;;;;;eA/BvB,OAAO,WAAW;;;;;;;;;;AAoCxC;GApES;KAAA;AAsEF,MAAM,gCAAkB,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAChC,qBACA,CAAC,WAAW;IACV,IAAI,UAAU,QAAQ,CAAC,MAAM,KAAK,UAAU,QAAQ,CAAC,MAAM,EAAE;QAC3D,OAAO;IACT;IACA,IAAI,UAAU,mBAAmB,KAAK,UAAU,mBAAmB,EAAE;QACnE,OAAO;IACT;IACA,IAAI,UAAU,gBAAgB,KAAK,UAAU,gBAAgB,EAAE;QAC7D,OAAO;IACT;IACA,IAAI,UAAU,QAAQ,CAAC,OAAO,KAAK,UAAU,QAAQ,CAAC,OAAO,EAAE;QAC7D,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 3699, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/artifact-close-button.tsx"],"sourcesContent":["import { memo } from \"react\";\nimport { initialArtifactData, useArtifact } from \"@/hooks/use-artifact\";\nimport { CrossIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\nfunction PureArtifactCloseButton() {\n  const { setArtifact } = useArtifact();\n\n  return (\n    <Button\n      className=\"h-fit p-2 dark:hover:bg-zinc-700\"\n      data-testid=\"artifact-close-button\"\n      onClick={() => {\n        setArtifact((currentArtifact) =>\n          currentArtifact.status === \"streaming\"\n            ? {\n                ...currentArtifact,\n                isVisible: false,\n              }\n            : { ...initialArtifactData, status: \"idle\" }\n        );\n      }}\n      variant=\"outline\"\n    >\n      <CrossIcon size={18} />\n    </Button>\n  );\n}\n\nexport const ArtifactCloseButton = memo(PureArtifactCloseButton, () => true);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;AAEA,SAAS;;IACP,MAAM,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD;IAElC,qBACE,kaAAC,8HAAA,CAAA,SAAM;QACL,WAAU;QACV,eAAY;QACZ,SAAS;YACP,YAAY,CAAC,kBACX,gBAAgB,MAAM,KAAK,cACvB;oBACE,GAAG,eAAe;oBAClB,WAAW;gBACb,IACA;oBAAE,GAAG,2HAAA,CAAA,sBAAmB;oBAAE,QAAQ;gBAAO;QAEjD;QACA,SAAQ;kBAER,cAAA,kaAAC,uHAAA,CAAA,YAAS;YAAC,MAAM;;;;;;;;;;;AAGvB;GAtBS;;QACiB,2HAAA,CAAA,cAAW;;;KAD5B;AAwBF,MAAM,oCAAsB,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAAE,yBAAyB,IAAM","debugId":null}},
    {"offset": {"line": 3762, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/hooks/use-scroll-to-bottom.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\nimport useSWR from \"swr\";\n\ntype ScrollFlag = ScrollBehavior | false;\n\nexport function useScrollToBottom() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const endRef = useRef<HTMLDivElement>(null);\n  const [isAtBottom, setIsAtBottom] = useState(true);\n\n  const { data: scrollBehavior = false, mutate: setScrollBehavior } =\n    useSWR<ScrollFlag>(\"messages:should-scroll\", null, { fallbackData: false });\n\n  const handleScroll = useCallback(() => {\n    if (!containerRef.current) {\n      return;\n    }\n    const { scrollTop, scrollHeight, clientHeight } = containerRef.current;\n\n    // Check if we are within 100px of the bottom (like v0 does)\n    setIsAtBottom(scrollTop + clientHeight >= scrollHeight - 100);\n  }, []);\n\n  useEffect(() => {\n    if (!containerRef.current) {\n      return;\n    }\n\n    const container = containerRef.current;\n\n    const resizeObserver = new ResizeObserver(() => {\n      requestAnimationFrame(() => {\n        handleScroll();\n      });\n    });\n\n    const mutationObserver = new MutationObserver(() => {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          handleScroll();\n        });\n      });\n    });\n\n    resizeObserver.observe(container);\n    mutationObserver.observe(container, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: [\"style\", \"class\", \"data-state\"],\n    });\n\n    handleScroll();\n\n    return () => {\n      resizeObserver.disconnect();\n      mutationObserver.disconnect();\n    };\n  }, [handleScroll]);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {\n      return;\n    }\n\n    container.addEventListener(\"scroll\", handleScroll);\n    handleScroll(); // Check initial state\n\n    return () => {\n      container.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [handleScroll]);\n\n  useEffect(() => {\n    if (scrollBehavior && containerRef.current) {\n      const container = containerRef.current;\n      const scrollOptions: ScrollToOptions = {\n        top: container.scrollHeight,\n        behavior: scrollBehavior,\n      };\n      container.scrollTo(scrollOptions);\n      setScrollBehavior(false);\n    }\n  }, [scrollBehavior, setScrollBehavior]);\n\n  const scrollToBottom = useCallback(\n    (currentScrollBehavior: ScrollBehavior = \"smooth\") => {\n      setScrollBehavior(currentScrollBehavior);\n    },\n    [setScrollBehavior]\n  );\n\n  function onViewportEnter() {\n    setIsAtBottom(true);\n  }\n\n  function onViewportLeave() {\n    setIsAtBottom(false);\n  }\n\n  return {\n    containerRef,\n    endRef,\n    isAtBottom,\n    scrollToBottom,\n    onViewportEnter,\n    onViewportLeave,\n  };\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;;AAIO,SAAS;;IACd,MAAM,eAAe,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAkB;IAC5C,MAAM,SAAS,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAkB;IACtC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,EAAE,MAAM,iBAAiB,KAAK,EAAE,QAAQ,iBAAiB,EAAE,GAC/D,CAAA,GAAA,qQAAA,CAAA,UAAM,AAAD,EAAc,0BAA0B,MAAM;QAAE,cAAc;IAAM;IAE3E,MAAM,eAAe,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD;uDAAE;YAC/B,IAAI,CAAC,aAAa,OAAO,EAAE;gBACzB;YACF;YACA,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,aAAa,OAAO;YAEtE,4DAA4D;YAC5D,cAAc,YAAY,gBAAgB,eAAe;QAC3D;sDAAG,EAAE;IAEL,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,CAAC,aAAa,OAAO,EAAE;gBACzB;YACF;YAEA,MAAM,YAAY,aAAa,OAAO;YAEtC,MAAM,iBAAiB,IAAI;+CAAe;oBACxC;uDAAsB;4BACpB;wBACF;;gBACF;;YAEA,MAAM,mBAAmB,IAAI;+CAAiB;oBAC5C;uDAAsB;4BACpB;+DAAsB;oCACpB;gCACF;;wBACF;;gBACF;;YAEA,eAAe,OAAO,CAAC;YACvB,iBAAiB,OAAO,CAAC,WAAW;gBAClC,WAAW;gBACX,SAAS;gBACT,YAAY;gBACZ,iBAAiB;oBAAC;oBAAS;oBAAS;iBAAa;YACnD;YAEA;YAEA;+CAAO;oBACL,eAAe,UAAU;oBACzB,iBAAiB,UAAU;gBAC7B;;QACF;sCAAG;QAAC;KAAa;IAEjB,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;uCAAE;YACR,MAAM,YAAY,aAAa,OAAO;YACtC,IAAI,CAAC,WAAW;gBACd;YACF;YAEA,UAAU,gBAAgB,CAAC,UAAU;YACrC,gBAAgB,sBAAsB;YAEtC;+CAAO;oBACL,UAAU,mBAAmB,CAAC,UAAU;gBAC1C;;QACF;sCAAG;QAAC;KAAa;IAEjB,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,kBAAkB,aAAa,OAAO,EAAE;gBAC1C,MAAM,YAAY,aAAa,OAAO;gBACtC,MAAM,gBAAiC;oBACrC,KAAK,UAAU,YAAY;oBAC3B,UAAU;gBACZ;gBACA,UAAU,QAAQ,CAAC;gBACnB,kBAAkB;YACpB;QACF;sCAAG;QAAC;QAAgB;KAAkB;IAEtC,MAAM,iBAAiB,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD;yDAC/B,CAAC,wBAAwC,QAAQ;YAC/C,kBAAkB;QACpB;wDACA;QAAC;KAAkB;IAGrB,SAAS;QACP,cAAc;IAChB;IAEA,SAAS;QACP,cAAc;IAChB;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GAxGgB;;QAMZ,qQAAA,CAAA,UAAM","debugId":null}},
    {"offset": {"line": 3907, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/hooks/use-messages.tsx"],"sourcesContent":["import type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { useEffect, useState } from \"react\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { useScrollToBottom } from \"./use-scroll-to-bottom\";\n\nexport function useMessages({\n  status,\n}: {\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n}) {\n  const {\n    containerRef,\n    endRef,\n    isAtBottom,\n    scrollToBottom,\n    onViewportEnter,\n    onViewportLeave,\n  } = useScrollToBottom();\n\n  const [hasSentMessage, setHasSentMessage] = useState(false);\n\n  useEffect(() => {\n    if (status === \"submitted\") {\n      setHasSentMessage(true);\n    }\n  }, [status]);\n\n  return {\n    containerRef,\n    endRef,\n    isAtBottom,\n    scrollToBottom,\n    onViewportEnter,\n    onViewportLeave,\n    hasSentMessage,\n  };\n}\n"],"names":[],"mappings":";;;AACA;AAEA;;;;AAEO,SAAS,YAAY,EAC1B,MAAM,EAGP;;IACC,MAAM,EACJ,YAAY,EACZ,MAAM,EACN,UAAU,EACV,cAAc,EACd,eAAe,EACf,eAAe,EAChB,GAAG,CAAA,GAAA,0IAAA,CAAA,oBAAiB,AAAD;IAEpB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAErD,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,WAAW,aAAa;gBAC1B,kBAAkB;YACpB;QACF;gCAAG;QAAC;KAAO;IAEX,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GA/BgB;;QAYV,0IAAA,CAAA,oBAAiB","debugId":null}},
    {"offset": {"line": 3952, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/document.tsx"],"sourcesContent":["import { memo } from \"react\";\nimport { toast } from \"sonner\";\nimport { useArtifact } from \"@/hooks/use-artifact\";\nimport type { ArtifactKind } from \"./artifact\";\nimport { FileIcon, LoaderIcon, MessageIcon, PencilEditIcon } from \"./icons\";\n\nconst getActionText = (\n  type: \"create\" | \"update\" | \"request-suggestions\",\n  tense: \"present\" | \"past\"\n) => {\n  switch (type) {\n    case \"create\":\n      return tense === \"present\" ? \"Creating\" : \"Created\";\n    case \"update\":\n      return tense === \"present\" ? \"Updating\" : \"Updated\";\n    case \"request-suggestions\":\n      return tense === \"present\"\n        ? \"Adding suggestions\"\n        : \"Added suggestions to\";\n    default:\n      return null;\n  }\n};\n\ntype DocumentToolResultProps = {\n  type: \"create\" | \"update\" | \"request-suggestions\";\n  result: { id: string; title: string; kind: ArtifactKind };\n  isReadonly: boolean;\n};\n\nfunction PureDocumentToolResult({\n  type,\n  result,\n  isReadonly,\n}: DocumentToolResultProps) {\n  const { setArtifact } = useArtifact();\n\n  return (\n    <button\n      className=\"flex w-fit cursor-pointer flex-row items-start gap-3 rounded-xl border bg-background px-3 py-2\"\n      onClick={(event) => {\n        if (isReadonly) {\n          toast.error(\n            \"Viewing files in shared chats is currently not supported.\"\n          );\n          return;\n        }\n\n        const rect = event.currentTarget.getBoundingClientRect();\n\n        const boundingBox = {\n          top: rect.top,\n          left: rect.left,\n          width: rect.width,\n          height: rect.height,\n        };\n\n        setArtifact({\n          documentId: result.id,\n          kind: result.kind,\n          content: \"\",\n          title: result.title,\n          isVisible: true,\n          status: \"idle\",\n          boundingBox,\n        });\n      }}\n      type=\"button\"\n    >\n      <div className=\"mt-1 text-muted-foreground\">\n        {type === \"create\" ? (\n          <FileIcon />\n        ) : type === \"update\" ? (\n          <PencilEditIcon />\n        ) : type === \"request-suggestions\" ? (\n          <MessageIcon />\n        ) : null}\n      </div>\n      <div className=\"text-left\">\n        {`${getActionText(type, \"past\")} \"${result.title}\"`}\n      </div>\n    </button>\n  );\n}\n\nexport const DocumentToolResult = memo(PureDocumentToolResult, () => true);\n\ntype DocumentToolCallProps = {\n  type: \"create\" | \"update\" | \"request-suggestions\";\n  args:\n    | { title: string; kind: ArtifactKind } // for create\n    | { id: string; description: string } // for update\n    | { documentId: string }; // for request-suggestions\n  isReadonly: boolean;\n};\n\nfunction PureDocumentToolCall({\n  type,\n  args,\n  isReadonly,\n}: DocumentToolCallProps) {\n  const { setArtifact } = useArtifact();\n\n  return (\n    <button\n      className=\"cursor pointer flex w-fit flex-row items-start justify-between gap-3 rounded-xl border px-3 py-2\"\n      onClick={(event) => {\n        if (isReadonly) {\n          toast.error(\n            \"Viewing files in shared chats is currently not supported.\"\n          );\n          return;\n        }\n\n        const rect = event.currentTarget.getBoundingClientRect();\n\n        const boundingBox = {\n          top: rect.top,\n          left: rect.left,\n          width: rect.width,\n          height: rect.height,\n        };\n\n        setArtifact((currentArtifact) => ({\n          ...currentArtifact,\n          isVisible: true,\n          boundingBox,\n        }));\n      }}\n      type=\"button\"\n    >\n      <div className=\"flex flex-row items-start gap-3\">\n        <div className=\"mt-1 text-zinc-500\">\n          {type === \"create\" ? (\n            <FileIcon />\n          ) : type === \"update\" ? (\n            <PencilEditIcon />\n          ) : type === \"request-suggestions\" ? (\n            <MessageIcon />\n          ) : null}\n        </div>\n\n        <div className=\"text-left\">\n          {`${getActionText(type, \"present\")} ${\n            type === \"create\" && \"title\" in args && args.title\n              ? `\"${args.title}\"`\n              : type === \"update\" && \"description\" in args\n                ? `\"${args.description}\"`\n                : type === \"request-suggestions\"\n                  ? \"for document\"\n                  : \"\"\n          }`}\n        </div>\n      </div>\n\n      <div className=\"mt-1 animate-spin\">{<LoaderIcon />}</div>\n    </button>\n  );\n}\n\nexport const DocumentToolCall = memo(PureDocumentToolCall, () => true);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4154, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/document-preview.tsx"],"sourcesContent":["\"use client\";\n\nimport equal from \"fast-deep-equal\";\nimport {\n  type MouseEvent,\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport useSWR from \"swr\";\nimport { useArtifact } from \"@/hooks/use-artifact\";\nimport type { Document } from \"@/lib/db/schema\";\nimport { cn, fetcher } from \"@/lib/utils\";\nimport type { ArtifactKind, UIArtifact } from \"./artifact\";\nimport { CodeEditor } from \"./code-editor\";\nimport { DocumentToolCall, DocumentToolResult } from \"./document\";\nimport { InlineDocumentSkeleton } from \"./document-skeleton\";\nimport { FileIcon, FullscreenIcon, ImageIcon, LoaderIcon } from \"./icons\";\nimport { ImageEditor } from \"./image-editor\";\nimport { SpreadsheetEditor } from \"./sheet-editor\";\nimport { Editor } from \"./text-editor\";\n\ntype DocumentPreviewProps = {\n  isReadonly: boolean;\n  result?: any;\n  args?: any;\n};\n\nexport function DocumentPreview({\n  isReadonly,\n  result,\n  args,\n}: DocumentPreviewProps) {\n  const { artifact, setArtifact } = useArtifact();\n\n  const { data: documents, isLoading: isDocumentsFetching } = useSWR<\n    Document[]\n  >(result ? `/api/document?id=${result.id}` : null, fetcher);\n\n  const previewDocument = useMemo(() => documents?.[0], [documents]);\n  const hitboxRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const boundingBox = hitboxRef.current?.getBoundingClientRect();\n\n    if (artifact.documentId && boundingBox) {\n      setArtifact((currentArtifact) => ({\n        ...currentArtifact,\n        boundingBox: {\n          left: boundingBox.x,\n          top: boundingBox.y,\n          width: boundingBox.width,\n          height: boundingBox.height,\n        },\n      }));\n    }\n  }, [artifact.documentId, setArtifact]);\n\n  if (artifact.isVisible) {\n    if (result) {\n      return (\n        <DocumentToolResult\n          isReadonly={isReadonly}\n          result={{ id: result.id, title: result.title, kind: result.kind }}\n          type=\"create\"\n        />\n      );\n    }\n\n    if (args) {\n      return (\n        <DocumentToolCall\n          args={{ title: args.title, kind: args.kind }}\n          isReadonly={isReadonly}\n          type=\"create\"\n        />\n      );\n    }\n  }\n\n  if (isDocumentsFetching) {\n    return <LoadingSkeleton artifactKind={result.kind ?? args.kind} />;\n  }\n\n  const document: Document | null = previewDocument\n    ? previewDocument\n    : artifact.status === \"streaming\"\n      ? {\n          title: artifact.title,\n          kind: artifact.kind,\n          content: artifact.content,\n          id: artifact.documentId,\n          createdAt: new Date(),\n          userId: \"noop\",\n        }\n      : null;\n\n  if (!document) {\n    return <LoadingSkeleton artifactKind={artifact.kind} />;\n  }\n\n  return (\n    <div className=\"relative w-full cursor-pointer\">\n      <HitboxLayer\n        hitboxRef={hitboxRef}\n        result={result}\n        setArtifact={setArtifact}\n      />\n      <DocumentHeader\n        isStreaming={artifact.status === \"streaming\"}\n        kind={document.kind}\n        title={document.title}\n      />\n      <DocumentContent document={document} />\n    </div>\n  );\n}\n\nconst LoadingSkeleton = ({ artifactKind }: { artifactKind: ArtifactKind }) => (\n  <div className=\"w-full\">\n    <div className=\"flex h-[57px] flex-row items-center justify-between gap-2 rounded-t-2xl border border-b-0 p-4 dark:border-zinc-700 dark:bg-muted\">\n      <div className=\"flex flex-row items-center gap-3\">\n        <div className=\"text-muted-foreground\">\n          <div className=\"size-4 animate-pulse rounded-md bg-muted-foreground/20\" />\n        </div>\n        <div className=\"h-4 w-24 animate-pulse rounded-lg bg-muted-foreground/20\" />\n      </div>\n      <div>\n        <FullscreenIcon />\n      </div>\n    </div>\n    {artifactKind === \"image\" ? (\n      <div className=\"overflow-y-scroll rounded-b-2xl border border-t-0 bg-muted dark:border-zinc-700\">\n        <div className=\"h-[257px] w-full animate-pulse bg-muted-foreground/20\" />\n      </div>\n    ) : (\n      <div className=\"overflow-y-scroll rounded-b-2xl border border-t-0 bg-muted p-8 pt-4 dark:border-zinc-700\">\n        <InlineDocumentSkeleton />\n      </div>\n    )}\n  </div>\n);\n\nconst PureHitboxLayer = ({\n  hitboxRef,\n  result,\n  setArtifact,\n}: {\n  hitboxRef: React.RefObject<HTMLDivElement>;\n  result: any;\n  setArtifact: (\n    updaterFn: UIArtifact | ((currentArtifact: UIArtifact) => UIArtifact)\n  ) => void;\n}) => {\n  const handleClick = useCallback(\n    (event: MouseEvent<HTMLElement>) => {\n      const boundingBox = event.currentTarget.getBoundingClientRect();\n\n      setArtifact((artifact) =>\n        artifact.status === \"streaming\"\n          ? { ...artifact, isVisible: true }\n          : {\n              ...artifact,\n              title: result.title,\n              documentId: result.id,\n              kind: result.kind,\n              isVisible: true,\n              boundingBox: {\n                left: boundingBox.x,\n                top: boundingBox.y,\n                width: boundingBox.width,\n                height: boundingBox.height,\n              },\n            }\n      );\n    },\n    [setArtifact, result]\n  );\n\n  return (\n    <div\n      aria-hidden=\"true\"\n      className=\"absolute top-0 left-0 z-10 size-full rounded-xl\"\n      onClick={handleClick}\n      ref={hitboxRef}\n      role=\"presentation\"\n    >\n      <div className=\"flex w-full items-center justify-end p-4\">\n        <div className=\"absolute top-[13px] right-[9px] rounded-md p-2 hover:bg-zinc-100 dark:hover:bg-zinc-700\">\n          <FullscreenIcon />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst HitboxLayer = memo(PureHitboxLayer, (prevProps, nextProps) => {\n  if (!equal(prevProps.result, nextProps.result)) {\n    return false;\n  }\n  return true;\n});\n\nconst PureDocumentHeader = ({\n  title,\n  kind,\n  isStreaming,\n}: {\n  title: string;\n  kind: ArtifactKind;\n  isStreaming: boolean;\n}) => (\n  <div className=\"flex flex-row items-start justify-between gap-2 rounded-t-2xl border border-b-0 p-4 sm:items-center dark:border-zinc-700 dark:bg-muted\">\n    <div className=\"flex flex-row items-start gap-3 sm:items-center\">\n      <div className=\"text-muted-foreground\">\n        {isStreaming ? (\n          <div className=\"animate-spin\">\n            <LoaderIcon />\n          </div>\n        ) : kind === \"image\" ? (\n          <ImageIcon />\n        ) : (\n          <FileIcon />\n        )}\n      </div>\n      <div className=\"-translate-y-1 font-medium sm:translate-y-0\">{title}</div>\n    </div>\n    <div className=\"w-8\" />\n  </div>\n);\n\nconst DocumentHeader = memo(PureDocumentHeader, (prevProps, nextProps) => {\n  if (prevProps.title !== nextProps.title) {\n    return false;\n  }\n  if (prevProps.isStreaming !== nextProps.isStreaming) {\n    return false;\n  }\n\n  return true;\n});\n\nconst DocumentContent = ({ document }: { document: Document }) => {\n  const { artifact } = useArtifact();\n\n  const containerClassName = cn(\n    \"h-[257px] overflow-y-scroll rounded-b-2xl border border-t-0 dark:border-zinc-700 dark:bg-muted\",\n    {\n      \"p-4 sm:px-14 sm:py-16\": document.kind === \"text\",\n      \"p-0\": document.kind === \"code\",\n    }\n  );\n\n  const commonProps = {\n    content: document.content ?? \"\",\n    isCurrentVersion: true,\n    currentVersionIndex: 0,\n    status: artifact.status,\n    saveContent: () => null,\n    suggestions: [],\n  };\n\n  const handleSaveContent = () => null;\n\n  return (\n    <div className={containerClassName}>\n      {document.kind === \"text\" ? (\n        <Editor {...commonProps} onSaveContent={handleSaveContent} />\n      ) : document.kind === \"code\" ? (\n        <div className=\"relative flex w-full flex-1\">\n          <div className=\"absolute inset-0\">\n            <CodeEditor {...commonProps} onSaveContent={handleSaveContent} />\n          </div>\n        </div>\n      ) : document.kind === \"sheet\" ? (\n        <div className=\"relative flex size-full flex-1 p-4\">\n          <div className=\"absolute inset-0\">\n            <SpreadsheetEditor {...commonProps} />\n          </div>\n        </div>\n      ) : document.kind === \"image\" ? (\n        <ImageEditor\n          content={document.content ?? \"\"}\n          currentVersionIndex={0}\n          isCurrentVersion={true}\n          isInline={true}\n          status={artifact.status}\n          title={document.title}\n        />\n      ) : null}\n    </div>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4646, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\", className)}\n    {...props}\n  />\n))\nAvatar.displayName = \"Avatar\"\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = \"AvatarImage\"\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\"flex h-full w-full items-center justify-center rounded-full bg-muted\", className)}\n    {...props}\n  />\n))\nAvatarFallback.displayName = \"AvatarFallback\"\n\nexport { Avatar, AvatarImage, AvatarFallback }\nexport default Avatar \n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,uBAAS,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kaAAC,4XAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iEAAiE;QAC9E,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG;AAErB,MAAM,4BAAc,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kaAAC,4XAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,+BAAiB,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,QAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,kaAAC,4XAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,wEAAwE;QACrF,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG;;uCAGd","debugId":null}},
    {"offset": {"line": 4712, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/message.tsx"],"sourcesContent":["import type { UIMessage } from \"ai\";\nimport type { ComponentProps, HTMLAttributes } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { cn } from \"@/lib/utils\";\n\nexport type MessageProps = HTMLAttributes<HTMLDivElement> & {\n  from: UIMessage[\"role\"];\n};\n\nexport const Message = ({ className, from, ...props }: MessageProps) => (\n  <div\n    className={cn(\n      \"group flex w-full items-end justify-end gap-2 py-4\",\n      from === \"user\" ? \"is-user\" : \"is-assistant flex-row-reverse justify-end\",\n      \"[&>div]:max-w-[80%]\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type MessageContentProps = HTMLAttributes<HTMLDivElement>;\n\nexport const MessageContent = ({\n  children,\n  className,\n  ...props\n}: MessageContentProps) => (\n  <div\n    className={cn(\n      \"flex flex-col gap-2 overflow-hidden rounded-lg px-4 py-3 text-foreground text-sm\",\n      \"group-[.is-user]:bg-primary group-[.is-user]:text-primary-foreground\",\n      \"group-[.is-assistant]:bg-secondary group-[.is-assistant]:text-foreground\",\n      \"is-user:dark\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n  </div>\n);\n\nexport type MessageAvatarProps = ComponentProps<typeof Avatar> & {\n  src: string;\n  name?: string;\n};\n\nexport const MessageAvatar = ({\n  src,\n  name,\n  className,\n  ...props\n}: MessageAvatarProps) => (\n  <Avatar className={cn(\"size-8 ring-1 ring-border\", className)} {...props}>\n    <AvatarImage alt=\"\" className=\"my-0\" src={src} />\n    <AvatarFallback>{name?.slice(0, 2) || \"ME\"}</AvatarFallback>\n  </Avatar>\n);\n"],"names":[],"mappings":";;;;;;AAEA;AACA;;;;AAMO,MAAM,UAAU,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAqB,iBACjE,kaAAC;QACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,sDACA,SAAS,SAAS,YAAY,6CAC9B,uBACA;QAED,GAAG,KAAK;;;;;;KARA;AAcN,MAAM,iBAAiB,CAAC,EAC7B,QAAQ,EACR,SAAS,EACT,GAAG,OACiB,iBACpB,kaAAC;QACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,oFACA,wEACA,4EACA,gBACA;QAED,GAAG,KAAK;kBAER;;;;;;MAfQ;AAwBN,MAAM,gBAAgB,CAAC,EAC5B,GAAG,EACH,IAAI,EACJ,SAAS,EACT,GAAG,OACgB,iBACnB,kaAAC,8HAAA,CAAA,SAAM;QAAC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B;QAAa,GAAG,KAAK;;0BACtE,kaAAC,8HAAA,CAAA,cAAW;gBAAC,KAAI;gBAAG,WAAU;gBAAO,KAAK;;;;;;0BAC1C,kaAAC,8HAAA,CAAA,iBAAc;0BAAE,MAAM,MAAM,GAAG,MAAM;;;;;;;;;;;;MAR7B","debugId":null}},
    {"offset": {"line": 4782, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/badge.tsx"],"sourcesContent":["\"use client\"\nimport * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMA,MAAM,gBAAgB,CAAA,GAAA,8OAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,kaAAC;QAAI,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 4831, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport { Collapsible as CollapsiblePrimitive } from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;AAIA,MAAM,cAAc,2XAAA,CAAA,cAAoB,CAAC,IAAI;AAE7C,MAAM,qBAAqB,2XAAA,CAAA,cAAoB,CAAC,kBAAkB;AAElE,MAAM,qBAAqB,2XAAA,CAAA,cAAoB,CAAC,kBAAkB","debugId":null}},
    {"offset": {"line": 4852, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/code-block.tsx"],"sourcesContent":["\"use client\";\n\nimport { CheckIcon, CopyIcon } from \"lucide-react\";\nimport type { ComponentProps, HTMLAttributes, ReactNode } from \"react\";\nimport { createContext, useContext, useState } from \"react\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport {\n  oneDark,\n  oneLight,\n} from \"react-syntax-highlighter/dist/esm/styles/prism\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ntype CodeBlockContextType = {\n  code: string;\n};\n\nconst CodeBlockContext = createContext<CodeBlockContextType>({\n  code: \"\",\n});\n\nexport type CodeBlockProps = HTMLAttributes<HTMLDivElement> & {\n  code: string;\n  language: string;\n  showLineNumbers?: boolean;\n  children?: ReactNode;\n};\n\nexport const CodeBlock = ({\n  code,\n  language,\n  showLineNumbers = false,\n  className,\n  children,\n  ...props\n}: CodeBlockProps) => (\n  <CodeBlockContext.Provider value={{ code }}>\n    <div\n      className={cn(\n        \"relative w-full overflow-hidden rounded-md border bg-background text-foreground\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"relative\">\n        <SyntaxHighlighter\n          className=\"overflow-hidden dark:hidden\"\n          codeTagProps={{\n            className: \"font-mono text-sm\",\n          }}\n          customStyle={{\n            margin: 0,\n            padding: \"1rem\",\n            fontSize: \"0.875rem\",\n            background: \"hsl(var(--background))\",\n            color: \"hsl(var(--foreground))\",\n            overflowX: \"auto\",\n            overflowWrap: \"break-word\",\n            wordBreak: \"break-all\",\n          }}\n          language={language}\n          lineNumberStyle={{\n            color: \"hsl(var(--muted-foreground))\",\n            paddingRight: \"1rem\",\n            minWidth: \"2.5rem\",\n          }}\n          showLineNumbers={showLineNumbers}\n          style={oneLight}\n        >\n          {code}\n        </SyntaxHighlighter>\n        <SyntaxHighlighter\n          className=\"hidden overflow-hidden dark:block\"\n          codeTagProps={{\n            className: \"font-mono text-sm\",\n          }}\n          customStyle={{\n            margin: 0,\n            padding: \"1rem\",\n            fontSize: \"0.875rem\",\n            background: \"hsl(var(--background))\",\n            color: \"hsl(var(--foreground))\",\n            overflowX: \"auto\",\n            overflowWrap: \"break-word\",\n            wordBreak: \"break-all\",\n          }}\n          language={language}\n          lineNumberStyle={{\n            color: \"hsl(var(--muted-foreground))\",\n            paddingRight: \"1rem\",\n            minWidth: \"2.5rem\",\n          }}\n          showLineNumbers={showLineNumbers}\n          style={oneDark}\n        >\n          {code}\n        </SyntaxHighlighter>\n        {children && (\n          <div className=\"absolute top-2 right-2 flex items-center gap-2\">\n            {children}\n          </div>\n        )}\n      </div>\n    </div>\n  </CodeBlockContext.Provider>\n);\n\nexport type CodeBlockCopyButtonProps = ComponentProps<typeof Button> & {\n  onCopy?: () => void;\n  onError?: (error: Error) => void;\n  timeout?: number;\n};\n\nexport const CodeBlockCopyButton = ({\n  onCopy,\n  onError,\n  timeout = 2000,\n  children,\n  className,\n  ...props\n}: CodeBlockCopyButtonProps) => {\n  const [isCopied, setIsCopied] = useState(false);\n  const { code } = useContext(CodeBlockContext);\n\n  const copyToClipboard = async () => {\n    if (typeof window === \"undefined\" || !navigator.clipboard.writeText) {\n      onError?.(new Error(\"Clipboard API not available\"));\n      return;\n    }\n\n    try {\n      await navigator.clipboard.writeText(code);\n      setIsCopied(true);\n      onCopy?.();\n      setTimeout(() => setIsCopied(false), timeout);\n    } catch (error) {\n      onError?.(error as Error);\n    }\n  };\n\n  const Icon = isCopied ? CheckIcon : CopyIcon;\n\n  return (\n    <Button\n      className={cn(\"shrink-0\", className)}\n      onClick={copyToClipboard}\n      size=\"icon\"\n      variant=\"ghost\"\n      {...props}\n    >\n      {children ?? <Icon size={14} />}\n    </Button>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAEA;AACA;AACA;AAAA;AAIA;AACA;;;AAXA;;;;;;;AAiBA,MAAM,iCAAmB,CAAA,GAAA,kYAAA,CAAA,gBAAa,AAAD,EAAwB;IAC3D,MAAM;AACR;AASO,MAAM,YAAY,CAAC,EACxB,IAAI,EACJ,QAAQ,EACR,kBAAkB,KAAK,EACvB,SAAS,EACT,QAAQ,EACR,GAAG,OACY,iBACf,kaAAC,iBAAiB,QAAQ;QAAC,OAAO;YAAE;QAAK;kBACvC,cAAA,kaAAC;YACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,mFACA;YAED,GAAG,KAAK;sBAET,cAAA,kaAAC;gBAAI,WAAU;;kCACb,kaAAC,6UAAA,CAAA,QAAiB;wBAChB,WAAU;wBACV,cAAc;4BACZ,WAAW;wBACb;wBACA,aAAa;4BACX,QAAQ;4BACR,SAAS;4BACT,UAAU;4BACV,YAAY;4BACZ,OAAO;4BACP,WAAW;4BACX,cAAc;4BACd,WAAW;wBACb;wBACA,UAAU;wBACV,iBAAiB;4BACf,OAAO;4BACP,cAAc;4BACd,UAAU;wBACZ;wBACA,iBAAiB;wBACjB,OAAO,0WAAA,CAAA,WAAQ;kCAEd;;;;;;kCAEH,kaAAC,6UAAA,CAAA,QAAiB;wBAChB,WAAU;wBACV,cAAc;4BACZ,WAAW;wBACb;wBACA,aAAa;4BACX,QAAQ;4BACR,SAAS;4BACT,UAAU;4BACV,YAAY;4BACZ,OAAO;4BACP,WAAW;4BACX,cAAc;4BACd,WAAW;wBACb;wBACA,UAAU;wBACV,iBAAiB;4BACf,OAAO;4BACP,cAAc;4BACd,UAAU;wBACZ;wBACA,iBAAiB;wBACjB,OAAO,wWAAA,CAAA,UAAO;kCAEb;;;;;;oBAEF,0BACC,kaAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;;;;;;;;;;;KAvEA;AAqFN,MAAM,sBAAsB,CAAC,EAClC,MAAM,EACN,OAAO,EACP,UAAU,IAAI,EACd,QAAQ,EACR,SAAS,EACT,GAAG,OACsB;;IACzB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,kYAAA,CAAA,aAAU,AAAD,EAAE;IAE5B,MAAM,kBAAkB;QACtB,IAAI,aAAkB,eAAe,CAAC,UAAU,SAAS,CAAC,SAAS,EAAE;YACnE,UAAU,IAAI,MAAM;YACpB;QACF;QAEA,IAAI;YACF,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;YACpC,YAAY;YACZ;YACA,WAAW,IAAM,YAAY,QAAQ;QACvC,EAAE,OAAO,OAAO;YACd,UAAU;QACZ;IACF;IAEA,MAAM,OAAO,WAAW,6TAAA,CAAA,YAAS,GAAG,2TAAA,CAAA,WAAQ;IAE5C,qBACE,kaAAC,8HAAA,CAAA,SAAM;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAC1B,SAAS;QACT,MAAK;QACL,SAAQ;QACP,GAAG,KAAK;kBAER,0BAAY,kaAAC;YAAK,MAAM;;;;;;;;;;;AAG/B;GAxCa;MAAA","debugId":null}},
    {"offset": {"line": 5022, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/tool.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ToolUIPart } from \"ai\";\nimport {\n  CheckCircleIcon,\n  ChevronDownIcon,\n  CircleIcon,\n  ClockIcon,\n  WrenchIcon,\n  XCircleIcon,\n} from \"lucide-react\";\nimport type { ComponentProps, ReactNode } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { cn } from \"@/lib/utils\";\nimport { CodeBlock } from \"./code-block\";\n\nexport type ToolProps = ComponentProps<typeof Collapsible>;\n\nexport const Tool = ({ className, ...props }: ToolProps) => (\n  <Collapsible\n    className={cn(\"not-prose mb-4 w-full rounded-md border\", className)}\n    {...props}\n  />\n);\n\nexport type ToolHeaderProps = {\n  type: ToolUIPart[\"type\"];\n  state: ToolUIPart[\"state\"];\n  className?: string;\n};\n\nconst getStatusBadge = (status: ToolUIPart[\"state\"]) => {\n  const labels = {\n    \"input-streaming\": \"Pending\",\n    \"input-available\": \"Running\",\n    \"output-available\": \"Completed\",\n    \"output-error\": \"Error\",\n  } as const;\n\n  const icons = {\n    \"input-streaming\": <CircleIcon className=\"size-4\" />,\n    \"input-available\": <ClockIcon className=\"size-4 animate-pulse\" />,\n    \"output-available\": <CheckCircleIcon className=\"size-4 text-green-600\" />,\n    \"output-error\": <XCircleIcon className=\"size-4 text-red-600\" />,\n  } as const;\n\n  return (\n    <Badge\n      className=\"flex items-center gap-1 rounded-full text-xs\"\n      variant=\"secondary\"\n    >\n      {icons[status]}\n      <span>{labels[status]}</span>\n    </Badge>\n  );\n};\n\nexport const ToolHeader = ({\n  className,\n  type,\n  state,\n  ...props\n}: ToolHeaderProps) => (\n  <CollapsibleTrigger\n    className={cn(\n      \"flex w-full min-w-0 items-center justify-between gap-2 p-3\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"flex min-w-0 flex-1 items-center gap-2\">\n      <WrenchIcon className=\"size-4 shrink-0 text-muted-foreground\" />\n      <span className=\"truncate font-medium text-sm\">{type}</span>\n    </div>\n    <div className=\"flex shrink-0 items-center gap-2\">\n      {getStatusBadge(state)}\n      <ChevronDownIcon className=\"size-4 text-muted-foreground transition-transform group-data-[state=open]:rotate-180\" />\n    </div>\n  </CollapsibleTrigger>\n);\n\nexport type ToolContentProps = ComponentProps<typeof CollapsibleContent>;\n\nexport const ToolContent = ({ className, ...props }: ToolContentProps) => (\n  <CollapsibleContent\n    className={cn(\n      \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 text-popover-foreground outline-hidden data-[state=closed]:animate-out data-[state=open]:animate-in\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type ToolInputProps = ComponentProps<\"div\"> & {\n  input: ToolUIPart[\"input\"];\n};\n\nexport const ToolInput = ({ className, input, ...props }: ToolInputProps) => (\n  <div className={cn(\"space-y-2 overflow-hidden p-4\", className)} {...props}>\n    <h4 className=\"font-medium text-muted-foreground text-xs uppercase tracking-wide\">\n      Parameters\n    </h4>\n    <div className=\"rounded-md bg-muted/50\">\n      <CodeBlock code={JSON.stringify(input, null, 2)} language=\"json\" />\n    </div>\n  </div>\n);\n\nexport type ToolOutputProps = ComponentProps<\"div\"> & {\n  output: ReactNode;\n  errorText: ToolUIPart[\"errorText\"];\n};\n\nexport const ToolOutput = ({\n  className,\n  output,\n  errorText,\n  ...props\n}: ToolOutputProps) => {\n  if (!(output || errorText)) {\n    return null;\n  }\n\n  return (\n    <div className={cn(\"space-y-2 p-4\", className)} {...props}>\n      <h4 className=\"font-medium text-muted-foreground text-xs uppercase tracking-wide\">\n        {errorText ? \"Error\" : \"Result\"}\n      </h4>\n      <div\n        className={cn(\n          \"overflow-x-auto rounded-md text-xs [&_table]:w-full\",\n          errorText\n            ? \"bg-destructive/10 text-destructive\"\n            : \"bg-muted/50 text-foreground\"\n        )}\n      >\n        {errorText && <div>{errorText}</div>}\n        {output && <div>{output}</div>}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAKA;AACA;AAnBA;;;;;;;AAuBO,MAAM,OAAO,CAAC,EAAE,SAAS,EAAE,GAAG,OAAkB,iBACrD,kaAAC,mIAAA,CAAA,cAAW;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;KAHA;AAab,MAAM,iBAAiB,CAAC;IACtB,MAAM,SAAS;QACb,mBAAmB;QACnB,mBAAmB;QACnB,oBAAoB;QACpB,gBAAgB;IAClB;IAEA,MAAM,QAAQ;QACZ,iCAAmB,kaAAC,+TAAA,CAAA,aAAU;YAAC,WAAU;;;;;;QACzC,iCAAmB,kaAAC,6TAAA,CAAA,YAAS;YAAC,WAAU;;;;;;QACxC,kCAAoB,kaAAC,oVAAA,CAAA,kBAAe;YAAC,WAAU;;;;;;QAC/C,8BAAgB,kaAAC,qUAAA,CAAA,cAAW;YAAC,WAAU;;;;;;IACzC;IAEA,qBACE,kaAAC,6HAAA,CAAA,QAAK;QACJ,WAAU;QACV,SAAQ;;YAEP,KAAK,CAAC,OAAO;0BACd,kaAAC;0BAAM,MAAM,CAAC,OAAO;;;;;;;;;;;;AAG3B;AAEO,MAAM,aAAa,CAAC,EACzB,SAAS,EACT,IAAI,EACJ,KAAK,EACL,GAAG,OACa,iBAChB,kaAAC,mIAAA,CAAA,qBAAkB;QACjB,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,8DACA;QAED,GAAG,KAAK;;0BAET,kaAAC;gBAAI,WAAU;;kCACb,kaAAC,+TAAA,CAAA,aAAU;wBAAC,WAAU;;;;;;kCACtB,kaAAC;wBAAK,WAAU;kCAAgC;;;;;;;;;;;;0BAElD,kaAAC;gBAAI,WAAU;;oBACZ,eAAe;kCAChB,kaAAC,6UAAA,CAAA,kBAAe;wBAAC,WAAU;;;;;;;;;;;;;;;;;;MAnBpB;AA0BN,MAAM,cAAc,CAAC,EAAE,SAAS,EAAE,GAAG,OAAyB,iBACnE,kaAAC,mIAAA,CAAA,qBAAkB;QACjB,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,mNACA;QAED,GAAG,KAAK;;;;;;MANA;AAcN,MAAM,YAAY,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAuB,iBACtE,kaAAC;QAAI,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAAa,GAAG,KAAK;;0BACvE,kaAAC;gBAAG,WAAU;0BAAoE;;;;;;0BAGlF,kaAAC;gBAAI,WAAU;0BACb,cAAA,kaAAC,2IAAA,CAAA,YAAS;oBAAC,MAAM,KAAK,SAAS,CAAC,OAAO,MAAM;oBAAI,UAAS;;;;;;;;;;;;;;;;;MANnD;AAgBN,MAAM,aAAa,CAAC,EACzB,SAAS,EACT,MAAM,EACN,SAAS,EACT,GAAG,OACa;IAChB,IAAI,CAAC,CAAC,UAAU,SAAS,GAAG;QAC1B,OAAO;IACT;IAEA,qBACE,kaAAC;QAAI,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAAa,GAAG,KAAK;;0BACvD,kaAAC;gBAAG,WAAU;0BACX,YAAY,UAAU;;;;;;0BAEzB,kaAAC;gBACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,uDACA,YACI,uCACA;;oBAGL,2BAAa,kaAAC;kCAAK;;;;;;oBACnB,wBAAU,kaAAC;kCAAK;;;;;;;;;;;;;;;;;;AAIzB;MA5Ba","debugId":null}},
    {"offset": {"line": 5269, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/actions.tsx"],"sourcesContent":["\"use client\";\n\nimport { TooltipProvider } from \"@/components/ui/tooltip\"\nimport type { ComponentProps } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\nexport type ActionsProps = ComponentProps<\"div\">;\n\nexport const Actions = ({ className, children, ...props }: ActionsProps) => (\n  <div className={cn(\"flex items-center gap-1\", className)} {...props}>\n    {children}\n  </div>\n);\n\nexport type ActionProps = ComponentProps<typeof Button> & {\n  tooltip?: string;\n  label?: string;\n};\n\nexport const Action = ({\n  tooltip,\n  children,\n  label,\n  className,\n  variant = \"ghost\",\n  size = \"sm\",\n  ...props\n}: ActionProps) => {\n  const button = (\n    <Button\n      className={cn(\n        \"relative size-9 p-1.5 text-muted-foreground hover:text-foreground\",\n        className\n      )}\n      size={size}\n      type=\"button\"\n      variant={variant}\n      {...props}\n    >\n      {children}\n      <span className=\"sr-only\">{label || tooltip}</span>\n    </Button>\n  );\n\n  if (tooltip) {\n    return (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>{button}</TooltipTrigger>\n          <TooltipContent>\n            <p>{tooltip}</p>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    );\n  }\n\n  return button;\n};\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAMA;AAVA;;;;;;AAcO,MAAM,UAAU,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAqB,iBACrE,kaAAC;QAAI,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;QAAa,GAAG,KAAK;kBAChE;;;;;;KAFQ;AAWN,MAAM,SAAS,CAAC,EACrB,OAAO,EACP,QAAQ,EACR,KAAK,EACL,SAAS,EACT,UAAU,OAAO,EACjB,OAAO,IAAI,EACX,GAAG,OACS;IACZ,MAAM,uBACJ,kaAAC,8HAAA,CAAA,SAAM;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,qEACA;QAEF,MAAM;QACN,MAAK;QACL,SAAS;QACR,GAAG,KAAK;;YAER;0BACD,kaAAC;gBAAK,WAAU;0BAAW,SAAS;;;;;;;;;;;;IAIxC,IAAI,SAAS;QACX,qBACE,kaAAC,+HAAA,CAAA,kBAAe;sBACd,cAAA,kaAAC,+HAAA,CAAA,UAAO;;kCACN,kaAAC,+HAAA,CAAA,iBAAc;wBAAC,OAAO;kCAAE;;;;;;kCACzB,kaAAC,+HAAA,CAAA,iBAAc;kCACb,cAAA,kaAAC;sCAAG;;;;;;;;;;;;;;;;;;;;;;IAKd;IAEA,OAAO;AACT;MAvCa","debugId":null}},
    {"offset": {"line": 5368, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/message-actions.tsx"],"sourcesContent":["import equal from \"fast-deep-equal\";\nimport { memo } from \"react\";\nimport { toast } from \"sonner\";\nimport { useSWRConfig } from \"swr\";\nimport { useCopyToClipboard } from \"usehooks-ts\";\nimport type { Vote } from \"@/lib/db/schema\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { Action, Actions } from \"./elements/actions\";\nimport { CopyIcon, PencilEditIcon, ThumbDownIcon, ThumbUpIcon } from \"./icons\";\n\nexport function PureMessageActions({\n  chatId,\n  message,\n  vote,\n  isLoading,\n  setMode,\n}: {\n  chatId: string;\n  message: ChatMessage;\n  vote: Vote | undefined;\n  isLoading: boolean;\n  setMode?: (mode: \"view\" | \"edit\") => void;\n}) {\n  const { mutate } = useSWRConfig();\n  const [_, copyToClipboard] = useCopyToClipboard();\n\n  if (isLoading) {\n    return null;\n  }\n\n  const textFromParts = message.parts\n    ?.filter((part) => part.type === \"text\")\n    .map((part) => part.text)\n    .join(\"\\n\")\n    .trim();\n\n  const handleCopy = async () => {\n    if (!textFromParts) {\n      toast.error(\"There's no text to copy!\");\n      return;\n    }\n\n    await copyToClipboard(textFromParts);\n    toast.success(\"Copied to clipboard!\");\n  };\n\n  // User messages get edit (on hover) and copy actions\n  if (message.role === \"user\") {\n    return (\n      <Actions className=\"-mr-0.5 justify-end\">\n        <div className=\"relative\">\n          {setMode && (\n            <Action\n              className=\"-left-10 absolute top-0 opacity-0 transition-opacity group-hover/message:opacity-100\"\n              onClick={() => setMode(\"edit\")}\n              tooltip=\"Edit\"\n            >\n              <PencilEditIcon />\n            </Action>\n          )}\n          <Action onClick={handleCopy} tooltip=\"Copy\">\n            <CopyIcon />\n          </Action>\n        </div>\n      </Actions>\n    );\n  }\n\n  return (\n    <Actions className=\"-ml-0.5\">\n      <Action onClick={handleCopy} tooltip=\"Copy\">\n        <CopyIcon />\n      </Action>\n\n      <Action\n        data-testid=\"message-upvote\"\n        disabled={vote?.isUpvoted}\n        onClick={() => {\n          const upvote = fetch(\"/api/vote\", {\n            method: \"PATCH\",\n            body: JSON.stringify({\n              chatId,\n              messageId: message.id,\n              type: \"up\",\n            }),\n          });\n\n          toast.promise(upvote, {\n            loading: \"Upvoting Response...\",\n            success: () => {\n              mutate<Vote[]>(\n                `/api/vote?chatId=${chatId}`,\n                (currentVotes) => {\n                  if (!currentVotes) {\n                    return [];\n                  }\n\n                  const votesWithoutCurrent = currentVotes.filter(\n                    (currentVote) => currentVote.messageId !== message.id\n                  );\n\n                  return [\n                    ...votesWithoutCurrent,\n                    {\n                      chatId,\n                      messageId: message.id,\n                      isUpvoted: true,\n                    },\n                  ];\n                },\n                { revalidate: false }\n              );\n\n              return \"Upvoted Response!\";\n            },\n            error: \"Failed to upvote response.\",\n          });\n        }}\n        tooltip=\"Upvote Response\"\n      >\n        <ThumbUpIcon />\n      </Action>\n\n      <Action\n        data-testid=\"message-downvote\"\n        disabled={vote && !vote.isUpvoted}\n        onClick={() => {\n          const downvote = fetch(\"/api/vote\", {\n            method: \"PATCH\",\n            body: JSON.stringify({\n              chatId,\n              messageId: message.id,\n              type: \"down\",\n            }),\n          });\n\n          toast.promise(downvote, {\n            loading: \"Downvoting Response...\",\n            success: () => {\n              mutate<Vote[]>(\n                `/api/vote?chatId=${chatId}`,\n                (currentVotes) => {\n                  if (!currentVotes) {\n                    return [];\n                  }\n\n                  const votesWithoutCurrent = currentVotes.filter(\n                    (currentVote) => currentVote.messageId !== message.id\n                  );\n\n                  return [\n                    ...votesWithoutCurrent,\n                    {\n                      chatId,\n                      messageId: message.id,\n                      isUpvoted: false,\n                    },\n                  ];\n                },\n                { revalidate: false }\n              );\n\n              return \"Downvoted Response!\";\n            },\n            error: \"Failed to downvote response.\",\n          });\n        }}\n        tooltip=\"Downvote Response\"\n      >\n        <ThumbDownIcon />\n      </Action>\n    </Actions>\n  );\n}\n\nexport const MessageActions = memo(\n  PureMessageActions,\n  (prevProps, nextProps) => {\n    if (!equal(prevProps.vote, nextProps.vote)) {\n      return false;\n    }\n    if (prevProps.isLoading !== nextProps.isLoading) {\n      return false;\n    }\n\n    return true;\n  }\n);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5597, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/app/%28chat%29/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { generateText, type UIMessage } from \"ai\";\nimport { cookies } from \"next/headers\";\nimport type { VisibilityType } from \"@/components/visibility-selector\";\nimport { myProvider } from \"@/lib/ai/providers\";\nimport {\n  deleteMessagesByChatIdAfterTimestamp,\n  getMessageById,\n  updateChatVisiblityById,\n} from \"@/lib/db/queries\";\n\nexport async function saveChatModelAsCookie(model: string) {\n  const cookieStore = await cookies();\n  cookieStore.set(\"chat-model\", model);\n}\n\nexport async function generateTitleFromUserMessage({\n  message,\n}: {\n  message: UIMessage;\n}) {\n  const { text: title } = await generateText({\n    model: myProvider.languageModel(\"title-model\"),\n    system: `\\n\n    - you will generate a short title based on the first message a user begins a conversation with\n    - ensure it is not more than 80 characters long\n    - the title should be a summary of the user's message\n    - do not use quotes or colons`,\n    prompt: JSON.stringify(message),\n  });\n\n  return title;\n}\n\nexport async function deleteTrailingMessages({ id }: { id: string }) {\n  const [message] = await getMessageById({ id });\n\n  await deleteMessagesByChatIdAfterTimestamp({\n    chatId: message.chatId,\n    timestamp: message.createdAt,\n  });\n}\n\nexport async function updateChatVisibility({\n  chatId,\n  visibility,\n}: {\n  chatId: string;\n  visibility: VisibilityType;\n}) {\n  await updateChatVisiblityById({ chatId, visibility });\n}\n"],"names":[],"mappings":";;;;;;IAmCsB,yBAAA,WAAA,GAAA,CAAA,GAAA,8aAAA,CAAA,wBAAA,EAAA,8CAAA,8aAAA,CAAA,aAAA,EAAA,KAAA,GAAA,8aAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 5613, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/textarea.tsx"],"sourcesContent":["\"use client\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AACA;AAEA;AAHA;;;;AAKA,MAAM,yBAAW,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,kaAAC;QACC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 5649, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/message-editor.tsx"],"sourcesContent":["\"use client\";\n\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport {\n  type Dispatch,\n  type SetStateAction,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { deleteTrailingMessages } from \"@/app/(chat)/actions\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { getTextFromMessage } from \"@/lib/utils\";\nimport { Button } from \"./ui/button\";\nimport { Textarea } from \"./ui/textarea\";\n\nexport type MessageEditorProps = {\n  message: ChatMessage;\n  setMode: Dispatch<SetStateAction<\"view\" | \"edit\">>;\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  regenerate: UseChatHelpers<ChatMessage>[\"regenerate\"];\n};\n\nexport function MessageEditor({\n  message,\n  setMode,\n  setMessages,\n  regenerate,\n}: MessageEditorProps) {\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\n\n  const [draftContent, setDraftContent] = useState<string>(\n    getTextFromMessage(message)\n  );\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const adjustHeight = useCallback(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"auto\";\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight + 2}px`;\n    }\n  }, []);\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      adjustHeight();\n    }\n  }, [adjustHeight]);\n\n  const handleInput = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setDraftContent(event.target.value);\n    adjustHeight();\n  };\n\n  return (\n    <div className=\"flex w-full flex-col gap-2\">\n      <Textarea\n        className=\"w-full resize-none overflow-hidden rounded-xl bg-transparent text-base! outline-hidden\"\n        data-testid=\"message-editor\"\n        onChange={handleInput}\n        ref={textareaRef}\n        value={draftContent}\n      />\n\n      <div className=\"flex flex-row justify-end gap-2\">\n        <Button\n          className=\"h-fit px-3 py-2\"\n          onClick={() => {\n            setMode(\"view\");\n          }}\n          variant=\"outline\"\n        >\n          Cancel\n        </Button>\n        <Button\n          className=\"h-fit px-3 py-2\"\n          data-testid=\"message-editor-send-button\"\n          disabled={isSubmitting}\n          onClick={async () => {\n            setIsSubmitting(true);\n\n            await deleteTrailingMessages({\n              id: message.id,\n            });\n\n            setMessages((messages) => {\n              const index = messages.findIndex((m) => m.id === message.id);\n\n              if (index !== -1) {\n                const updatedMessage: ChatMessage = {\n                  ...message,\n                  parts: [{ type: \"text\", text: draftContent }],\n                };\n\n                return [...messages.slice(0, index), updatedMessage];\n              }\n\n              return messages;\n            });\n\n            setMode(\"view\");\n            regenerate();\n          }}\n          variant=\"default\"\n        >\n          {isSubmitting ? \"Sending...\" : \"Send\"}\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAQA;AAEA;AACA;AACA;;;AAfA;;;;;;AAwBO,SAAS,cAAc,EAC5B,OAAO,EACP,OAAO,EACP,WAAW,EACX,UAAU,EACS;;IACnB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAW;IAE1D,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAC7C,CAAA,GAAA,+GAAA,CAAA,qBAAkB,AAAD,EAAE;IAErB,MAAM,cAAc,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAuB;IAEhD,MAAM,eAAe,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD;mDAAE;YAC/B,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;gBACnC,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,YAAY,OAAO,CAAC,YAAY,GAAG,EAAE,EAAE,CAAC;YAChF;QACF;kDAAG,EAAE;IAEL,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,YAAY,OAAO,EAAE;gBACvB;YACF;QACF;kCAAG;QAAC;KAAa;IAEjB,MAAM,cAAc,CAAC;QACnB,gBAAgB,MAAM,MAAM,CAAC,KAAK;QAClC;IACF;IAEA,qBACE,kaAAC;QAAI,WAAU;;0BACb,kaAAC,gIAAA,CAAA,WAAQ;gBACP,WAAU;gBACV,eAAY;gBACZ,UAAU;gBACV,KAAK;gBACL,OAAO;;;;;;0BAGT,kaAAC;gBAAI,WAAU;;kCACb,kaAAC,8HAAA,CAAA,SAAM;wBACL,WAAU;wBACV,SAAS;4BACP,QAAQ;wBACV;wBACA,SAAQ;kCACT;;;;;;kCAGD,kaAAC,8HAAA,CAAA,SAAM;wBACL,WAAU;wBACV,eAAY;wBACZ,UAAU;wBACV,SAAS;4BACP,gBAAgB;4BAEhB,MAAM,CAAA,GAAA,0JAAA,CAAA,yBAAsB,AAAD,EAAE;gCAC3B,IAAI,QAAQ,EAAE;4BAChB;4BAEA,YAAY,CAAC;gCACX,MAAM,QAAQ,SAAS,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,QAAQ,EAAE;gCAE3D,IAAI,UAAU,CAAC,GAAG;oCAChB,MAAM,iBAA8B;wCAClC,GAAG,OAAO;wCACV,OAAO;4CAAC;gDAAE,MAAM;gDAAQ,MAAM;4CAAa;yCAAE;oCAC/C;oCAEA,OAAO;2CAAI,SAAS,KAAK,CAAC,GAAG;wCAAQ;qCAAe;gCACtD;gCAEA,OAAO;4BACT;4BAEA,QAAQ;4BACR;wBACF;wBACA,SAAQ;kCAEP,eAAe,eAAe;;;;;;;;;;;;;;;;;;AAKzC;GAvFgB;KAAA","debugId":null}},
    {"offset": {"line": 5785, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/reasoning.tsx"],"sourcesContent":["\"use client\";\n\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { BrainIcon, ChevronDownIcon } from \"lucide-react\";\nimport type { ComponentProps } from \"react\";\nimport { createContext, memo, useContext, useEffect, useState } from \"react\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { cn } from \"@/lib/utils\";\nimport { Response } from \"./response\";\n\ntype ReasoningContextValue = {\n  isStreaming: boolean;\n  isOpen: boolean;\n  setIsOpen: (open: boolean) => void;\n  duration: number;\n};\n\nconst ReasoningContext = createContext<ReasoningContextValue | null>(null);\n\nconst useReasoning = () => {\n  const context = useContext(ReasoningContext);\n  if (!context) {\n    throw new Error(\"Reasoning components must be used within Reasoning\");\n  }\n  return context;\n};\n\nexport type ReasoningProps = ComponentProps<typeof Collapsible> & {\n  isStreaming?: boolean;\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  duration?: number;\n};\n\nconst AUTO_CLOSE_DELAY = 500;\nconst MS_IN_S = 1000;\n\nexport const Reasoning = memo(\n  ({\n    className,\n    isStreaming = false,\n    open,\n    defaultOpen = true,\n    onOpenChange,\n    duration: durationProp,\n    children,\n    ...props\n  }: ReasoningProps) => {\n    const [isOpen, setIsOpen] = useControllableState({\n      prop: open,\n      defaultProp: defaultOpen,\n      onChange: onOpenChange,\n    });\n    const [duration, setDuration] = useControllableState({\n      prop: durationProp,\n      defaultProp: 0,\n    });\n\n    const [hasAutoClosedRef, setHasAutoClosedRef] = useState(false);\n    const [startTime, setStartTime] = useState<number | null>(null);\n\n    // Track duration when streaming starts and ends\n    useEffect(() => {\n      if (isStreaming) {\n        if (startTime === null) {\n          setStartTime(Date.now());\n        }\n      } else if (startTime !== null) {\n        setDuration(Math.round((Date.now() - startTime) / MS_IN_S));\n        setStartTime(null);\n      }\n    }, [isStreaming, startTime, setDuration]);\n\n    // Auto-open when streaming starts, auto-close when streaming ends (once only)\n    useEffect(() => {\n      if (defaultOpen && !isStreaming && isOpen && !hasAutoClosedRef) {\n        // Add a small delay before closing to allow user to see the content\n        const timer = setTimeout(() => {\n          setIsOpen(false);\n          setHasAutoClosedRef(true);\n        }, AUTO_CLOSE_DELAY);\n\n        return () => clearTimeout(timer);\n      }\n    }, [isStreaming, isOpen, defaultOpen, setIsOpen, hasAutoClosedRef]);\n\n    const handleOpenChange = (newOpen: boolean) => {\n      setIsOpen(newOpen);\n    };\n\n    return (\n      <ReasoningContext.Provider\n        value={{ isStreaming, isOpen, setIsOpen, duration }}\n      >\n        <Collapsible\n          className={cn(\"not-prose\", className)}\n          onOpenChange={handleOpenChange}\n          open={isOpen}\n          {...props}\n        >\n          {children}\n        </Collapsible>\n      </ReasoningContext.Provider>\n    );\n  }\n);\n\nexport type ReasoningTriggerProps = ComponentProps<typeof CollapsibleTrigger>;\n\nexport const ReasoningTrigger = memo(\n  ({ className, children, ...props }: ReasoningTriggerProps) => {\n    const { isStreaming, isOpen, duration } = useReasoning();\n\n    return (\n      <CollapsibleTrigger\n        className={cn(\n          \"flex items-center gap-1.5 text-muted-foreground text-xs transition-colors hover:text-foreground\",\n          className\n        )}\n        {...props}\n      >\n        {children ?? (\n          <>\n            <BrainIcon className=\"size-4\" />\n            {isStreaming || duration === 0 ? (\n              <p>Thinking...</p>\n            ) : (\n              <p>Thought for {duration}s</p>\n            )}\n            <ChevronDownIcon\n              className={cn(\n                \"size-3 text-muted-foreground transition-transform\",\n                isOpen ? \"rotate-180\" : \"rotate-0\"\n              )}\n            />\n          </>\n        )}\n      </CollapsibleTrigger>\n    );\n  }\n);\n\nexport type ReasoningContentProps = ComponentProps<\n  typeof CollapsibleContent\n> & {\n  children: string;\n};\n\nexport const ReasoningContent = memo(\n  ({ className, children, ...props }: ReasoningContentProps) => (\n    <CollapsibleContent\n      className={cn(\n        \"mt-2 text-muted-foreground text-xs\",\n        \"data-[state=closed]:fade-out-0 data-[state=closed]:slide-out-to-top-2 data-[state=open]:slide-in-from-top-2 outline-hidden data-[state=closed]:animate-out data-[state=open]:animate-in\",\n        className\n      )}\n      {...props}\n    >\n      <Response className=\"grid gap-2\">{children}</Response>\n    </CollapsibleContent>\n  )\n);\n\nReasoning.displayName = \"Reasoning\";\nReasoningTrigger.displayName = \"ReasoningTrigger\";\nReasoningContent.displayName = \"ReasoningContent\";\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6002, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/message-reasoning.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  Reasoning,\n  ReasoningContent,\n  ReasoningTrigger,\n} from \"./elements/reasoning\";\n\ntype MessageReasoningProps = {\n  isLoading: boolean;\n  reasoning: string;\n};\n\nexport function MessageReasoning({\n  isLoading,\n  reasoning,\n}: MessageReasoningProps) {\n  const [hasBeenStreaming, setHasBeenStreaming] = useState(isLoading);\n\n  useEffect(() => {\n    if (isLoading) {\n      setHasBeenStreaming(true);\n    }\n  }, [isLoading]);\n\n  return (\n    <Reasoning\n      data-testid=\"message-reasoning\"\n      defaultOpen={hasBeenStreaming}\n      isStreaming={isLoading}\n    >\n      <ReasoningTrigger />\n      <ReasoningContent>{reasoning}</ReasoningContent>\n    </Reasoning>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAcO,SAAS,iBAAiB,EAC/B,SAAS,EACT,SAAS,EACa;;IACtB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAEzD,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;sCAAE;YACR,IAAI,WAAW;gBACb,oBAAoB;YACtB;QACF;qCAAG;QAAC;KAAU;IAEd,qBACE,kaAAC,uIAAA,CAAA,YAAS;QACR,eAAY;QACZ,aAAa;QACb,aAAa;;0BAEb,kaAAC,uIAAA,CAAA,mBAAgB;;;;;0BACjB,kaAAC,uIAAA,CAAA,mBAAgB;0BAAE;;;;;;;;;;;;AAGzB;GAtBgB;KAAA","debugId":null}},
    {"offset": {"line": 6062, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/preview-attachment.tsx"],"sourcesContent":["import Image from \"next/image\";\nimport type { Attachment } from \"@/lib/types\";\nimport { Loader } from \"./elements/loader\";\nimport { CrossSmallIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\nexport const PreviewAttachment = ({\n  attachment,\n  isUploading = false,\n  onRemove,\n}: {\n  attachment: Attachment;\n  isUploading?: boolean;\n  onRemove?: () => void;\n}) => {\n  const { name, url, contentType } = attachment;\n\n  return (\n    <div\n      className=\"group relative size-16 overflow-hidden rounded-lg border bg-muted\"\n      data-testid=\"input-attachment-preview\"\n    >\n      {contentType?.startsWith(\"image\") ? (\n        <Image\n          alt={name ?? \"An image attachment\"}\n          className=\"size-full object-cover\"\n          height={64}\n          src={url}\n          width={64}\n        />\n      ) : (\n        <div className=\"flex size-full items-center justify-center text-muted-foreground text-xs\">\n          File\n        </div>\n      )}\n\n      {isUploading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\n          <Loader size={16} />\n        </div>\n      )}\n\n      {onRemove && !isUploading && (\n        <Button\n          className=\"absolute top-0.5 right-0.5 size-4 rounded-full p-0 opacity-0 transition-opacity group-hover:opacity-100\"\n          onClick={onRemove}\n          size=\"sm\"\n          variant=\"destructive\"\n        >\n          <CrossSmallIcon size={8} />\n        </Button>\n      )}\n\n      <div className=\"absolute inset-x-0 bottom-0 truncate bg-linear-to-t from-black/80 to-transparent px-1 py-0.5 text-[10px] text-white\">\n        {name}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;;;;;;AAEO,MAAM,oBAAoB,CAAC,EAChC,UAAU,EACV,cAAc,KAAK,EACnB,QAAQ,EAKT;IACC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE,GAAG;IAEnC,qBACE,kaAAC;QACC,WAAU;QACV,eAAY;;YAEX,aAAa,WAAW,yBACvB,kaAAC,qVAAA,CAAA,UAAK;gBACJ,KAAK,QAAQ;gBACb,WAAU;gBACV,QAAQ;gBACR,KAAK;gBACL,OAAO;;;;;qCAGT,kaAAC;gBAAI,WAAU;0BAA2E;;;;;;YAK3F,6BACC,kaAAC;gBAAI,WAAU;0BACb,cAAA,kaAAC,oIAAA,CAAA,SAAM;oBAAC,MAAM;;;;;;;;;;;YAIjB,YAAY,CAAC,6BACZ,kaAAC,8HAAA,CAAA,SAAM;gBACL,WAAU;gBACV,SAAS;gBACT,MAAK;gBACL,SAAQ;0BAER,cAAA,kaAAC,uHAAA,CAAA,iBAAc;oBAAC,MAAM;;;;;;;;;;;0BAI1B,kaAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KApDa","debugId":null}},
    {"offset": {"line": 6157, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/weather.tsx"],"sourcesContent":["\"use client\";\n\nimport cx from \"classnames\";\nimport { format, isWithinInterval } from \"date-fns\";\nimport { useEffect, useState } from \"react\";\n\ntype WeatherAtLocation = {\n  latitude: number;\n  longitude: number;\n  generationtime_ms: number;\n  utc_offset_seconds: number;\n  timezone: string;\n  timezone_abbreviation: string;\n  elevation: number;\n  current_units: {\n    time: string;\n    interval: string;\n    temperature_2m: string;\n  };\n  current: {\n    time: string;\n    interval: number;\n    temperature_2m: number;\n  };\n  hourly_units: {\n    time: string;\n    temperature_2m: string;\n  };\n  hourly: {\n    time: string[];\n    temperature_2m: number[];\n  };\n  daily_units: {\n    time: string;\n    sunrise: string;\n    sunset: string;\n  };\n  daily: {\n    time: string[];\n    sunrise: string[];\n    sunset: string[];\n  };\n};\n\nconst SAMPLE = {\n  latitude: 37.763_283,\n  longitude: -122.412_86,\n  generationtime_ms: 0.027_894_973_754_882_812,\n  utc_offset_seconds: 0,\n  timezone: \"GMT\",\n  timezone_abbreviation: \"GMT\",\n  elevation: 18,\n  current_units: { time: \"iso8601\", interval: \"seconds\", temperature_2m: \"°C\" },\n  current: { time: \"2024-10-07T19:30\", interval: 900, temperature_2m: 29.3 },\n  hourly_units: { time: \"iso8601\", temperature_2m: \"°C\" },\n  hourly: {\n    time: [\n      \"2024-10-07T00:00\",\n      \"2024-10-07T01:00\",\n      \"2024-10-07T02:00\",\n      \"2024-10-07T03:00\",\n      \"2024-10-07T04:00\",\n      \"2024-10-07T05:00\",\n      \"2024-10-07T06:00\",\n      \"2024-10-07T07:00\",\n      \"2024-10-07T08:00\",\n      \"2024-10-07T09:00\",\n      \"2024-10-07T10:00\",\n      \"2024-10-07T11:00\",\n      \"2024-10-07T12:00\",\n      \"2024-10-07T13:00\",\n      \"2024-10-07T14:00\",\n      \"2024-10-07T15:00\",\n      \"2024-10-07T16:00\",\n      \"2024-10-07T17:00\",\n      \"2024-10-07T18:00\",\n      \"2024-10-07T19:00\",\n      \"2024-10-07T20:00\",\n      \"2024-10-07T21:00\",\n      \"2024-10-07T22:00\",\n      \"2024-10-07T23:00\",\n      \"2024-10-08T00:00\",\n      \"2024-10-08T01:00\",\n      \"2024-10-08T02:00\",\n      \"2024-10-08T03:00\",\n      \"2024-10-08T04:00\",\n      \"2024-10-08T05:00\",\n      \"2024-10-08T06:00\",\n      \"2024-10-08T07:00\",\n      \"2024-10-08T08:00\",\n      \"2024-10-08T09:00\",\n      \"2024-10-08T10:00\",\n      \"2024-10-08T11:00\",\n      \"2024-10-08T12:00\",\n      \"2024-10-08T13:00\",\n      \"2024-10-08T14:00\",\n      \"2024-10-08T15:00\",\n      \"2024-10-08T16:00\",\n      \"2024-10-08T17:00\",\n      \"2024-10-08T18:00\",\n      \"2024-10-08T19:00\",\n      \"2024-10-08T20:00\",\n      \"2024-10-08T21:00\",\n      \"2024-10-08T22:00\",\n      \"2024-10-08T23:00\",\n      \"2024-10-09T00:00\",\n      \"2024-10-09T01:00\",\n      \"2024-10-09T02:00\",\n      \"2024-10-09T03:00\",\n      \"2024-10-09T04:00\",\n      \"2024-10-09T05:00\",\n      \"2024-10-09T06:00\",\n      \"2024-10-09T07:00\",\n      \"2024-10-09T08:00\",\n      \"2024-10-09T09:00\",\n      \"2024-10-09T10:00\",\n      \"2024-10-09T11:00\",\n      \"2024-10-09T12:00\",\n      \"2024-10-09T13:00\",\n      \"2024-10-09T14:00\",\n      \"2024-10-09T15:00\",\n      \"2024-10-09T16:00\",\n      \"2024-10-09T17:00\",\n      \"2024-10-09T18:00\",\n      \"2024-10-09T19:00\",\n      \"2024-10-09T20:00\",\n      \"2024-10-09T21:00\",\n      \"2024-10-09T22:00\",\n      \"2024-10-09T23:00\",\n      \"2024-10-10T00:00\",\n      \"2024-10-10T01:00\",\n      \"2024-10-10T02:00\",\n      \"2024-10-10T03:00\",\n      \"2024-10-10T04:00\",\n      \"2024-10-10T05:00\",\n      \"2024-10-10T06:00\",\n      \"2024-10-10T07:00\",\n      \"2024-10-10T08:00\",\n      \"2024-10-10T09:00\",\n      \"2024-10-10T10:00\",\n      \"2024-10-10T11:00\",\n      \"2024-10-10T12:00\",\n      \"2024-10-10T13:00\",\n      \"2024-10-10T14:00\",\n      \"2024-10-10T15:00\",\n      \"2024-10-10T16:00\",\n      \"2024-10-10T17:00\",\n      \"2024-10-10T18:00\",\n      \"2024-10-10T19:00\",\n      \"2024-10-10T20:00\",\n      \"2024-10-10T21:00\",\n      \"2024-10-10T22:00\",\n      \"2024-10-10T23:00\",\n      \"2024-10-11T00:00\",\n      \"2024-10-11T01:00\",\n      \"2024-10-11T02:00\",\n      \"2024-10-11T03:00\",\n    ],\n    temperature_2m: [\n      36.6, 32.8, 29.5, 28.6, 29.2, 28.2, 27.5, 26.6, 26.5, 26, 25, 23.5, 23.9,\n      24.2, 22.9, 21, 24, 28.1, 31.4, 33.9, 32.1, 28.9, 26.9, 25.2, 23, 21.1,\n      19.6, 18.6, 17.7, 16.8, 16.2, 15.5, 14.9, 14.4, 14.2, 13.7, 13.3, 12.9,\n      12.5, 13.5, 15.8, 17.7, 19.6, 21, 21.9, 22.3, 22, 20.7, 18.9, 17.9, 17.3,\n      17, 16.7, 16.2, 15.6, 15.2, 15, 15, 15.1, 14.8, 14.8, 14.9, 14.7, 14.8,\n      15.3, 16.2, 17.9, 19.6, 20.5, 21.6, 21, 20.7, 19.3, 18.7, 18.4, 17.9,\n      17.3, 17, 17, 16.8, 16.4, 16.2, 16, 15.8, 15.7, 15.4, 15.4, 16.1, 16.7,\n      17, 18.6, 19, 19.5, 19.4, 18.5, 17.9, 17.5, 16.7, 16.3, 16.1,\n    ],\n  },\n  daily_units: {\n    time: \"iso8601\",\n    sunrise: \"iso8601\",\n    sunset: \"iso8601\",\n  },\n  daily: {\n    time: [\n      \"2024-10-07\",\n      \"2024-10-08\",\n      \"2024-10-09\",\n      \"2024-10-10\",\n      \"2024-10-11\",\n    ],\n    sunrise: [\n      \"2024-10-07T07:15\",\n      \"2024-10-08T07:16\",\n      \"2024-10-09T07:17\",\n      \"2024-10-10T07:18\",\n      \"2024-10-11T07:19\",\n    ],\n    sunset: [\n      \"2024-10-07T19:00\",\n      \"2024-10-08T18:58\",\n      \"2024-10-09T18:57\",\n      \"2024-10-10T18:55\",\n      \"2024-10-11T18:54\",\n    ],\n  },\n};\n\nfunction n(num: number): number {\n  return Math.ceil(num);\n}\n\nexport function Weather({\n  weatherAtLocation = SAMPLE,\n}: {\n  weatherAtLocation?: WeatherAtLocation;\n}) {\n  const currentHigh = Math.max(\n    ...weatherAtLocation.hourly.temperature_2m.slice(0, 24)\n  );\n  const currentLow = Math.min(\n    ...weatherAtLocation.hourly.temperature_2m.slice(0, 24)\n  );\n\n  const isDay = isWithinInterval(new Date(weatherAtLocation.current.time), {\n    start: new Date(weatherAtLocation.daily.sunrise[0]),\n    end: new Date(weatherAtLocation.daily.sunset[0]),\n  });\n\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  const hoursToShow = isMobile ? 5 : 6;\n\n  // Find the index of the current time or the next closest time\n  const currentTimeIndex = weatherAtLocation.hourly.time.findIndex(\n    (time) => new Date(time) >= new Date(weatherAtLocation.current.time)\n  );\n\n  // Slice the arrays to get the desired number of items\n  const displayTimes = weatherAtLocation.hourly.time.slice(\n    currentTimeIndex,\n    currentTimeIndex + hoursToShow\n  );\n  const displayTemperatures = weatherAtLocation.hourly.temperature_2m.slice(\n    currentTimeIndex,\n    currentTimeIndex + hoursToShow\n  );\n\n  return (\n    <div\n      className={cx(\n        \"skeleton-bg flex max-w-[500px] flex-col gap-4 rounded-2xl p-4\",\n        {\n          \"bg-blue-400\": isDay,\n        },\n        {\n          \"bg-indigo-900\": !isDay,\n        }\n      )}\n    >\n      <div className=\"flex flex-row items-center justify-between\">\n        <div className=\"flex flex-row items-center gap-2\">\n          <div\n            className={cx(\n              \"skeleton-div size-10 rounded-full\",\n              {\n                \"bg-yellow-300\": isDay,\n              },\n              {\n                \"bg-indigo-100\": !isDay,\n              }\n            )}\n          />\n          <div className=\"font-medium text-4xl text-blue-50\">\n            {n(weatherAtLocation.current.temperature_2m)}\n            {weatherAtLocation.current_units.temperature_2m}\n          </div>\n        </div>\n\n        <div className=\"text-blue-50\">{`H:${n(currentHigh)}° L:${n(currentLow)}°`}</div>\n      </div>\n\n      <div className=\"flex flex-row justify-between\">\n        {displayTimes.map((time, index) => (\n          <div className=\"flex flex-col items-center gap-1\" key={time}>\n            <div className=\"text-blue-100 text-xs\">\n              {format(new Date(time), \"ha\")}\n            </div>\n            <div\n              className={cx(\n                \"skeleton-div size-6 rounded-full\",\n                {\n                  \"bg-yellow-300\": isDay,\n                },\n                {\n                  \"bg-indigo-200\": !isDay,\n                }\n              )}\n            />\n            <div className=\"text-blue-50 text-sm\">\n              {n(displayTemperatures[index])}\n              {weatherAtLocation.hourly_units.temperature_2m}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;;;AAJA;;;;AA4CA,MAAM,SAAS;IACb,UAAU;IACV,WAAW,CAAC;IACZ,mBAAmB;IACnB,oBAAoB;IACpB,UAAU;IACV,uBAAuB;IACvB,WAAW;IACX,eAAe;QAAE,MAAM;QAAW,UAAU;QAAW,gBAAgB;IAAK;IAC5E,SAAS;QAAE,MAAM;QAAoB,UAAU;QAAK,gBAAgB;IAAK;IACzE,cAAc;QAAE,MAAM;QAAW,gBAAgB;IAAK;IACtD,QAAQ;QACN,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;YACd;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAI;YAAI;YAAM;YACpE;YAAM;YAAM;YAAI;YAAI;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAI;YAClE;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAClE;YAAM;YAAM;YAAM;YAAM;YAAM;YAAI;YAAM;YAAM;YAAI;YAAM;YAAM;YAAM;YACpE;YAAI;YAAM;YAAM;YAAM;YAAM;YAAI;YAAI;YAAM;YAAM;YAAM;YAAM;YAAM;YAClE;YAAM;YAAM;YAAM;YAAM;YAAM;YAAM;YAAI;YAAM;YAAM;YAAM;YAAM;YAChE;YAA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","debugId":null}},
    {"offset": {"line": 6581, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/message.tsx"],"sourcesContent":["\"use client\";\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport equal from \"fast-deep-equal\";\nimport { motion } from \"framer-motion\";\nimport { memo, useState } from \"react\";\nimport type { Vote } from \"@/lib/db/schema\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { cn, sanitizeText } from \"@/lib/utils\";\nimport { useDataStream } from \"./data-stream-provider\";\nimport { DocumentToolResult } from \"./document\";\nimport { DocumentPreview } from \"./document-preview\";\nimport { MessageContent } from \"./elements/message\";\nimport { Response } from \"./elements/response\";\nimport {\n  Tool,\n  ToolContent,\n  ToolHeader,\n  ToolInput,\n  ToolOutput,\n} from \"./elements/tool\";\nimport { SparklesIcon } from \"./icons\";\nimport { MessageActions } from \"./message-actions\";\nimport { MessageEditor } from \"./message-editor\";\nimport { MessageReasoning } from \"./message-reasoning\";\nimport { PreviewAttachment } from \"./preview-attachment\";\nimport { Weather } from \"./weather\";\n\nconst PurePreviewMessage = ({\n  chatId,\n  message,\n  vote,\n  isLoading,\n  setMessages,\n  regenerate,\n  isReadonly,\n  requiresScrollPadding,\n}: {\n  chatId: string;\n  message: ChatMessage;\n  vote: Vote | undefined;\n  isLoading: boolean;\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  regenerate: UseChatHelpers<ChatMessage>[\"regenerate\"];\n  isReadonly: boolean;\n  requiresScrollPadding: boolean;\n}) => {\n  const [mode, setMode] = useState<\"view\" | \"edit\">(\"view\");\n\n  const attachmentsFromMessage = message.parts.filter(\n    (part) => part.type === \"file\"\n  );\n\n  useDataStream();\n\n  return (\n    <motion.div\n      animate={{ opacity: 1 }}\n      className=\"group/message w-full\"\n      data-role={message.role}\n      data-testid={`message-${message.role}`}\n      initial={{ opacity: 0 }}\n    >\n      <div\n        className={cn(\"flex w-full items-start gap-2 md:gap-3\", {\n          \"justify-end\": message.role === \"user\" && mode !== \"edit\",\n          \"justify-start\": message.role === \"assistant\",\n        })}\n      >\n        {message.role === \"assistant\" && (\n          <div className=\"-mt-1 flex size-8 shrink-0 items-center justify-center rounded-full bg-background ring-1 ring-border\">\n            <SparklesIcon size={14} />\n          </div>\n        )}\n\n        <div\n          className={cn(\"flex flex-col\", {\n            \"gap-2 md:gap-4\": message.parts?.some(\n              (p) => p.type === \"text\" && p.text?.trim()\n            ),\n            \"min-h-96\": message.role === \"assistant\" && requiresScrollPadding,\n            \"w-full\":\n              (message.role === \"assistant\" &&\n                message.parts?.some(\n                  (p) => p.type === \"text\" && p.text?.trim()\n                )) ||\n              mode === \"edit\",\n            \"max-w-[calc(100%-2.5rem)] sm:max-w-[min(fit-content,80%)]\":\n              message.role === \"user\" && mode !== \"edit\",\n          })}\n        >\n          {attachmentsFromMessage.length > 0 && (\n            <div\n              className=\"flex flex-row justify-end gap-2\"\n              data-testid={\"message-attachments\"}\n            >\n              {attachmentsFromMessage.map((attachment) => (\n                <PreviewAttachment\n                  attachment={{\n                    name: attachment.filename ?? \"file\",\n                    contentType: attachment.mediaType,\n                    url: attachment.url,\n                  }}\n                  key={attachment.url}\n                />\n              ))}\n            </div>\n          )}\n\n          {message.parts?.map((part, index) => {\n            const { type } = part;\n            const key = `message-${message.id}-part-${index}`;\n\n            if (type === \"reasoning\" && part.text?.trim().length > 0) {\n              return (\n                <MessageReasoning\n                  isLoading={isLoading}\n                  key={key}\n                  reasoning={part.text}\n                />\n              );\n            }\n\n            if (type === \"text\") {\n              if (mode === \"view\") {\n                return (\n                  <div key={key}>\n                    <MessageContent\n                      className={cn({\n                        \"w-fit break-words rounded-2xl px-3 py-2 text-right text-white\":\n                          message.role === \"user\",\n                        \"bg-transparent px-0 py-0 text-left\":\n                          message.role === \"assistant\",\n                      })}\n                      data-testid=\"message-content\"\n                      style={\n                        message.role === \"user\"\n                          ? { backgroundColor: \"#006cff\" }\n                          : undefined\n                      }\n                    >\n                      <Response>{sanitizeText(part.text)}</Response>\n                    </MessageContent>\n                  </div>\n                );\n              }\n\n              if (mode === \"edit\") {\n                return (\n                  <div\n                    className=\"flex w-full flex-row items-start gap-3\"\n                    key={key}\n                  >\n                    <div className=\"size-8\" />\n                    <div className=\"min-w-0 flex-1\">\n                      <MessageEditor\n                        key={message.id}\n                        message={message}\n                        regenerate={regenerate}\n                        setMessages={setMessages}\n                        setMode={setMode}\n                      />\n                    </div>\n                  </div>\n                );\n              }\n            }\n\n            if (type === \"tool-getWeather\") {\n              const { toolCallId, state } = part;\n\n              return (\n                <Tool defaultOpen={true} key={toolCallId}>\n                  <ToolHeader state={state} type=\"tool-getWeather\" />\n                  <ToolContent>\n                    {state === \"input-available\" && (\n                      <ToolInput input={part.input} />\n                    )}\n                    {state === \"output-available\" && (\n                      <ToolOutput\n                        errorText={undefined}\n                        output={<Weather weatherAtLocation={part.output} />}\n                      />\n                    )}\n                  </ToolContent>\n                </Tool>\n              );\n            }\n\n            if (type === \"tool-createDocument\") {\n              const { toolCallId } = part;\n\n              if (part.output && \"error\" in part.output) {\n                return (\n                  <div\n                    className=\"rounded-lg border border-red-200 bg-red-50 p-4 text-red-500 dark:bg-red-950/50\"\n                    key={toolCallId}\n                  >\n                    Error creating document: {String(part.output.error)}\n                  </div>\n                );\n              }\n\n              return (\n                <DocumentPreview\n                  isReadonly={isReadonly}\n                  key={toolCallId}\n                  result={part.output}\n                />\n              );\n            }\n\n            if (type === \"tool-updateDocument\") {\n              const { toolCallId } = part;\n\n              if (part.output && \"error\" in part.output) {\n                return (\n                  <div\n                    className=\"rounded-lg border border-red-200 bg-red-50 p-4 text-red-500 dark:bg-red-950/50\"\n                    key={toolCallId}\n                  >\n                    Error updating document: {String(part.output.error)}\n                  </div>\n                );\n              }\n\n              return (\n                <div className=\"relative\" key={toolCallId}>\n                  <DocumentPreview\n                    args={{ ...part.output, isUpdate: true }}\n                    isReadonly={isReadonly}\n                    result={part.output}\n                  />\n                </div>\n              );\n            }\n\n            if (type === \"tool-requestSuggestions\") {\n              const { toolCallId, state } = part;\n\n              return (\n                <Tool defaultOpen={true} key={toolCallId}>\n                  <ToolHeader state={state} type=\"tool-requestSuggestions\" />\n                  <ToolContent>\n                    {state === \"input-available\" && (\n                      <ToolInput input={part.input} />\n                    )}\n                    {state === \"output-available\" && (\n                      <ToolOutput\n                        errorText={undefined}\n                        output={\n                          \"error\" in part.output ? (\n                            <div className=\"rounded border p-2 text-red-500\">\n                              Error: {String(part.output.error)}\n                            </div>\n                          ) : (\n                            <DocumentToolResult\n                              isReadonly={isReadonly}\n                              result={part.output}\n                              type=\"request-suggestions\"\n                            />\n                          )\n                        }\n                      />\n                    )}\n                  </ToolContent>\n                </Tool>\n              );\n            }\n\n            return null;\n          })}\n\n          {!isReadonly && (\n            <MessageActions\n              chatId={chatId}\n              isLoading={isLoading}\n              key={`action-${message.id}`}\n              message={message}\n              setMode={setMode}\n              vote={vote}\n            />\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport const PreviewMessage = memo(\n  PurePreviewMessage,\n  (prevProps, nextProps) => {\n    if (prevProps.isLoading !== nextProps.isLoading) {\n      return false;\n    }\n    if (prevProps.message.id !== nextProps.message.id) {\n      return false;\n    }\n    if (prevProps.requiresScrollPadding !== nextProps.requiresScrollPadding) {\n      return false;\n    }\n    if (!equal(prevProps.message.parts, nextProps.message.parts)) {\n      return false;\n    }\n    if (!equal(prevProps.vote, nextProps.vote)) {\n      return false;\n    }\n\n    return false;\n  }\n);\n\nexport const ThinkingMessage = () => {\n  const role = \"assistant\";\n\n  return (\n    <motion.div\n      animate={{ opacity: 1 }}\n      className=\"group/message w-full\"\n      data-role={role}\n      data-testid=\"message-assistant-loading\"\n      initial={{ opacity: 0 }}\n    >\n      <div className=\"flex items-start justify-start gap-3\">\n        <div className=\"-mt-1 flex size-8 shrink-0 items-center justify-center rounded-full bg-background ring-1 ring-border\">\n          <SparklesIcon size={14} />\n        </div>\n\n        <div className=\"flex w-full flex-col gap-2 md:gap-4\">\n          <div className=\"p-0 text-muted-foreground text-sm\">\n            <LoadingText>Thinking...</LoadingText>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nconst LoadingText = ({ children }: { children: React.ReactNode }) => {\n  return (\n    <motion.div\n      animate={{ backgroundPosition: [\"100% 50%\", \"-100% 50%\"] }}\n      className=\"flex items-center text-transparent\"\n      style={{\n        background:\n          \"linear-gradient(90deg, hsl(var(--muted-foreground)) 0%, hsl(var(--muted-foreground)) 35%, hsl(var(--foreground)) 50%, hsl(var(--muted-foreground)) 65%, hsl(var(--muted-foreground)) 100%)\",\n        backgroundSize: \"200% 100%\",\n        WebkitBackgroundClip: \"text\",\n        backgroundClip: \"text\",\n      }}\n      transition={{\n        duration: 1.5,\n        repeat: Number.POSITIVE_INFINITY,\n        ease: \"linear\",\n      }}\n    >\n      {children}\n    </motion.div>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7092, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/artifact-messages.tsx"],"sourcesContent":["import type { UseChatHelpers } from \"@ai-sdk/react\";\nimport equal from \"fast-deep-equal\";\nimport { motion } from \"framer-motion\";\nimport { memo } from \"react\";\nimport { useMessages } from \"@/hooks/use-messages\";\nimport type { Vote } from \"@/lib/db/schema\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport type { UIArtifact } from \"./artifact\";\nimport { PreviewMessage, ThinkingMessage } from \"./message\";\n\ntype ArtifactMessagesProps = {\n  chatId: string;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  votes: Vote[] | undefined;\n  messages: ChatMessage[];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  regenerate: UseChatHelpers<ChatMessage>[\"regenerate\"];\n  isReadonly: boolean;\n  artifactStatus: UIArtifact[\"status\"];\n};\n\nfunction PureArtifactMessages({\n  chatId,\n  status,\n  votes,\n  messages,\n  setMessages,\n  regenerate,\n  isReadonly,\n}: ArtifactMessagesProps) {\n  const {\n    containerRef: messagesContainerRef,\n    endRef: messagesEndRef,\n    onViewportEnter,\n    onViewportLeave,\n    hasSentMessage,\n  } = useMessages({\n    status,\n  });\n\n  return (\n    <div\n      className=\"flex h-full flex-col items-center gap-4 overflow-y-scroll px-4 pt-20\"\n      ref={messagesContainerRef}\n    >\n      {messages.map((message, index) => (\n        <PreviewMessage\n          chatId={chatId}\n          isLoading={status === \"streaming\" && index === messages.length - 1}\n          isReadonly={isReadonly}\n          key={message.id}\n          message={message}\n          regenerate={regenerate}\n          requiresScrollPadding={\n            hasSentMessage && index === messages.length - 1\n          }\n          setMessages={setMessages}\n          vote={\n            votes\n              ? votes.find((vote) => vote.messageId === message.id)\n              : undefined\n          }\n        />\n      ))}\n\n      {status === \"submitted\" &&\n        messages.length > 0 &&\n        messages.at(-1)?.role === \"user\" && <ThinkingMessage />}\n\n      <motion.div\n        className=\"min-h-[24px] min-w-[24px] shrink-0\"\n        onViewportEnter={onViewportEnter}\n        onViewportLeave={onViewportLeave}\n        ref={messagesEndRef}\n      />\n    </div>\n  );\n}\n\nfunction areEqual(\n  prevProps: ArtifactMessagesProps,\n  nextProps: ArtifactMessagesProps\n) {\n  if (\n    prevProps.artifactStatus === \"streaming\" &&\n    nextProps.artifactStatus === \"streaming\"\n  ) {\n    return true;\n  }\n\n  if (prevProps.status !== nextProps.status) {\n    return false;\n  }\n  if (prevProps.status && nextProps.status) {\n    return false;\n  }\n  if (prevProps.messages.length !== nextProps.messages.length) {\n    return false;\n  }\n  if (!equal(prevProps.votes, nextProps.votes)) {\n    return false;\n  }\n\n  return true;\n}\n\nexport const ArtifactMessages = memo(PureArtifactMessages, areEqual);\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAIA;;;;;;;;AAaA,SAAS,qBAAqB,EAC5B,MAAM,EACN,MAAM,EACN,KAAK,EACL,QAAQ,EACR,WAAW,EACX,UAAU,EACV,UAAU,EACY;;IACtB,MAAM,EACJ,cAAc,oBAAoB,EAClC,QAAQ,cAAc,EACtB,eAAe,EACf,eAAe,EACf,cAAc,EACf,GAAG,CAAA,GAAA,4HAAA,CAAA,cAAW,AAAD,EAAE;QACd;IACF;IAEA,qBACE,kaAAC;QACC,WAAU;QACV,KAAK;;YAEJ,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,kaAAC,yHAAA,CAAA,iBAAc;oBACb,QAAQ;oBACR,WAAW,WAAW,eAAe,UAAU,SAAS,MAAM,GAAG;oBACjE,YAAY;oBAEZ,SAAS;oBACT,YAAY;oBACZ,uBACE,kBAAkB,UAAU,SAAS,MAAM,GAAG;oBAEhD,aAAa;oBACb,MACE,QACI,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,SAAS,KAAK,QAAQ,EAAE,IAClD;mBAVD,QAAQ,EAAE;;;;;YAelB,WAAW,eACV,SAAS,MAAM,GAAG,KAClB,SAAS,EAAE,CAAC,CAAC,IAAI,SAAS,wBAAU,kaAAC,yHAAA,CAAA,kBAAe;;;;;0BAEtD,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;gBACT,WAAU;gBACV,iBAAiB;gBACjB,iBAAiB;gBACjB,KAAK;;;;;;;;;;;;AAIb;GAxDS;;QAeH,4HAAA,CAAA,cAAW;;;KAfR;AA0DT,SAAS,SACP,SAAgC,EAChC,SAAgC;IAEhC,IACE,UAAU,cAAc,KAAK,eAC7B,UAAU,cAAc,KAAK,aAC7B;QACA,OAAO;IACT;IAEA,IAAI,UAAU,MAAM,KAAK,UAAU,MAAM,EAAE;QACzC,OAAO;IACT;IACA,IAAI,UAAU,MAAM,IAAI,UAAU,MAAM,EAAE;QACxC,OAAO;IACT;IACA,IAAI,UAAU,QAAQ,CAAC,MAAM,KAAK,UAAU,QAAQ,CAAC,MAAM,EAAE;QAC3D,OAAO;IACT;IACA,IAAI,CAAC,CAAA,GAAA,mNAAA,CAAA,UAAK,AAAD,EAAE,UAAU,KAAK,EAAE,UAAU,KAAK,GAAG;QAC5C,OAAO;IACT;IAEA,OAAO;AACT;AAEO,MAAM,iCAAmB,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAAE,sBAAsB","debugId":null}},
    {"offset": {"line": 7191, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/app/%28chat%29/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { generateText, type UIMessage } from \"ai\";\nimport { cookies } from \"next/headers\";\nimport type { VisibilityType } from \"@/components/visibility-selector\";\nimport { myProvider } from \"@/lib/ai/providers\";\nimport {\n  deleteMessagesByChatIdAfterTimestamp,\n  getMessageById,\n  updateChatVisiblityById,\n} from \"@/lib/db/queries\";\n\nexport async function saveChatModelAsCookie(model: string) {\n  const cookieStore = await cookies();\n  cookieStore.set(\"chat-model\", model);\n}\n\nexport async function generateTitleFromUserMessage({\n  message,\n}: {\n  message: UIMessage;\n}) {\n  const { text: title } = await generateText({\n    model: myProvider.languageModel(\"title-model\"),\n    system: `\\n\n    - you will generate a short title based on the first message a user begins a conversation with\n    - ensure it is not more than 80 characters long\n    - the title should be a summary of the user's message\n    - do not use quotes or colons`,\n    prompt: JSON.stringify(message),\n  });\n\n  return title;\n}\n\nexport async function deleteTrailingMessages({ id }: { id: string }) {\n  const [message] = await getMessageById({ id });\n\n  await deleteMessagesByChatIdAfterTimestamp({\n    chatId: message.chatId,\n    timestamp: message.createdAt,\n  });\n}\n\nexport async function updateChatVisibility({\n  chatId,\n  visibility,\n}: {\n  chatId: string;\n  visibility: VisibilityType;\n}) {\n  await updateChatVisiblityById({ chatId, visibility });\n}\n"],"names":[],"mappings":";;;;;;IAYsB,wBAAA,WAAA,GAAA,CAAA,GAAA,8aAAA,CAAA,wBAAA,EAAA,8CAAA,8aAAA,CAAA,aAAA,EAAA,KAAA,GAAA,8aAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 7207, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = \"SelectTrigger\"\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7422, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/ai/models.ts"],"sourcesContent":["export const DEFAULT_CHAT_MODEL: string = \"chat-model\";\n\nexport type ChatModel = {\n  id: string;\n  name: string;\n  description: string;\n};\n\nexport const chatModels: ChatModel[] = [\n  {\n    id: \"chat-model\",\n    name: \"Grok Vision\",\n    description: \"Advanced multimodal model with vision and text capabilities\",\n  },\n  {\n    id: \"chat-model-reasoning\",\n    name: \"Grok Reasoning\",\n    description:\n      \"Uses advanced chain-of-thought reasoning for complex problems\",\n  },\n];\n"],"names":[],"mappings":";;;;AAAO,MAAM,qBAA6B;AAQnC,MAAM,aAA0B;IACrC;QACE,IAAI;QACJ,MAAM;QACN,aAAa;IACf;IACA;QACE,IAAI;QACJ,MAAM;QACN,aACE;IACJ;CACD","debugId":null}},
    {"offset": {"line": 7448, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/ai/providers.ts"],"sourcesContent":["import { createOpenAI, openai } from \"@ai-sdk/openai\";\n\nconst gatewayOpenAI = createOpenAI({\n  apiKey: process.env.AI_GATEWAY_API_KEY!,\n  baseURL: process.env.AI_GATEWAY_URL, // \"https://ai-gateway.vercel.sh/api/openai\"\n});\n\nexport const myProvider = {\n  languageModel(name: string) {\n    const map: Record<string, ReturnType<typeof gatewayOpenAI>> = {\n      \"title-model\": gatewayOpenAI(\"gpt-4o-mini\"),\n      \"chat-model\": gatewayOpenAI(\"gpt-4o\"),\n    };\n    return map[name] ?? gatewayOpenAI(name as any);\n  },\n};\n\n"],"names":[],"mappings":";;;AAGU;AAHV;;AAEA,MAAM,gBAAgB,CAAA,GAAA,kPAAA,CAAA,eAAY,AAAD,EAAE;IACjC,QAAQ,qXAAA,CAAA,UAAO,CAAC,GAAG,CAAC,kBAAkB;IACtC,SAAS,qXAAA,CAAA,UAAO,CAAC,GAAG,CAAC,cAAc;AACrC;AAEO,MAAM,aAAa;IACxB,eAAc,IAAY;QACxB,MAAM,MAAwD;YAC5D,eAAe,cAAc;YAC7B,cAAc,cAAc;QAC9B;QACA,OAAO,GAAG,CAAC,KAAK,IAAI,cAAc;IACpC;AACF","debugId":null}},
    {"offset": {"line": 7476, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = \"Progress\"\n\nexport { Progress }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,yBAAW,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,kaAAC,8XAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;kBAET,cAAA,kaAAC,8XAAA,CAAA,YAA2B;YAC1B,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;;AAIhE,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 7522, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/context.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Separator } from \"@/components/ui/separator\";\nimport type { AppUsage } from \"@/lib/usage\";\nimport { cn } from \"@/lib/utils\";\n\nexport type ContextProps = ComponentProps<\"button\"> & {\n  /** Optional full usage payload to enable breakdown view */\n  usage?: AppUsage;\n};\n\nconst _THOUSAND = 1000;\nconst _MILLION = 1_000_000;\nconst _BILLION = 1_000_000_000;\nconst PERCENT_MAX = 100;\n\n// Lucide CircleIcon geometry\nconst ICON_VIEWBOX = 24;\nconst ICON_CENTER = 12;\nconst ICON_RADIUS = 10;\nconst ICON_STROKE_WIDTH = 2;\n\ntype ContextIconProps = {\n  percent: number; // 0 - 100\n};\n\nexport const ContextIcon = ({ percent }: ContextIconProps) => {\n  const radius = ICON_RADIUS;\n  const circumference = 2 * Math.PI * radius;\n  const dashOffset = circumference * (1 - percent / PERCENT_MAX);\n\n  return (\n    <svg\n      aria-label={`${percent.toFixed(2)}% of model context used`}\n      height=\"28\"\n      role=\"img\"\n      style={{ color: \"currentcolor\" }}\n      viewBox={`0 0 ${ICON_VIEWBOX} ${ICON_VIEWBOX}`}\n      width=\"28\"\n    >\n      <circle\n        cx={ICON_CENTER}\n        cy={ICON_CENTER}\n        fill=\"none\"\n        opacity=\"0.25\"\n        r={radius}\n        stroke=\"currentColor\"\n        strokeWidth={ICON_STROKE_WIDTH}\n      />\n      <circle\n        cx={ICON_CENTER}\n        cy={ICON_CENTER}\n        fill=\"none\"\n        opacity=\"0.7\"\n        r={radius}\n        stroke=\"currentColor\"\n        strokeDasharray={`${circumference} ${circumference}`}\n        strokeDashoffset={dashOffset}\n        strokeLinecap=\"round\"\n        strokeWidth={ICON_STROKE_WIDTH}\n        transform={`rotate(-90 ${ICON_CENTER} ${ICON_CENTER})`}\n      />\n    </svg>\n  );\n};\n\nfunction InfoRow({\n  label,\n  tokens,\n  costText,\n}: {\n  label: string;\n  tokens?: number;\n  costText?: string;\n}) {\n  return (\n    <div className=\"flex items-center justify-between text-xs\">\n      <span className=\"text-muted-foreground\">{label}</span>\n      <div className=\"flex items-center gap-2 font-mono\">\n        <span className=\"min-w-[4ch] text-right\">\n          {tokens === undefined ? \"—\" : tokens.toLocaleString()}\n        </span>\n        {costText !== undefined &&\n          costText !== null &&\n          !Number.isNaN(Number.parseFloat(costText)) && (\n            <span className=\"text-muted-foreground\">\n              ${Number.parseFloat(costText).toFixed(6)}\n            </span>\n          )}\n      </div>\n    </div>\n  );\n}\n\nexport const Context = ({ className, usage, ...props }: ContextProps) => {\n  const used = usage?.totalTokens ?? 0;\n  const max =\n    usage?.context?.totalMax ??\n    usage?.context?.combinedMax ??\n    usage?.context?.inputMax;\n  const hasMax = typeof max === \"number\" && Number.isFinite(max) && max > 0;\n  const usedPercent = hasMax ? Math.min(100, (used / max) * 100) : 0;\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <button\n          className={cn(\n            \"inline-flex select-none items-center gap-1 rounded-md text-sm\",\n            \"cursor-pointer bg-background text-foreground\",\n            className\n          )}\n          type=\"button\"\n          {...props}\n        >\n          <span className=\"hidden font-medium text-muted-foreground\">\n            {usedPercent.toFixed(1)}%\n          </span>\n          <ContextIcon percent={usedPercent} />\n        </button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-fit p-3\" side=\"top\">\n        <div className=\"min-w-[240px] space-y-2\">\n          <div className=\"flex items-start justify-between text-sm\">\n            <span>{usedPercent.toFixed(1)}%</span>\n            <span className=\"text-muted-foreground\">\n              {hasMax ? `${used} / ${max} tokens` : `${used} tokens`}\n            </span>\n          </div>\n          <div className=\"space-y-2\">\n            <Progress className=\"h-2 bg-muted\" value={usedPercent} />\n          </div>\n          <div className=\"mt-1 space-y-1\">\n            {usage?.cachedInputTokens && usage.cachedInputTokens > 0 && (\n              <InfoRow\n                costText={usage?.costUSD?.cacheReadUSD?.toString()}\n                label=\"Cache Hits\"\n                tokens={usage?.cachedInputTokens}\n              />\n            )}\n            <InfoRow\n              costText={usage?.costUSD?.inputUSD?.toString()}\n              label=\"Input\"\n              tokens={usage?.inputTokens}\n            />\n            <InfoRow\n              costText={usage?.costUSD?.outputUSD?.toString()}\n              label=\"Output\"\n              tokens={usage?.outputTokens}\n            />\n            <InfoRow\n              costText={usage?.costUSD?.reasoningUSD?.toString()}\n              label=\"Reasoning\"\n              tokens={\n                usage?.reasoningTokens && usage.reasoningTokens > 0\n                  ? usage.reasoningTokens\n                  : undefined\n              }\n            />\n            {usage?.costUSD?.totalUSD !== undefined && (\n              <>\n                <Separator className=\"mt-1\" />\n                <div className=\"flex items-center justify-between pt-1 text-xs\">\n                  <span className=\"text-muted-foreground\">Total cost</span>\n                  <div className=\"flex items-center gap-2 font-mono\">\n                    <span className=\"min-w-[4ch] text-right\" />\n                    <span>\n                      {Number.isNaN(\n                        Number.parseFloat(usage.costUSD.totalUSD.toString())\n                      )\n                        ? \"—\"\n                        : `$${Number.parseFloat(usage.costUSD.totalUSD.toString()).toFixed(6)}`}\n                    </span>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7866, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/prompt-input.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ChatStatus } from \"ai\";\nimport { Loader2Icon, SendIcon, SquareIcon, XIcon } from \"lucide-react\";\nimport type {\n  ComponentProps,\n  HTMLAttributes,\n  KeyboardEventHandler,\n} from \"react\";\nimport { Children } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { cn } from \"@/lib/utils\";\n\nexport type PromptInputProps = HTMLAttributes<HTMLFormElement>;\n\nexport const PromptInput = ({ className, ...props }: PromptInputProps) => (\n  <form\n    className={cn(\n      \"w-full overflow-hidden rounded-xl border bg-background shadow-xs\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type PromptInputTextareaProps = ComponentProps<typeof Textarea> & {\n  minHeight?: number;\n  maxHeight?: number;\n  disableAutoResize?: boolean;\n  resizeOnNewLinesOnly?: boolean;\n};\n\nexport const PromptInputTextarea = ({\n  onChange,\n  className,\n  placeholder = \"What would you like to know?\",\n  minHeight = 48,\n  maxHeight = 164,\n  disableAutoResize = false,\n  resizeOnNewLinesOnly = false,\n  ...props\n}: PromptInputTextareaProps) => {\n  const handleKeyDown: KeyboardEventHandler<HTMLTextAreaElement> = (e) => {\n    if (e.key === \"Enter\") {\n      // Don't submit if IME composition is in progress\n      if (e.nativeEvent.isComposing) {\n        return;\n      }\n\n      if (e.shiftKey) {\n        // Allow newline\n        return;\n      }\n\n      // Submit on Enter (without Shift)\n      e.preventDefault();\n      const form = e.currentTarget.form;\n      if (form) {\n        form.requestSubmit();\n      }\n    }\n  };\n\n  return (\n    <Textarea\n      className={cn(\n        \"w-full resize-none rounded-none border-none p-3 shadow-none outline-hidden ring-0\",\n        disableAutoResize\n          ? \"field-sizing-fixed\"\n          : resizeOnNewLinesOnly\n            ? \"field-sizing-fixed\"\n            : \"field-sizing-content max-h-[6lh]\",\n        \"bg-transparent dark:bg-transparent\",\n        \"focus-visible:ring-0\",\n        className\n      )}\n      name=\"message\"\n      onChange={(e) => {\n        onChange?.(e);\n      }}\n      onKeyDown={handleKeyDown}\n      placeholder={placeholder}\n      {...props}\n    />\n  );\n};\n\nexport type PromptInputToolbarProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputToolbar = ({\n  className,\n  ...props\n}: PromptInputToolbarProps) => (\n  <div\n    className={cn(\"flex items-center justify-between p-1\", className)}\n    {...props}\n  />\n);\n\nexport type PromptInputToolsProps = HTMLAttributes<HTMLDivElement>;\n\nexport const PromptInputTools = ({\n  className,\n  ...props\n}: PromptInputToolsProps) => (\n  <div\n    className={cn(\n      \"flex items-center gap-1\",\n      \"[&_button:first-child]:rounded-bl-xl\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type PromptInputButtonProps = ComponentProps<typeof Button>;\n\nexport const PromptInputButton = ({\n  variant = \"ghost\",\n  className,\n  size,\n  ...props\n}: PromptInputButtonProps) => {\n  const newSize =\n    (size ?? Children.count(props.children) > 1) ? \"default\" : \"icon\";\n\n  return (\n    <Button\n      className={cn(\n        \"shrink-0 gap-1.5 rounded-lg\",\n        variant === \"ghost\" && \"text-muted-foreground\",\n        newSize === \"default\" && \"px-3\",\n        className\n      )}\n      size={newSize}\n      type=\"button\"\n      variant={variant}\n      {...props}\n    />\n  );\n};\n\nexport type PromptInputSubmitProps = ComponentProps<typeof Button> & {\n  status?: ChatStatus;\n};\n\nexport const PromptInputSubmit = ({\n  className,\n  variant = \"default\",\n  size = \"icon\",\n  status,\n  children,\n  ...props\n}: PromptInputSubmitProps) => {\n  let Icon = <SendIcon className=\"size-4\" />;\n\n  if (status === \"submitted\") {\n    Icon = <Loader2Icon className=\"size-4 animate-spin\" />;\n  } else if (status === \"streaming\") {\n    Icon = <SquareIcon className=\"size-4\" />;\n  } else if (status === \"error\") {\n    Icon = <XIcon className=\"size-4\" />;\n  }\n\n  return (\n    <Button\n      className={cn(\"gap-1.5 rounded-lg\", className)}\n      size={size}\n      type=\"submit\"\n      variant={variant}\n      {...props}\n    >\n      {children ?? Icon}\n    </Button>\n  );\n};\n\nexport type PromptInputModelSelectProps = ComponentProps<typeof Select>;\n\nexport const PromptInputModelSelect = (props: PromptInputModelSelectProps) => (\n  <Select {...props} />\n);\n\nexport type PromptInputModelSelectTriggerProps = ComponentProps<\n  typeof SelectTrigger\n>;\n\nexport const PromptInputModelSelectTrigger = ({\n  className,\n  ...props\n}: PromptInputModelSelectTriggerProps) => (\n  <SelectTrigger\n    className={cn(\n      \"border-none bg-transparent font-medium text-muted-foreground shadow-none transition-colors\",\n      \"hover:bg-accent hover:text-foreground aria-expanded:bg-accent aria-expanded:text-foreground\",\n      \"h-auto px-2 py-1.5\",\n      className\n    )}\n    {...props}\n  />\n);\n\nexport type PromptInputModelSelectContentProps = ComponentProps<\n  typeof SelectContent\n>;\n\nexport const PromptInputModelSelectContent = ({\n  className,\n  ...props\n}: PromptInputModelSelectContentProps) => (\n  <SelectContent className={cn(className)} {...props} />\n);\n\nexport type PromptInputModelSelectItemProps = ComponentProps<typeof SelectItem>;\n\nexport const PromptInputModelSelectItem = ({\n  className,\n  ...props\n}: PromptInputModelSelectItemProps) => (\n  <SelectItem className={cn(className)} {...props} />\n);\n\nexport type PromptInputModelSelectValueProps = ComponentProps<\n  typeof SelectValue\n>;\n\nexport const PromptInputModelSelectValue = ({\n  className,\n  ...props\n}: PromptInputModelSelectValueProps) => (\n  <SelectValue className={cn(className)} {...props} />\n);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8086, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = \"ScrollArea\"\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,OAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,kaAAC,iYAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,kaAAC,iYAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,kaAAC;;;;;0BACD,kaAAC,iYAAA,CAAA,SAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG;AACzB,MAAM,0BAAY,CAAA,GAAA,kYAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,kaAAC,iYAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,kaAAC,iYAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,iYAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 8163, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/suggestion.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ComponentProps } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\nimport { cn } from \"@/lib/utils\";\n\nexport type SuggestionsProps = ComponentProps<typeof ScrollArea>;\n\nexport const Suggestions = ({\n  className,\n  children,\n  ...props\n}: SuggestionsProps) => (\n  <ScrollArea className=\"w-full overflow-x-auto whitespace-nowrap\" {...props}>\n    <div className={cn(\"flex w-max flex-nowrap items-center gap-2\", className)}>\n      {children}\n    </div>\n    <ScrollBar className=\"hidden\" orientation=\"horizontal\" />\n  </ScrollArea>\n);\n\nexport type SuggestionProps = Omit<ComponentProps<typeof Button>, \"onClick\"> & {\n  suggestion: string;\n  onClick?: (suggestion: string) => void;\n};\n\nexport const Suggestion = ({\n  suggestion,\n  onClick,\n  className,\n  variant = \"outline\",\n  size = \"sm\",\n  children,\n  ...props\n}: SuggestionProps) => {\n  const handleClick = () => {\n    onClick?.(suggestion);\n  };\n\n  return (\n    <Button\n      className={cn(\"cursor-pointer rounded-full px-4\", className)}\n      onClick={handleClick}\n      size={size}\n      type=\"button\"\n      variant={variant}\n      {...props}\n    >\n      {children || suggestion}\n    </Button>\n  );\n};\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;AASO,MAAM,cAAc,CAAC,EAC1B,SAAS,EACT,QAAQ,EACR,GAAG,OACc,iBACjB,kaAAC,sIAAA,CAAA,aAAU;QAAC,WAAU;QAA4C,GAAG,KAAK;;0BACxE,kaAAC;gBAAI,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;0BAC7D;;;;;;0BAEH,kaAAC,sIAAA,CAAA,YAAS;gBAAC,WAAU;gBAAS,aAAY;;;;;;;;;;;;KATjC;AAkBN,MAAM,aAAa,CAAC,EACzB,UAAU,EACV,OAAO,EACP,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,QAAQ,EACR,GAAG,OACa;IAChB,MAAM,cAAc;QAClB,UAAU;IACZ;IAEA,qBACE,kaAAC,8HAAA,CAAA,SAAM;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,oCAAoC;QAClD,SAAS;QACT,MAAM;QACN,MAAK;QACL,SAAS;QACR,GAAG,KAAK;kBAER,YAAY;;;;;;AAGnB;MAzBa","debugId":null}},
    {"offset": {"line": 8234, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/suggested-actions.tsx"],"sourcesContent":["\"use client\";\n\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { motion } from \"framer-motion\";\nimport { memo } from \"react\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { Suggestion } from \"./elements/suggestion\";\nimport type { VisibilityType } from \"./visibility-selector\";\n\ntype SuggestedActionsProps = {\n  chatId: string;\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  selectedVisibilityType: VisibilityType;\n};\n\nfunction PureSuggestedActions({ chatId, sendMessage }: SuggestedActionsProps) {\n  const suggestedActions = [\n    \"What are the advantages of using Next.js?\",\n    \"Write code to demonstrate Dijkstra's algorithm\",\n    \"Help me write an essay about Silicon Valley\",\n    \"What is the weather in San Francisco?\",\n  ];\n\n  return (\n    <div\n      className=\"grid w-full gap-2 sm:grid-cols-2\"\n      data-testid=\"suggested-actions\"\n    >\n      {suggestedActions.map((suggestedAction, index) => (\n        <motion.div\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 20 }}\n          initial={{ opacity: 0, y: 20 }}\n          key={suggestedAction}\n          transition={{ delay: 0.05 * index }}\n        >\n          <Suggestion\n            className=\"h-auto w-full whitespace-normal p-3 text-left\"\n            onClick={(suggestion) => {\n              window.history.replaceState({}, \"\", `/chat/${chatId}`);\n              sendMessage({\n                role: \"user\",\n                parts: [{ type: \"text\", text: suggestion }],\n              });\n            }}\n            suggestion={suggestedAction}\n          >\n            {suggestedAction}\n          </Suggestion>\n        </motion.div>\n      ))}\n    </div>\n  );\n}\n\nexport const SuggestedActions = memo(\n  PureSuggestedActions,\n  (prevProps, nextProps) => {\n    if (prevProps.chatId !== nextProps.chatId) {\n      return false;\n    }\n    if (prevProps.selectedVisibilityType !== nextProps.selectedVisibilityType) {\n      return false;\n    }\n\n    return true;\n  }\n);\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AANA;;;;;AAeA,SAAS,qBAAqB,EAAE,MAAM,EAAE,WAAW,EAAyB;IAC1E,MAAM,mBAAmB;QACvB;QACA;QACA;QACA;KACD;IAED,qBACE,kaAAC;QACC,WAAU;QACV,eAAY;kBAEX,iBAAiB,GAAG,CAAC,CAAC,iBAAiB,sBACtC,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,MAAM;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC1B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAE7B,YAAY;oBAAE,OAAO,OAAO;gBAAM;0BAElC,cAAA,kaAAC,wIAAA,CAAA,aAAU;oBACT,WAAU;oBACV,SAAS,CAAC;wBACR,OAAO,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,QAAQ;wBACrD,YAAY;4BACV,MAAM;4BACN,OAAO;gCAAC;oCAAE,MAAM;oCAAQ,MAAM;gCAAW;6BAAE;wBAC7C;oBACF;oBACA,YAAY;8BAEX;;;;;;eAdE;;;;;;;;;;AAoBf;KAtCS;AAwCF,MAAM,iCAAmB,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EACjC,sBACA,CAAC,WAAW;IACV,IAAI,UAAU,MAAM,KAAK,UAAU,MAAM,EAAE;QACzC,OAAO;IACT;IACA,IAAI,UAAU,sBAAsB,KAAK,UAAU,sBAAsB,EAAE;QACzE,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 8327, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/multimodal-input.tsx"],"sourcesContent":["\"use client\";\n\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { Trigger } from \"@radix-ui/react-select\";\nimport type { UIMessage } from \"ai\";\nimport equal from \"fast-deep-equal\";\nimport {\n  type ChangeEvent,\n  type Dispatch,\n  memo,\n  type SetStateAction,\n  startTransition,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { toast } from \"sonner\";\nimport { useLocalStorage, useWindowSize } from \"usehooks-ts\";\nimport { saveChatModelAsCookie } from \"@/app/(chat)/actions\";\nimport { SelectItem } from \"@/components/ui/select\";\nimport { chatModels } from \"@/lib/ai/models\";\nimport { myProvider } from \"@/lib/ai/providers\";\nimport type { Attachment, ChatMessage } from \"@/lib/types\";\nimport type { AppUsage } from \"@/lib/usage\";\nimport { cn } from \"@/lib/utils\";\nimport { Context } from \"./elements/context\";\nimport {\n  PromptInput,\n  PromptInputModelSelect,\n  PromptInputModelSelectContent,\n  PromptInputSubmit,\n  PromptInputTextarea,\n  PromptInputToolbar,\n  PromptInputTools,\n} from \"./elements/prompt-input\";\nimport {\n  ArrowUpIcon,\n  ChevronDownIcon,\n  CpuIcon,\n  PaperclipIcon,\n  StopIcon,\n} from \"./icons\";\nimport { PreviewAttachment } from \"./preview-attachment\";\nimport { SuggestedActions } from \"./suggested-actions\";\nimport { Button } from \"./ui/button\";\nimport type { VisibilityType } from \"./visibility-selector\";\n\nfunction PureMultimodalInput({\n  chatId,\n  input,\n  setInput,\n  status,\n  stop,\n  attachments,\n  setAttachments,\n  messages,\n  setMessages,\n  sendMessage,\n  className,\n  selectedVisibilityType,\n  selectedModelId,\n  onModelChange,\n  usage,\n}: {\n  chatId: string;\n  input: string;\n  setInput: Dispatch<SetStateAction<string>>;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  stop: () => void;\n  attachments: Attachment[];\n  setAttachments: Dispatch<SetStateAction<Attachment[]>>;\n  messages: UIMessage[];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  className?: string;\n  selectedVisibilityType: VisibilityType;\n  selectedModelId: string;\n  onModelChange?: (modelId: string) => void;\n  usage?: AppUsage;\n}) {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const { width } = useWindowSize();\n\n  const adjustHeight = useCallback(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"44px\";\n    }\n  }, []);\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      adjustHeight();\n    }\n  }, [adjustHeight]);\n\n  const resetHeight = useCallback(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = \"44px\";\n    }\n  }, []);\n\n  const [localStorageInput, setLocalStorageInput] = useLocalStorage(\n    \"input\",\n    \"\"\n  );\n\n  useEffect(() => {\n    if (textareaRef.current) {\n      const domValue = textareaRef.current.value;\n      // Prefer DOM value over localStorage to handle hydration\n      const finalValue = domValue || localStorageInput || \"\";\n      setInput(finalValue);\n      adjustHeight();\n    }\n    // Only run once after hydration\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [adjustHeight, localStorageInput, setInput]);\n\n  useEffect(() => {\n    setLocalStorageInput(input);\n  }, [input, setLocalStorageInput]);\n\n  const handleInput = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setInput(event.target.value);\n  };\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [uploadQueue, setUploadQueue] = useState<string[]>([]);\n\n  const submitForm = useCallback(() => {\n    window.history.replaceState({}, \"\", `/chat/${chatId}`);\n\n    sendMessage({\n      role: \"user\",\n      parts: [\n        ...attachments.map((attachment) => ({\n          type: \"file\" as const,\n          url: attachment.url,\n          name: attachment.name,\n          mediaType: attachment.contentType,\n        })),\n        {\n          type: \"text\",\n          text: input,\n        },\n      ],\n    });\n\n    setAttachments([]);\n    setLocalStorageInput(\"\");\n    resetHeight();\n    setInput(\"\");\n\n    if (width && width > 768) {\n      textareaRef.current?.focus();\n    }\n  }, [\n    input,\n    setInput,\n    attachments,\n    sendMessage,\n    setAttachments,\n    setLocalStorageInput,\n    width,\n    chatId,\n    resetHeight,\n  ]);\n\n  const uploadFile = useCallback(async (file: File) => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    try {\n      const response = await fetch(\"/api/files/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        const { url, pathname, contentType } = data;\n\n        return {\n          url,\n          name: pathname,\n          contentType,\n        };\n      }\n      const { error } = await response.json();\n      toast.error(error);\n    } catch (_error) {\n      toast.error(\"Failed to upload file, please try again!\");\n    }\n  }, []);\n\n  const _modelResolver = useMemo(() => {\n    return myProvider.languageModel(selectedModelId);\n  }, [selectedModelId]);\n\n  const contextProps = useMemo(\n    () => ({\n      usage,\n    }),\n    [usage]\n  );\n\n  const handleFileChange = useCallback(\n    async (event: ChangeEvent<HTMLInputElement>) => {\n      const files = Array.from(event.target.files || []);\n\n      setUploadQueue(files.map((file) => file.name));\n\n      try {\n        const uploadPromises = files.map((file) => uploadFile(file));\n        const uploadedAttachments = await Promise.all(uploadPromises);\n        const successfullyUploadedAttachments = uploadedAttachments.filter(\n          (attachment) => attachment !== undefined\n        );\n\n        setAttachments((currentAttachments) => [\n          ...currentAttachments,\n          ...successfullyUploadedAttachments,\n        ]);\n      } catch (error) {\n        console.error(\"Error uploading files!\", error);\n      } finally {\n        setUploadQueue([]);\n      }\n    },\n    [setAttachments, uploadFile]\n  );\n\n  return (\n    <div className={cn(\"relative flex w-full flex-col gap-4\", className)}>\n      {messages.length === 0 &&\n        attachments.length === 0 &&\n        uploadQueue.length === 0 && (\n          <SuggestedActions\n            chatId={chatId}\n            selectedVisibilityType={selectedVisibilityType}\n            sendMessage={sendMessage}\n          />\n        )}\n\n      <input\n        className=\"-top-4 -left-4 pointer-events-none fixed size-0.5 opacity-0\"\n        multiple\n        onChange={handleFileChange}\n        ref={fileInputRef}\n        tabIndex={-1}\n        type=\"file\"\n      />\n\n      <PromptInput\n        className=\"rounded-xl border border-border bg-background p-3 shadow-xs transition-all duration-200 focus-within:border-border hover:border-muted-foreground/50\"\n        onSubmit={(event) => {\n          event.preventDefault();\n          if (status !== \"ready\") {\n            toast.error(\"Please wait for the model to finish its response!\");\n          } else {\n            submitForm();\n          }\n        }}\n      >\n        {(attachments.length > 0 || uploadQueue.length > 0) && (\n          <div\n            className=\"flex flex-row items-end gap-2 overflow-x-scroll\"\n            data-testid=\"attachments-preview\"\n          >\n            {attachments.map((attachment) => (\n              <PreviewAttachment\n                attachment={attachment}\n                key={attachment.url}\n                onRemove={() => {\n                  setAttachments((currentAttachments) =>\n                    currentAttachments.filter((a) => a.url !== attachment.url)\n                  );\n                  if (fileInputRef.current) {\n                    fileInputRef.current.value = \"\";\n                  }\n                }}\n              />\n            ))}\n\n            {uploadQueue.map((filename) => (\n              <PreviewAttachment\n                attachment={{\n                  url: \"\",\n                  name: filename,\n                  contentType: \"\",\n                }}\n                isUploading={true}\n                key={filename}\n              />\n            ))}\n          </div>\n        )}\n        <div className=\"flex flex-row items-start gap-1 sm:gap-2\">\n          <PromptInputTextarea\n            autoFocus\n            className=\"grow resize-none border-0! border-none! bg-transparent p-2 text-sm outline-none ring-0 [-ms-overflow-style:none] [scrollbar-width:none] placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 [&::-webkit-scrollbar]:hidden\"\n            data-testid=\"multimodal-input\"\n            disableAutoResize={true}\n            maxHeight={200}\n            minHeight={44}\n            onChange={handleInput}\n            placeholder=\"Send a message...\"\n            ref={textareaRef}\n            rows={1}\n            value={input}\n          />{\" \"}\n          <Context {...contextProps} />\n        </div>\n        <PromptInputToolbar className=\"!border-top-0 border-t-0! p-0 shadow-none dark:border-0 dark:border-transparent!\">\n          <PromptInputTools className=\"gap-0 sm:gap-0.5\">\n            <AttachmentsButton\n              fileInputRef={fileInputRef}\n              selectedModelId={selectedModelId}\n              status={status}\n            />\n            <ModelSelectorCompact\n              onModelChange={onModelChange}\n              selectedModelId={selectedModelId}\n            />\n          </PromptInputTools>\n\n          {status === \"submitted\" ? (\n            <StopButton setMessages={setMessages} stop={stop} />\n          ) : (\n            <PromptInputSubmit\n              className=\"size-8 rounded-full bg-primary text-primary-foreground transition-colors duration-200 hover:bg-primary/90 disabled:bg-muted disabled:text-muted-foreground\"\n              disabled={!input.trim() || uploadQueue.length > 0}\n              status={status}\n            >\n              <ArrowUpIcon size={14} />\n            </PromptInputSubmit>\n          )}\n        </PromptInputToolbar>\n      </PromptInput>\n    </div>\n  );\n}\n\nexport const MultimodalInput = memo(\n  PureMultimodalInput,\n  (prevProps, nextProps) => {\n    if (prevProps.input !== nextProps.input) {\n      return false;\n    }\n    if (prevProps.status !== nextProps.status) {\n      return false;\n    }\n    if (!equal(prevProps.attachments, nextProps.attachments)) {\n      return false;\n    }\n    if (prevProps.selectedVisibilityType !== nextProps.selectedVisibilityType) {\n      return false;\n    }\n    if (prevProps.selectedModelId !== nextProps.selectedModelId) {\n      return false;\n    }\n\n    return true;\n  }\n);\n\nfunction PureAttachmentsButton({\n  fileInputRef,\n  status,\n  selectedModelId,\n}: {\n  fileInputRef: React.MutableRefObject<HTMLInputElement | null>;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  selectedModelId: string;\n}) {\n  const isReasoningModel = selectedModelId === \"chat-model-reasoning\";\n\n  return (\n    <Button\n      className=\"aspect-square h-8 rounded-lg p-1 transition-colors hover:bg-accent\"\n      data-testid=\"attachments-button\"\n      disabled={status !== \"ready\" || isReasoningModel}\n      onClick={(event) => {\n        event.preventDefault();\n        fileInputRef.current?.click();\n      }}\n      variant=\"ghost\"\n    >\n      <PaperclipIcon size={14} style={{ width: 14, height: 14 }} />\n    </Button>\n  );\n}\n\nconst AttachmentsButton = memo(PureAttachmentsButton);\n\nfunction PureModelSelectorCompact({\n  selectedModelId,\n  onModelChange,\n}: {\n  selectedModelId: string;\n  onModelChange?: (modelId: string) => void;\n}) {\n  const [optimisticModelId, setOptimisticModelId] = useState(selectedModelId);\n\n  useEffect(() => {\n    setOptimisticModelId(selectedModelId);\n  }, [selectedModelId]);\n\n  const selectedModel = chatModels.find(\n    (model) => model.id === optimisticModelId\n  );\n\n  return (\n    <PromptInputModelSelect\n      onValueChange={(modelName) => {\n        const model = chatModels.find((m) => m.name === modelName);\n        if (model) {\n          setOptimisticModelId(model.id);\n          onModelChange?.(model.id);\n          startTransition(() => {\n            saveChatModelAsCookie(model.id);\n          });\n        }\n      }}\n      value={selectedModel?.name}\n    >\n      <Trigger\n        className=\"flex h-8 items-center gap-2 rounded-lg border-0 bg-background px-2 text-foreground shadow-none transition-colors hover:bg-accent focus:outline-none focus:ring-0 focus-visible:ring-0 focus-visible:ring-offset-0\"\n        type=\"button\"\n      >\n        <CpuIcon size={16} />\n        <span className=\"hidden font-medium text-xs sm:block\">\n          {selectedModel?.name}\n        </span>\n        <ChevronDownIcon size={16} />\n      </Trigger>\n      <PromptInputModelSelectContent className=\"min-w-[260px] p-0\">\n        <div className=\"flex flex-col gap-px\">\n          {chatModels.map((model) => (\n            <SelectItem key={model.id} value={model.name}>\n              <div className=\"truncate font-medium text-xs\">{model.name}</div>\n              <div className=\"mt-px truncate text-[10px] text-muted-foreground leading-tight\">\n                {model.description}\n              </div>\n            </SelectItem>\n          ))}\n        </div>\n      </PromptInputModelSelectContent>\n    </PromptInputModelSelect>\n  );\n}\n\nconst ModelSelectorCompact = memo(PureModelSelectorCompact);\n\nfunction PureStopButton({\n  stop,\n  setMessages,\n}: {\n  stop: () => void;\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n}) {\n  return (\n    <Button\n      className=\"size-7 rounded-full bg-foreground p-1 text-background transition-colors duration-200 hover:bg-foreground/90 disabled:bg-muted disabled:text-muted-foreground\"\n      data-testid=\"stop-button\"\n      onClick={(event) => {\n        event.preventDefault();\n        stop();\n        setMessages((messages) => messages);\n      }}\n    >\n      <StopIcon size={14} />\n    </Button>\n  );\n}\n\nconst StopButton = memo(PureStopButton);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8913, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/toolbar.tsx"],"sourcesContent":["\"use client\";\nimport type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport cx from \"classnames\";\nimport {\n  AnimatePresence,\n  motion,\n  useMotionValue,\n  useTransform,\n} from \"framer-motion\";\nimport { nanoid } from \"nanoid\";\nimport {\n  type Dispatch,\n  memo,\n  type ReactNode,\n  type SetStateAction,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { useOnClickOutside } from \"usehooks-ts\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { type ArtifactKind, artifactDefinitions } from \"./artifact\";\nimport type { ArtifactToolbarItem } from \"./create-artifact\";\nimport { ArrowUpIcon, StopIcon, SummarizeIcon } from \"./icons\";\n\ntype ToolProps = {\n  description: string;\n  icon: ReactNode;\n  selectedTool: string | null;\n  setSelectedTool: Dispatch<SetStateAction<string | null>>;\n  isToolbarVisible?: boolean;\n  setIsToolbarVisible?: Dispatch<SetStateAction<boolean>>;\n  isAnimating: boolean;\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  onClick: ({\n    sendMessage,\n  }: {\n    sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  }) => void;\n};\n\nconst Tool = ({\n  description,\n  icon,\n  selectedTool,\n  setSelectedTool,\n  isToolbarVisible,\n  setIsToolbarVisible,\n  isAnimating,\n  sendMessage,\n  onClick,\n}: ToolProps) => {\n  const [isHovered, setIsHovered] = useState(false);\n\n  useEffect(() => {\n    if (selectedTool !== description) {\n      setIsHovered(false);\n    }\n  }, [selectedTool, description]);\n\n  const handleSelect = () => {\n    if (!isToolbarVisible && setIsToolbarVisible) {\n      setIsToolbarVisible(true);\n      return;\n    }\n\n    if (!selectedTool) {\n      setIsHovered(true);\n      setSelectedTool(description);\n      return;\n    }\n\n    if (selectedTool !== description) {\n      setSelectedTool(description);\n    } else {\n      setSelectedTool(null);\n      onClick({ sendMessage });\n    }\n  };\n\n  return (\n    <Tooltip open={isHovered && !isAnimating}>\n      <TooltipTrigger asChild>\n        <motion.div\n          animate={{ opacity: 1, transition: { delay: 0.1 } }}\n          className={cx(\"rounded-full p-3\", {\n            \"bg-primary text-primary-foreground!\": selectedTool === description,\n          })}\n          exit={{\n            scale: 0.9,\n            opacity: 0,\n            transition: { duration: 0.1 },\n          }}\n          initial={{ scale: 1, opacity: 0 }}\n          onClick={() => {\n            handleSelect();\n          }}\n          onHoverEnd={() => {\n            if (selectedTool !== description) {\n              setIsHovered(false);\n            }\n          }}\n          onHoverStart={() => {\n            setIsHovered(true);\n          }}\n          onKeyDown={(event) => {\n            if (event.key === \"Enter\") {\n              handleSelect();\n            }\n          }}\n          whileHover={{ scale: 1.1 }}\n          whileTap={{ scale: 0.95 }}\n        >\n          {selectedTool === description ? <ArrowUpIcon /> : icon}\n        </motion.div>\n      </TooltipTrigger>\n      <TooltipContent\n        className=\"rounded-2xl bg-foreground p-3 px-4 text-background\"\n        side=\"left\"\n        sideOffset={16}\n      >\n        {description}\n      </TooltipContent>\n    </Tooltip>\n  );\n};\n\nconst randomArr = [...new Array(6)].map((_x) => nanoid(5));\n\nconst ReadingLevelSelector = ({\n  setSelectedTool,\n  sendMessage,\n  isAnimating,\n}: {\n  setSelectedTool: Dispatch<SetStateAction<string | null>>;\n  isAnimating: boolean;\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n}) => {\n  const LEVELS = [\n    \"Elementary\",\n    \"Middle School\",\n    \"Keep current level\",\n    \"High School\",\n    \"College\",\n    \"Graduate\",\n  ];\n\n  const y = useMotionValue(-40 * 2);\n  const dragConstraints = 5 * 40 + 2;\n  const yToLevel = useTransform(y, [0, -dragConstraints], [0, 5]);\n\n  const [currentLevel, setCurrentLevel] = useState(2);\n  const [hasUserSelectedLevel, setHasUserSelectedLevel] =\n    useState<boolean>(false);\n\n  useEffect(() => {\n    const unsubscribe = yToLevel.on(\"change\", (latest) => {\n      const level = Math.min(5, Math.max(0, Math.round(Math.abs(latest))));\n      setCurrentLevel(level);\n    });\n\n    return () => unsubscribe();\n  }, [yToLevel]);\n\n  return (\n    <div className=\"relative flex flex-col items-center justify-end\">\n      {randomArr.map((id) => (\n        <motion.div\n          animate={{ opacity: 1 }}\n          className=\"flex size-[40px] flex-row items-center justify-center\"\n          exit={{ opacity: 0 }}\n          initial={{ opacity: 0 }}\n          key={id}\n          transition={{ delay: 0.1 }}\n        >\n          <div className=\"size-2 rounded-full bg-muted-foreground/40\" />\n        </motion.div>\n      ))}\n\n      <TooltipProvider>\n        <Tooltip open={!isAnimating}>\n          <TooltipTrigger asChild>\n            <motion.div\n              className={cx(\n                \"absolute flex flex-row items-center rounded-full border bg-background p-3\",\n                {\n                  \"bg-primary text-primary-foreground\": currentLevel !== 2,\n                  \"bg-background text-foreground\": currentLevel === 2,\n                }\n              )}\n              drag=\"y\"\n              dragConstraints={{ top: -dragConstraints, bottom: 0 }}\n              dragElastic={0}\n              dragMomentum={false}\n              onClick={() => {\n                if (currentLevel !== 2 && hasUserSelectedLevel) {\n                  sendMessage({\n                    role: \"user\",\n                    parts: [\n                      {\n                        type: \"text\",\n                        text: `Please adjust the reading level to ${LEVELS[currentLevel]} level.`,\n                      },\n                    ],\n                  });\n\n                  setSelectedTool(null);\n                }\n              }}\n              onDragEnd={() => {\n                if (currentLevel === 2) {\n                  setSelectedTool(null);\n                } else {\n                  setHasUserSelectedLevel(true);\n                }\n              }}\n              onDragStart={() => {\n                setHasUserSelectedLevel(false);\n              }}\n              style={{ y }}\n              transition={{ duration: 0.1 }}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n            >\n              {currentLevel === 2 ? <SummarizeIcon /> : <ArrowUpIcon />}\n            </motion.div>\n          </TooltipTrigger>\n          <TooltipContent\n            className=\"rounded-2xl bg-foreground p-3 px-4 text-background text-sm\"\n            side=\"left\"\n            sideOffset={16}\n          >\n            {LEVELS[currentLevel]}\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    </div>\n  );\n};\n\nexport const Tools = ({\n  isToolbarVisible,\n  selectedTool,\n  setSelectedTool,\n  sendMessage,\n  isAnimating,\n  setIsToolbarVisible,\n  tools,\n}: {\n  isToolbarVisible: boolean;\n  selectedTool: string | null;\n  setSelectedTool: Dispatch<SetStateAction<string | null>>;\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  isAnimating: boolean;\n  setIsToolbarVisible: Dispatch<SetStateAction<boolean>>;\n  tools: ArtifactToolbarItem[];\n}) => {\n  const [primaryTool, ...secondaryTools] = tools;\n\n  return (\n    <motion.div\n      animate={{ opacity: 1, scale: 1 }}\n      className=\"flex flex-col gap-1.5\"\n      exit={{ opacity: 0, scale: 0.95 }}\n      initial={{ opacity: 0, scale: 0.95 }}\n    >\n      <AnimatePresence>\n        {isToolbarVisible &&\n          secondaryTools.map((secondaryTool) => (\n            <Tool\n              description={secondaryTool.description}\n              icon={secondaryTool.icon}\n              isAnimating={isAnimating}\n              key={secondaryTool.description}\n              onClick={secondaryTool.onClick}\n              selectedTool={selectedTool}\n              sendMessage={sendMessage}\n              setSelectedTool={setSelectedTool}\n            />\n          ))}\n      </AnimatePresence>\n\n      <Tool\n        description={primaryTool.description}\n        icon={primaryTool.icon}\n        isAnimating={isAnimating}\n        isToolbarVisible={isToolbarVisible}\n        onClick={primaryTool.onClick}\n        selectedTool={selectedTool}\n        sendMessage={sendMessage}\n        setIsToolbarVisible={setIsToolbarVisible}\n        setSelectedTool={setSelectedTool}\n      />\n    </motion.div>\n  );\n};\n\nconst PureToolbar = ({\n  isToolbarVisible,\n  setIsToolbarVisible,\n  sendMessage,\n  status,\n  stop,\n  setMessages,\n  artifactKind,\n}: {\n  isToolbarVisible: boolean;\n  setIsToolbarVisible: Dispatch<SetStateAction<boolean>>;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  stop: UseChatHelpers<ChatMessage>[\"stop\"];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  artifactKind: ArtifactKind;\n}) => {\n  const toolbarRef = useRef<HTMLDivElement>(null);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n\n  const [selectedTool, setSelectedTool] = useState<string | null>(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  useOnClickOutside(toolbarRef, () => {\n    setIsToolbarVisible(false);\n    setSelectedTool(null);\n  });\n\n  const startCloseTimer = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    timeoutRef.current = setTimeout(() => {\n      setSelectedTool(null);\n      setIsToolbarVisible(false);\n    }, 2000);\n  };\n\n  const cancelCloseTimer = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (status === \"streaming\") {\n      setIsToolbarVisible(false);\n    }\n  }, [status, setIsToolbarVisible]);\n\n  const artifactDefinition = artifactDefinitions.find(\n    (definition) => definition.kind === artifactKind\n  );\n\n  if (!artifactDefinition) {\n    throw new Error(\"Artifact definition not found!\");\n  }\n\n  const toolsByArtifactKind = artifactDefinition.toolbar;\n\n  if (toolsByArtifactKind.length === 0) {\n    return null;\n  }\n\n  return (\n    <TooltipProvider delayDuration={0}>\n      <motion.div\n        animate={\n          isToolbarVisible\n            ? selectedTool === \"adjust-reading-level\"\n              ? {\n                  opacity: 1,\n                  y: 0,\n                  height: 6 * 43,\n                  transition: { delay: 0 },\n                  scale: 0.95,\n                }\n              : {\n                  opacity: 1,\n                  y: 0,\n                  height: toolsByArtifactKind.length * 50,\n                  transition: { delay: 0 },\n                  scale: 1,\n                }\n            : { opacity: 1, y: 0, height: 54, transition: { delay: 0 } }\n        }\n        className=\"absolute right-6 bottom-6 flex cursor-pointer flex-col justify-end rounded-full border bg-background p-1.5 shadow-lg\"\n        exit={{ opacity: 0, y: -20, transition: { duration: 0.1 } }}\n        initial={{ opacity: 0, y: -20, scale: 1 }}\n        onAnimationComplete={() => {\n          setIsAnimating(false);\n        }}\n        onAnimationStart={() => {\n          setIsAnimating(true);\n        }}\n        onHoverEnd={() => {\n          if (status === \"streaming\") {\n            return;\n          }\n\n          startCloseTimer();\n        }}\n        onHoverStart={() => {\n          if (status === \"streaming\") {\n            return;\n          }\n\n          cancelCloseTimer();\n          setIsToolbarVisible(true);\n        }}\n        ref={toolbarRef}\n        transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\n      >\n        {status === \"streaming\" ? (\n          <motion.div\n            animate={{ scale: 1.4 }}\n            className=\"p-3\"\n            exit={{ scale: 1 }}\n            initial={{ scale: 1 }}\n            key=\"stop-icon\"\n            onClick={() => {\n              stop();\n              setMessages((messages) => messages);\n            }}\n          >\n            <StopIcon />\n          </motion.div>\n        ) : selectedTool === \"adjust-reading-level\" ? (\n          <ReadingLevelSelector\n            isAnimating={isAnimating}\n            key=\"reading-level-selector\"\n            sendMessage={sendMessage}\n            setSelectedTool={setSelectedTool}\n          />\n        ) : (\n          <Tools\n            isAnimating={isAnimating}\n            isToolbarVisible={isToolbarVisible}\n            key=\"tools\"\n            selectedTool={selectedTool}\n            sendMessage={sendMessage}\n            setIsToolbarVisible={setIsToolbarVisible}\n            setSelectedTool={setSelectedTool}\n            tools={toolsByArtifactKind}\n          />\n        )}\n      </motion.div>\n    </TooltipProvider>\n  );\n};\n\nexport const Toolbar = memo(PureToolbar, (prevProps, nextProps) => {\n  if (prevProps.status !== nextProps.status) {\n    return false;\n  }\n  if (prevProps.isToolbarVisible !== nextProps.isToolbarVisible) {\n    return false;\n  }\n  if (prevProps.artifactKind !== nextProps.artifactKind) {\n    return false;\n  }\n\n  return true;\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9500, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/version-footer.tsx"],"sourcesContent":["\"use client\";\n\nimport { isAfter } from \"date-fns\";\nimport { motion } from \"framer-motion\";\nimport { useState } from \"react\";\nimport { useSWRConfig } from \"swr\";\nimport { useWindowSize } from \"usehooks-ts\";\nimport { useArtifact } from \"@/hooks/use-artifact\";\nimport type { Document } from \"@/lib/db/schema\";\nimport { getDocumentTimestampByIndex } from \"@/lib/utils\";\nimport { LoaderIcon } from \"./icons\";\nimport { Button } from \"./ui/button\";\n\ntype VersionFooterProps = {\n  handleVersionChange: (type: \"next\" | \"prev\" | \"toggle\" | \"latest\") => void;\n  documents: Document[] | undefined;\n  currentVersionIndex: number;\n};\n\nexport const VersionFooter = ({\n  handleVersionChange,\n  documents,\n  currentVersionIndex,\n}: VersionFooterProps) => {\n  const { artifact } = useArtifact();\n\n  const { width } = useWindowSize();\n  const isMobile = width < 768;\n\n  const { mutate } = useSWRConfig();\n  const [isMutating, setIsMutating] = useState(false);\n\n  if (!documents) {\n    return;\n  }\n\n  return (\n    <motion.div\n      animate={{ y: 0 }}\n      className=\"absolute bottom-0 z-50 flex w-full flex-col justify-between gap-4 border-t bg-background p-4 lg:flex-row\"\n      exit={{ y: isMobile ? 200 : 77 }}\n      initial={{ y: isMobile ? 200 : 77 }}\n      transition={{ type: \"spring\", stiffness: 140, damping: 20 }}\n    >\n      <div>\n        <div>You are viewing a previous version</div>\n        <div className=\"text-muted-foreground text-sm\">\n          Restore this version to make edits\n        </div>\n      </div>\n\n      <div className=\"flex flex-row gap-4\">\n        <Button\n          disabled={isMutating}\n          onClick={async () => {\n            setIsMutating(true);\n\n            mutate(\n              `/api/document?id=${artifact.documentId}`,\n              await fetch(\n                `/api/document?id=${artifact.documentId}&timestamp=${getDocumentTimestampByIndex(\n                  documents,\n                  currentVersionIndex\n                )}`,\n                {\n                  method: \"DELETE\",\n                }\n              ),\n              {\n                optimisticData: documents\n                  ? [\n                      ...documents.filter((document) =>\n                        isAfter(\n                          new Date(document.createdAt),\n                          new Date(\n                            getDocumentTimestampByIndex(\n                              documents,\n                              currentVersionIndex\n                            )\n                          )\n                        )\n                      ),\n                    ]\n                  : [],\n              }\n            );\n          }}\n        >\n          <div>Restore this version</div>\n          {isMutating && (\n            <div className=\"animate-spin\">\n              <LoaderIcon />\n            </div>\n          )}\n        </Button>\n        <Button\n          onClick={() => {\n            handleVersionChange(\"latest\");\n          }}\n          variant=\"outline\"\n        >\n          Back to latest version\n        </Button>\n      </div>\n    </motion.div>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;AAXA;;;;;;;;;;AAmBO,MAAM,gBAAgB,CAAC,EAC5B,mBAAmB,EACnB,SAAS,EACT,mBAAmB,EACA;;IACnB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD;IAE/B,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,iQAAA,CAAA,gBAAa,AAAD;IAC9B,MAAM,WAAW,QAAQ;IAEzB,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,yQAAA,CAAA,eAAY,AAAD;IAC9B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,kYAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,IAAI,CAAC,WAAW;QACd;IACF;IAEA,qBACE,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;QACT,SAAS;YAAE,GAAG;QAAE;QAChB,WAAU;QACV,MAAM;YAAE,GAAG,WAAW,MAAM;QAAG;QAC/B,SAAS;YAAE,GAAG,WAAW,MAAM;QAAG;QAClC,YAAY;YAAE,MAAM;YAAU,WAAW;YAAK,SAAS;QAAG;;0BAE1D,kaAAC;;kCACC,kaAAC;kCAAI;;;;;;kCACL,kaAAC;wBAAI,WAAU;kCAAgC;;;;;;;;;;;;0BAKjD,kaAAC;gBAAI,WAAU;;kCACb,kaAAC,8HAAA,CAAA,SAAM;wBACL,UAAU;wBACV,SAAS;4BACP,cAAc;4BAEd,OACE,CAAC,iBAAiB,EAAE,SAAS,UAAU,EAAE,EACzC,MAAM,MACJ,CAAC,iBAAiB,EAAE,SAAS,UAAU,CAAC,WAAW,EAAE,CAAA,GAAA,+GAAA,CAAA,8BAA2B,AAAD,EAC7E,WACA,sBACC,EACH;gCACE,QAAQ;4BACV,IAEF;gCACE,gBAAgB,YACZ;uCACK,UAAU,MAAM,CAAC,CAAC,WACnB,CAAA,GAAA,iMAAA,CAAA,UAAO,AAAD,EACJ,IAAI,KAAK,SAAS,SAAS,GAC3B,IAAI,KACF,CAAA,GAAA,+GAAA,CAAA,8BAA2B,AAAD,EACxB,WACA;iCAKT,GACD,EAAE;4BACR;wBAEJ;;0CAEA,kaAAC;0CAAI;;;;;;4BACJ,4BACC,kaAAC;gCAAI,WAAU;0CACb,cAAA,kaAAC,uHAAA,CAAA,aAAU;;;;;;;;;;;;;;;;kCAIjB,kaAAC,8HAAA,CAAA,SAAM;wBACL,SAAS;4BACP,oBAAoB;wBACtB;wBACA,SAAQ;kCACT;;;;;;;;;;;;;;;;;;AAMT;GAvFa;;QAKU,2HAAA,CAAA,cAAW;QAEd,iQAAA,CAAA,gBAAa;QAGZ,yQAAA,CAAA,eAAY;;;KAVpB","debugId":null}},
    {"offset": {"line": 9659, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/artifact.tsx"],"sourcesContent":["import type { UseChatHelpers } from \"@ai-sdk/react\";\nimport { formatDistance } from \"date-fns\";\nimport equal from \"fast-deep-equal\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  type Dispatch,\n  memo,\n  type SetStateAction,\n  useCallback,\n  useEffect,\n  useState,\n} from \"react\";\nimport useSWR, { useSWRConfig } from \"swr\";\nimport { useDebounceCallback, useWindowSize } from \"usehooks-ts\";\nimport { codeArtifact } from \"@/artifacts/code/client\";\nimport { imageArtifact } from \"@/artifacts/image/client\";\nimport { sheetArtifact } from \"@/artifacts/sheet/client\";\nimport { textArtifact } from \"@/artifacts/text/client\";\nimport { useArtifact } from \"@/hooks/use-artifact\";\nimport type { Document, Vote } from \"@/lib/db/schema\";\nimport type { Attachment, ChatMessage } from \"@/lib/types\";\nimport { fetcher } from \"@/lib/utils\";\nimport { ArtifactActions } from \"./artifact-actions\";\nimport { ArtifactCloseButton } from \"./artifact-close-button\";\nimport { ArtifactMessages } from \"./artifact-messages\";\nimport { MultimodalInput } from \"./multimodal-input\";\nimport { Toolbar } from \"./toolbar\";\nimport { useSidebar } from \"./ui/sidebar\";\nimport { VersionFooter } from \"./version-footer\";\nimport type { VisibilityType } from \"./visibility-selector\";\n\nexport const artifactDefinitions = [\n  textArtifact,\n  codeArtifact,\n  imageArtifact,\n  sheetArtifact,\n];\nexport type ArtifactKind = (typeof artifactDefinitions)[number][\"kind\"];\n\nexport type UIArtifact = {\n  title: string;\n  documentId: string;\n  kind: ArtifactKind;\n  content: string;\n  isVisible: boolean;\n  status: \"streaming\" | \"idle\";\n  boundingBox: {\n    top: number;\n    left: number;\n    width: number;\n    height: number;\n  };\n};\n\nfunction PureArtifact({\n  chatId,\n  input,\n  setInput,\n  status,\n  stop,\n  attachments,\n  setAttachments,\n  sendMessage,\n  messages,\n  setMessages,\n  regenerate,\n  votes,\n  isReadonly,\n  selectedVisibilityType,\n  selectedModelId,\n}: {\n  chatId: string;\n  input: string;\n  setInput: Dispatch<SetStateAction<string>>;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  stop: UseChatHelpers<ChatMessage>[\"stop\"];\n  attachments: Attachment[];\n  setAttachments: Dispatch<SetStateAction<Attachment[]>>;\n  messages: ChatMessage[];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  votes: Vote[] | undefined;\n  sendMessage: UseChatHelpers<ChatMessage>[\"sendMessage\"];\n  regenerate: UseChatHelpers<ChatMessage>[\"regenerate\"];\n  isReadonly: boolean;\n  selectedVisibilityType: VisibilityType;\n  selectedModelId: string;\n}) {\n  const { artifact, setArtifact, metadata, setMetadata } = useArtifact();\n\n  const {\n    data: documents,\n    isLoading: isDocumentsFetching,\n    mutate: mutateDocuments,\n  } = useSWR<Document[]>(\n    artifact.documentId !== \"init\" && artifact.status !== \"streaming\"\n      ? `/api/document?id=${artifact.documentId}`\n      : null,\n    fetcher\n  );\n\n  const [mode, setMode] = useState<\"edit\" | \"diff\">(\"edit\");\n  const [document, setDocument] = useState<Document | null>(null);\n  const [currentVersionIndex, setCurrentVersionIndex] = useState(-1);\n\n  const { open: isSidebarOpen } = useSidebar();\n\n  useEffect(() => {\n    if (documents && documents.length > 0) {\n      const mostRecentDocument = documents.at(-1);\n\n      if (mostRecentDocument) {\n        setDocument(mostRecentDocument);\n        setCurrentVersionIndex(documents.length - 1);\n        setArtifact((currentArtifact) => ({\n          ...currentArtifact,\n          content: mostRecentDocument.content ?? \"\",\n        }));\n      }\n    }\n  }, [documents, setArtifact]);\n\n  useEffect(() => {\n    mutateDocuments();\n  }, [mutateDocuments]);\n\n  const { mutate } = useSWRConfig();\n  const [isContentDirty, setIsContentDirty] = useState(false);\n\n  const handleContentChange = useCallback(\n    (updatedContent: string) => {\n      if (!artifact) {\n        return;\n      }\n\n      mutate<Document[]>(\n        `/api/document?id=${artifact.documentId}`,\n        async (currentDocuments) => {\n          if (!currentDocuments) {\n            return [];\n          }\n\n          const currentDocument = currentDocuments.at(-1);\n\n          if (!currentDocument || !currentDocument.content) {\n            setIsContentDirty(false);\n            return currentDocuments;\n          }\n\n          if (currentDocument.content !== updatedContent) {\n            await fetch(`/api/document?id=${artifact.documentId}`, {\n              method: \"POST\",\n              body: JSON.stringify({\n                title: artifact.title,\n                content: updatedContent,\n                kind: artifact.kind,\n              }),\n            });\n\n            setIsContentDirty(false);\n\n            const newDocument = {\n              ...currentDocument,\n              content: updatedContent,\n              createdAt: new Date(),\n            };\n\n            return [...currentDocuments, newDocument];\n          }\n          return currentDocuments;\n        },\n        { revalidate: false }\n      );\n    },\n    [artifact, mutate]\n  );\n\n  const debouncedHandleContentChange = useDebounceCallback(\n    handleContentChange,\n    2000\n  );\n\n  const saveContent = useCallback(\n    (updatedContent: string, debounce: boolean) => {\n      if (document && updatedContent !== document.content) {\n        setIsContentDirty(true);\n\n        if (debounce) {\n          debouncedHandleContentChange(updatedContent);\n        } else {\n          handleContentChange(updatedContent);\n        }\n      }\n    },\n    [document, debouncedHandleContentChange, handleContentChange]\n  );\n\n  function getDocumentContentById(index: number) {\n    if (!documents) {\n      return \"\";\n    }\n    if (!documents[index]) {\n      return \"\";\n    }\n    return documents[index].content ?? \"\";\n  }\n\n  const handleVersionChange = (type: \"next\" | \"prev\" | \"toggle\" | \"latest\") => {\n    if (!documents) {\n      return;\n    }\n\n    if (type === \"latest\") {\n      setCurrentVersionIndex(documents.length - 1);\n      setMode(\"edit\");\n    }\n\n    if (type === \"toggle\") {\n      setMode((currentMode) => (currentMode === \"edit\" ? \"diff\" : \"edit\"));\n    }\n\n    if (type === \"prev\") {\n      if (currentVersionIndex > 0) {\n        setCurrentVersionIndex((index) => index - 1);\n      }\n    } else if (type === \"next\" && currentVersionIndex < documents.length - 1) {\n      setCurrentVersionIndex((index) => index + 1);\n    }\n  };\n\n  const [isToolbarVisible, setIsToolbarVisible] = useState(false);\n\n  /*\n   * NOTE: if there are no documents, or if\n   * the documents are being fetched, then\n   * we mark it as the current version.\n   */\n\n  const isCurrentVersion =\n    documents && documents.length > 0\n      ? currentVersionIndex === documents.length - 1\n      : true;\n\n  const { width: windowWidth, height: windowHeight } = useWindowSize();\n  const isMobile = windowWidth ? windowWidth < 768 : false;\n\n  const artifactDefinition = artifactDefinitions.find(\n    (definition) => definition.kind === artifact.kind\n  );\n\n  if (!artifactDefinition) {\n    throw new Error(\"Artifact definition not found!\");\n  }\n\n  useEffect(() => {\n    if (artifact.documentId !== \"init\" && artifactDefinition.initialize) {\n      artifactDefinition.initialize({\n        documentId: artifact.documentId,\n        setMetadata,\n      });\n    }\n  }, [artifact.documentId, artifactDefinition, setMetadata]);\n\n  return (\n    <AnimatePresence>\n      {artifact.isVisible && (\n        <motion.div\n          animate={{ opacity: 1 }}\n          className=\"fixed top-0 left-0 z-50 flex h-dvh w-dvw flex-row bg-transparent\"\n          data-testid=\"artifact\"\n          exit={{ opacity: 0, transition: { delay: 0.4 } }}\n          initial={{ opacity: 1 }}\n        >\n          {!isMobile && (\n            <motion.div\n              animate={{ width: windowWidth, right: 0 }}\n              className=\"fixed h-dvh bg-background\"\n              exit={{\n                width: isSidebarOpen ? windowWidth - 256 : windowWidth,\n                right: 0,\n              }}\n              initial={{\n                width: isSidebarOpen ? windowWidth - 256 : windowWidth,\n                right: 0,\n              }}\n            />\n          )}\n\n          {!isMobile && (\n            <motion.div\n              animate={{\n                opacity: 1,\n                x: 0,\n                scale: 1,\n                transition: {\n                  delay: 0.1,\n                  type: \"spring\",\n                  stiffness: 300,\n                  damping: 30,\n                },\n              }}\n              className=\"relative h-dvh w-[400px] shrink-0 bg-muted dark:bg-background\"\n              exit={{\n                opacity: 0,\n                x: 0,\n                scale: 1,\n                transition: { duration: 0 },\n              }}\n              initial={{ opacity: 0, x: 10, scale: 1 }}\n            >\n              <AnimatePresence>\n                {!isCurrentVersion && (\n                  <motion.div\n                    animate={{ opacity: 1 }}\n                    className=\"absolute top-0 left-0 z-50 h-dvh w-[400px] bg-zinc-900/50\"\n                    exit={{ opacity: 0 }}\n                    initial={{ opacity: 0 }}\n                  />\n                )}\n              </AnimatePresence>\n\n              <div className=\"flex h-full flex-col items-center justify-between\">\n                <ArtifactMessages\n                  artifactStatus={artifact.status}\n                  chatId={chatId}\n                  isReadonly={isReadonly}\n                  messages={messages}\n                  regenerate={regenerate}\n                  setMessages={setMessages}\n                  status={status}\n                  votes={votes}\n                />\n\n                <div className=\"relative flex w-full flex-row items-end gap-2 px-4 pb-4\">\n                  <MultimodalInput\n                    attachments={attachments}\n                    chatId={chatId}\n                    className=\"bg-background dark:bg-muted\"\n                    input={input}\n                    messages={messages}\n                    selectedModelId={selectedModelId}\n                    selectedVisibilityType={selectedVisibilityType}\n                    sendMessage={sendMessage}\n                    setAttachments={setAttachments}\n                    setInput={setInput}\n                    setMessages={setMessages}\n                    status={status}\n                    stop={stop}\n                  />\n                </div>\n              </div>\n            </motion.div>\n          )}\n\n          <motion.div\n            animate={\n              isMobile\n                ? {\n                    opacity: 1,\n                    x: 0,\n                    y: 0,\n                    height: windowHeight,\n                    width: windowWidth ? windowWidth : \"calc(100dvw)\",\n                    borderRadius: 0,\n                    transition: {\n                      delay: 0,\n                      type: \"spring\",\n                      stiffness: 300,\n                      damping: 30,\n                      duration: 0.8,\n                    },\n                  }\n                : {\n                    opacity: 1,\n                    x: 400,\n                    y: 0,\n                    height: windowHeight,\n                    width: windowWidth\n                      ? windowWidth - 400\n                      : \"calc(100dvw-400px)\",\n                    borderRadius: 0,\n                    transition: {\n                      delay: 0,\n                      type: \"spring\",\n                      stiffness: 300,\n                      damping: 30,\n                      duration: 0.8,\n                    },\n                  }\n            }\n            className=\"fixed flex h-dvh flex-col overflow-y-scroll border-zinc-200 bg-background md:border-l dark:border-zinc-700 dark:bg-muted\"\n            exit={{\n              opacity: 0,\n              scale: 0.5,\n              transition: {\n                delay: 0.1,\n                type: \"spring\",\n                stiffness: 600,\n                damping: 30,\n              },\n            }}\n            initial={\n              isMobile\n                ? {\n                    opacity: 1,\n                    x: artifact.boundingBox.left,\n                    y: artifact.boundingBox.top,\n                    height: artifact.boundingBox.height,\n                    width: artifact.boundingBox.width,\n                    borderRadius: 50,\n                  }\n                : {\n                    opacity: 1,\n                    x: artifact.boundingBox.left,\n                    y: artifact.boundingBox.top,\n                    height: artifact.boundingBox.height,\n                    width: artifact.boundingBox.width,\n                    borderRadius: 50,\n                  }\n            }\n          >\n            <div className=\"flex flex-row items-start justify-between p-2\">\n              <div className=\"flex flex-row items-start gap-4\">\n                <ArtifactCloseButton />\n\n                <div className=\"flex flex-col\">\n                  <div className=\"font-medium\">{artifact.title}</div>\n\n                  {isContentDirty ? (\n                    <div className=\"text-muted-foreground text-sm\">\n                      Saving changes...\n                    </div>\n                  ) : document ? (\n                    <div className=\"text-muted-foreground text-sm\">\n                      {`Updated ${formatDistance(\n                        new Date(document.createdAt),\n                        new Date(),\n                        {\n                          addSuffix: true,\n                        }\n                      )}`}\n                    </div>\n                  ) : (\n                    <div className=\"mt-2 h-3 w-32 animate-pulse rounded-md bg-muted-foreground/20\" />\n                  )}\n                </div>\n              </div>\n\n              <ArtifactActions\n                artifact={artifact}\n                currentVersionIndex={currentVersionIndex}\n                handleVersionChange={handleVersionChange}\n                isCurrentVersion={isCurrentVersion}\n                metadata={metadata}\n                mode={mode}\n                setMetadata={setMetadata}\n              />\n            </div>\n\n            <div className=\"h-full max-w-full! items-center overflow-y-scroll bg-background dark:bg-muted\">\n              <artifactDefinition.content\n                content={\n                  isCurrentVersion\n                    ? artifact.content\n                    : getDocumentContentById(currentVersionIndex)\n                }\n                currentVersionIndex={currentVersionIndex}\n                getDocumentContentById={getDocumentContentById}\n                isCurrentVersion={isCurrentVersion}\n                isInline={false}\n                isLoading={isDocumentsFetching && !artifact.content}\n                metadata={metadata}\n                mode={mode}\n                onSaveContent={saveContent}\n                setMetadata={setMetadata}\n                status={artifact.status}\n                suggestions={[]}\n                title={artifact.title}\n              />\n\n              <AnimatePresence>\n                {isCurrentVersion && (\n                  <Toolbar\n                    artifactKind={artifact.kind}\n                    isToolbarVisible={isToolbarVisible}\n                    sendMessage={sendMessage}\n                    setIsToolbarVisible={setIsToolbarVisible}\n                    setMessages={setMessages}\n                    status={status}\n                    stop={stop}\n                  />\n                )}\n              </AnimatePresence>\n            </div>\n\n            <AnimatePresence>\n              {!isCurrentVersion && (\n                <VersionFooter\n                  currentVersionIndex={currentVersionIndex}\n                  documents={documents}\n                  handleVersionChange={handleVersionChange}\n                />\n              )}\n            </AnimatePresence>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport const Artifact = memo(PureArtifact, (prevProps, nextProps) => {\n  if (prevProps.status !== nextProps.status) {\n    return false;\n  }\n  if (!equal(prevProps.votes, nextProps.votes)) {\n    return false;\n  }\n  if (prevProps.input !== nextProps.input) {\n    return false;\n  }\n  if (!equal(prevProps.messages, nextProps.messages.length)) {\n    return false;\n  }\n  if (prevProps.selectedVisibilityType !== nextProps.selectedVisibilityType) {\n    return false;\n  }\n\n  return true;\n});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10260, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/elements/conversation.tsx"],"sourcesContent":["\"use client\";\n\nimport { ArrowDownIcon } from \"lucide-react\";\nimport type { ComponentProps } from \"react\";\nimport { useCallback } from \"react\";\nimport { StickToBottom, useStickToBottomContext } from \"use-stick-to-bottom\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\nexport type ConversationProps = ComponentProps<typeof StickToBottom>;\n\nexport const Conversation = ({ className, ...props }: ConversationProps) => (\n  <StickToBottom\n    className={cn(\n      \"relative flex-1 touch-pan-y overflow-y-auto will-change-scroll\",\n      className\n    )}\n    initial=\"smooth\"\n    resize=\"smooth\"\n    role=\"log\"\n    {...props}\n  />\n);\n\nexport type ConversationContentProps = ComponentProps<\n  typeof StickToBottom.Content\n>;\n\nexport const ConversationContent = ({\n  className,\n  ...props\n}: ConversationContentProps) => (\n  <StickToBottom.Content className={cn(\"p-4\", className)} {...props} />\n);\n\nexport type ConversationScrollButtonProps = ComponentProps<typeof Button>;\n\nexport const ConversationScrollButton = ({\n  className,\n  ...props\n}: ConversationScrollButtonProps) => {\n  const { isAtBottom, scrollToBottom } = useStickToBottomContext();\n\n  const handleScrollToBottom = useCallback(() => {\n    scrollToBottom();\n  }, [scrollToBottom]);\n\n  return (\n    !isAtBottom && (\n      <Button\n        className={cn(\n          \"-translate-x-1/2 absolute bottom-4 left-1/2 z-10 rounded-full shadow-lg\",\n          className\n        )}\n        onClick={handleScrollToBottom}\n        size=\"icon\"\n        type=\"button\"\n        variant=\"outline\"\n        {...props}\n      >\n        <ArrowDownIcon className=\"size-4\" />\n      </Button>\n    )\n  );\n};\n"],"names":[],"mappings":";;;;;;AAEA;AAEA;AACA;AACA;AACA;;;AAPA;;;;;;AAWO,MAAM,eAAe,CAAC,EAAE,SAAS,EAAE,GAAG,OAA0B,iBACrE,kaAAC,qSAAA,CAAA,gBAAa;QACZ,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAEF,SAAQ;QACR,QAAO;QACP,MAAK;QACJ,GAAG,KAAK;;;;;;KATA;AAiBN,MAAM,sBAAsB,CAAC,EAClC,SAAS,EACT,GAAG,OACsB,iBACzB,kaAAC,qSAAA,CAAA,gBAAa,CAAC,OAAO;QAAC,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,OAAO;QAAa,GAAG,KAAK;;;;;;MAJtD;AASN,MAAM,2BAA2B,CAAC,EACvC,SAAS,EACT,GAAG,OAC2B;;IAC9B,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,GAAG,CAAA,GAAA,qSAAA,CAAA,0BAAuB,AAAD;IAE7D,MAAM,uBAAuB,CAAA,GAAA,kYAAA,CAAA,cAAW,AAAD;sEAAE;YACvC;QACF;qEAAG;QAAC;KAAe;IAEnB,OACE,CAAC,4BACC,kaAAC,8HAAA,CAAA,SAAM;QACL,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EACV,2EACA;QAEF,SAAS;QACT,MAAK;QACL,MAAK;QACL,SAAQ;QACP,GAAG,KAAK;kBAET,cAAA,kaAAC,yUAAA,CAAA,gBAAa;YAAC,WAAU;;;;;;;;;;;AAIjC;GA3Ba;;QAI4B,qSAAA,CAAA,0BAAuB;;;MAJnD","debugId":null}},
    {"offset": {"line": 10349, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/greeting.tsx"],"sourcesContent":["import { motion } from \"framer-motion\";\n\nexport const Greeting = () => {\n  return (\n    <div\n      className=\"mx-auto mt-4 flex size-full max-w-3xl flex-col justify-center px-4 md:mt-16 md:px-8\"\n      key=\"overview\"\n    >\n      <motion.div\n        animate={{ opacity: 1, y: 0 }}\n        className=\"font-semibold text-xl md:text-2xl\"\n        exit={{ opacity: 0, y: 10 }}\n        initial={{ opacity: 0, y: 10 }}\n        transition={{ delay: 0.5 }}\n      >\n        Hello there!\n      </motion.div>\n      <motion.div\n        animate={{ opacity: 1, y: 0 }}\n        className=\"text-xl text-zinc-500 md:text-2xl\"\n        exit={{ opacity: 0, y: 10 }}\n        initial={{ opacity: 0, y: 10 }}\n        transition={{ delay: 0.6 }}\n      >\n        How can I help you today?\n      </motion.div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,MAAM,WAAW;IACtB,qBACE,kaAAC;QACC,WAAU;;0BAGV,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,WAAU;gBACV,MAAM;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC1B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,YAAY;oBAAE,OAAO;gBAAI;0BAC1B;;;;;;0BAGD,kaAAC,sYAAA,CAAA,SAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,WAAU;gBACV,MAAM;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC1B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,YAAY;oBAAE,OAAO;gBAAI;0BAC1B;;;;;;;OAjBG;;;;;AAsBV;KA1Ba","debugId":null}},
    {"offset": {"line": 10425, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/messages.tsx"],"sourcesContent":["import type { UseChatHelpers } from \"@ai-sdk/react\";\nimport equal from \"fast-deep-equal\";\nimport { ArrowDownIcon } from \"lucide-react\";\nimport { memo, useEffect } from \"react\";\nimport { useMessages } from \"@/hooks/use-messages\";\nimport type { Vote } from \"@/lib/db/schema\";\nimport type { ChatMessage } from \"@/lib/types\";\nimport { useDataStream } from \"./data-stream-provider\";\nimport { Conversation, ConversationContent } from \"./elements/conversation\";\nimport { Greeting } from \"./greeting\";\nimport { PreviewMessage, ThinkingMessage } from \"./message\";\n\ntype MessagesProps = {\n  chatId: string;\n  status: UseChatHelpers<ChatMessage>[\"status\"];\n  votes: Vote[] | undefined;\n  messages: ChatMessage[];\n  setMessages: UseChatHelpers<ChatMessage>[\"setMessages\"];\n  regenerate: UseChatHelpers<ChatMessage>[\"regenerate\"];\n  isReadonly: boolean;\n  isArtifactVisible: boolean;\n  selectedModelId: string;\n};\n\nfunction PureMessages({\n  chatId,\n  status,\n  votes,\n  messages,\n  setMessages,\n  regenerate,\n  isReadonly,\n  selectedModelId,\n}: MessagesProps) {\n  const {\n    containerRef: messagesContainerRef,\n    endRef: messagesEndRef,\n    isAtBottom,\n    scrollToBottom,\n    hasSentMessage,\n  } = useMessages({\n    status,\n  });\n\n  useDataStream();\n\n  useEffect(() => {\n    if (status === \"submitted\") {\n      requestAnimationFrame(() => {\n        const container = messagesContainerRef.current;\n        if (container) {\n          container.scrollTo({\n            top: container.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      });\n    }\n  }, [status, messagesContainerRef]);\n\n  return (\n    <div\n      className=\"overscroll-behavior-contain -webkit-overflow-scrolling-touch flex-1 touch-pan-y overflow-y-scroll\"\n      ref={messagesContainerRef}\n      style={{ overflowAnchor: \"none\" }}\n    >\n      <Conversation className=\"mx-auto flex min-w-0 max-w-4xl flex-col gap-4 md:gap-6\">\n        <ConversationContent className=\"flex flex-col gap-4 px-2 py-4 md:gap-6 md:px-4\">\n          {messages.length === 0 && <Greeting />}\n\n          {messages.map((message, index) => (\n            <PreviewMessage\n              chatId={chatId}\n              isLoading={\n                status === \"streaming\" && messages.length - 1 === index\n              }\n              isReadonly={isReadonly}\n              key={message.id}\n              message={message}\n              regenerate={regenerate}\n              requiresScrollPadding={\n                hasSentMessage && index === messages.length - 1\n              }\n              setMessages={setMessages}\n              vote={\n                votes\n                  ? votes.find((vote) => vote.messageId === message.id)\n                  : undefined\n              }\n            />\n          ))}\n\n          {status === \"submitted\" &&\n            messages.length > 0 &&\n            messages.at(-1)?.role === \"user\" &&\n            selectedModelId !== \"chat-model-reasoning\" && <ThinkingMessage />}\n\n          <div\n            className=\"min-h-[24px] min-w-[24px] shrink-0\"\n            ref={messagesEndRef}\n          />\n        </ConversationContent>\n      </Conversation>\n\n      {!isAtBottom && (\n        <button\n          aria-label=\"Scroll to bottom\"\n          className=\"-translate-x-1/2 absolute bottom-40 left-1/2 z-10 rounded-full border bg-background p-2 shadow-lg transition-colors hover:bg-muted\"\n          onClick={() => scrollToBottom(\"smooth\")}\n          type=\"button\"\n        >\n          <ArrowDownIcon className=\"size-4\" />\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport const Messages = memo(PureMessages, (prevProps, nextProps) => {\n  if (prevProps.isArtifactVisible && nextProps.isArtifactVisible) {\n    return true;\n  }\n\n  if (prevProps.status !== nextProps.status) {\n    return false;\n  }\n  if (prevProps.selectedModelId !== nextProps.selectedModelId) {\n    return false;\n  }\n  if (prevProps.messages.length !== nextProps.messages.length) {\n    return false;\n  }\n  if (!equal(prevProps.messages, nextProps.messages)) {\n    return false;\n  }\n  if (!equal(prevProps.votes, nextProps.votes)) {\n    return false;\n  }\n\n  return false;\n});\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;;;;;;;;;;;AAcA,SAAS,aAAa,EACpB,MAAM,EACN,MAAM,EACN,KAAK,EACL,QAAQ,EACR,WAAW,EACX,UAAU,EACV,UAAU,EACV,eAAe,EACD;;IACd,MAAM,EACJ,cAAc,oBAAoB,EAClC,QAAQ,cAAc,EACtB,UAAU,EACV,cAAc,EACd,cAAc,EACf,GAAG,CAAA,GAAA,4HAAA,CAAA,cAAW,AAAD,EAAE;QACd;IACF;IAEA,CAAA,GAAA,4IAAA,CAAA,gBAAa,AAAD;IAEZ,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;kCAAE;YACR,IAAI,WAAW,aAAa;gBAC1B;8CAAsB;wBACpB,MAAM,YAAY,qBAAqB,OAAO;wBAC9C,IAAI,WAAW;4BACb,UAAU,QAAQ,CAAC;gCACjB,KAAK,UAAU,YAAY;gCAC3B,UAAU;4BACZ;wBACF;oBACF;;YACF;QACF;iCAAG;QAAC;QAAQ;KAAqB;IAEjC,qBACE,kaAAC;QACC,WAAU;QACV,KAAK;QACL,OAAO;YAAE,gBAAgB;QAAO;;0BAEhC,kaAAC,0IAAA,CAAA,eAAY;gBAAC,WAAU;0BACtB,cAAA,kaAAC,0IAAA,CAAA,sBAAmB;oBAAC,WAAU;;wBAC5B,SAAS,MAAM,KAAK,mBAAK,kaAAC,0HAAA,CAAA,WAAQ;;;;;wBAElC,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,kaAAC,yHAAA,CAAA,iBAAc;gCACb,QAAQ;gCACR,WACE,WAAW,eAAe,SAAS,MAAM,GAAG,MAAM;gCAEpD,YAAY;gCAEZ,SAAS;gCACT,YAAY;gCACZ,uBACE,kBAAkB,UAAU,SAAS,MAAM,GAAG;gCAEhD,aAAa;gCACb,MACE,QACI,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,SAAS,KAAK,QAAQ,EAAE,IAClD;+BAVD,QAAQ,EAAE;;;;;wBAelB,WAAW,eACV,SAAS,MAAM,GAAG,KAClB,SAAS,EAAE,CAAC,CAAC,IAAI,SAAS,UAC1B,oBAAoB,wCAA0B,kaAAC,yHAAA,CAAA,kBAAe;;;;;sCAEhE,kaAAC;4BACC,WAAU;4BACV,KAAK;;;;;;;;;;;;;;;;;YAKV,CAAC,4BACA,kaAAC;gBACC,cAAW;gBACX,WAAU;gBACV,SAAS,IAAM,eAAe;gBAC9B,MAAK;0BAEL,cAAA,kaAAC,yUAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAKnC;GA5FS;;QAgBH,4HAAA,CAAA,cAAW;QAIf,4IAAA,CAAA,gBAAa;;;KApBN;AA8FF,MAAM,yBAAW,CAAA,GAAA,kYAAA,CAAA,OAAI,AAAD,EAAE,cAAc,CAAC,WAAW;IACrD,IAAI,UAAU,iBAAiB,IAAI,UAAU,iBAAiB,EAAE;QAC9D,OAAO;IACT;IAEA,IAAI,UAAU,MAAM,KAAK,UAAU,MAAM,EAAE;QACzC,OAAO;IACT;IACA,IAAI,UAAU,eAAe,KAAK,UAAU,eAAe,EAAE;QAC3D,OAAO;IACT;IACA,IAAI,UAAU,QAAQ,CAAC,MAAM,KAAK,UAAU,QAAQ,CAAC,MAAM,EAAE;QAC3D,OAAO;IACT;IACA,IAAI,CAAC,CAAA,GAAA,mNAAA,CAAA,UAAK,AAAD,EAAE,UAAU,QAAQ,EAAE,UAAU,QAAQ,GAAG;QAClD,OAAO;IACT;IACA,IAAI,CAAC,CAAA,GAAA,mNAAA,CAAA,UAAK,AAAD,EAAE,UAAU,KAAK,EAAE,UAAU,KAAK,GAAG;QAC5C,OAAO;IACT;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 10593, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/lib/fingpt-clients.ts"],"sourcesContent":["// FinGPT Client for Frontend\n// Use this to interact with your FinGPT service\n\nexport interface ForecastRequest {\n  ticker: string;\n  end_date?: string; // YYYY-MM-DD format\n  past_weeks?: number; // Default: 4\n  include_financials?: boolean; // Default: true\n  temperature?: number; // 0.0 - 2.0, default: 0.2\n  stream?: boolean; // Default: false\n}\n\nexport interface ForecastResponse {\n  id: string;\n  object: string;\n  choices: Array<{\n    index: number;\n    message: {\n      role: string;\n      content: string;\n    };\n    finish_reason: string;\n  }>;\n}\n\nexport interface SimpleForecastResponse {\n  ticker: string;\n  forecast: string;\n  generated_at: string;\n}\n\nexport class FinGPTClient {\n  private baseUrl: string;\n\n  constructor(baseUrl: string = \"/api/fingpt\") {\n    this.baseUrl = baseUrl;\n  }\n\n  /**\n   * Get stock forecast (non-streaming)\n   */\n  async getForecast(request: ForecastRequest): Promise<ForecastResponse> {\n    const response = await fetch(`${this.baseUrl}/v1/chat/completions`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        ...request,\n        stream: false,\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || \"Failed to get forecast\");\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Get stock forecast (streaming)\n   */\n  async *getForecastStream(\n    request: ForecastRequest\n  ): AsyncGenerator<string, void, unknown> {\n    const response = await fetch(`${this.baseUrl}/v1/chat/completions`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        ...request,\n        stream: true,\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || \"Failed to get forecast\");\n    }\n\n    const reader = response.body?.getReader();\n    const decoder = new TextDecoder();\n\n    if (!reader) {\n      throw new Error(\"No response body\");\n    }\n\n    while (true) {\n      const { done, value } = await reader.read();\n      if (done) break;\n\n      const chunk = decoder.decode(value);\n      const lines = chunk.split(\"\\n\");\n\n      for (const line of lines) {\n        if (line.startsWith(\"data: \")) {\n          const data = line.slice(6);\n          if (data === \"[DONE]\") return;\n\n          try {\n            const parsed = JSON.parse(data);\n            const content = parsed.choices?.[0]?.delta?.content;\n            if (content) {\n              yield content;\n            }\n          } catch (e) {\n            // Skip invalid JSON\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Simplified forecast endpoint\n   */\n  async getSimpleForecast(\n    ticker: string,\n    days_back: number = 28,\n    include_financials: boolean = true\n  ): Promise<SimpleForecastResponse> {\n    const response = await fetch(`${this.baseUrl}/forecast`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        ticker,\n        days_back,\n        include_financials,\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      throw new Error(error.error || \"Failed to get forecast\");\n    }\n\n    return response.json();\n  }\n\n  /**\n   * Check if FinGPT service is healthy\n   */\n  async healthCheck(): Promise<boolean> {\n    try {\n      const response = await fetch(`${this.baseUrl}/healthz`);\n      const data = await response.json();\n      return data.status === \"ok\" && data.model_loaded === true;\n    } catch (error) {\n      console.error(\"FinGPT health check failed:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get available models\n   */\n  async getModels() {\n    const response = await fetch(`${this.baseUrl}/v1/models`);\n    return response.json();\n  }\n}\n\n// Export singleton instance\nexport const fingptClient = new FinGPTClient();\n\n// Utility functions\nexport function extractStockTicker(text: string): string | null {\n  // Extract ticker symbols like AAPL, TSLA, GOOGL\n  const match = text.match(/\\b([A-Z]{1,5})\\b/);\n  return match ? match[1] : null;\n}\n\nexport function parseForecastSections(forecast: string) {\n  const sections = {\n    positive: [] as string[],\n    concerns: [] as string[],\n    prediction: \"\",\n  };\n\n  // Extract positive developments\n  const positiveMatch = forecast.match(\n    /\\[Positive Developments\\]:?\\n([\\s\\S]*?)(?=\\[Potential Concerns\\]|$)/i\n  );\n  if (positiveMatch) {\n    sections.positive = positiveMatch[1]\n      .split(\"\\n\")\n      .filter((line) => line.match(/^\\d+\\./))\n      .map((line) => line.replace(/^\\d+\\.\\s*/, \"\").trim());\n  }\n\n  // Extract potential concerns\n  const concernsMatch = forecast.match(\n    /\\[Potential Concerns\\]:?\\n([\\s\\S]*?)(?=\\[Prediction|$)/i\n  );\n  if (concernsMatch) {\n    sections.concerns = concernsMatch[1]\n      .split(\"\\n\")\n      .filter((line) => line.match(/^\\d+\\./))\n      .map((line) => line.replace(/^\\d+\\.\\s*/, \"\").trim());\n  }\n\n  // Extract prediction & analysis\n  const predictionMatch = forecast.match(\n    /\\[Prediction & Analysis\\]:?\\n([\\s\\S]*?)$/i\n  );\n  if (predictionMatch) {\n    sections.prediction = predictionMatch[1].trim();\n  }\n\n  return sections;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10746, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/chat.tsx"],"sourcesContent":["\"use client\";\n\nimport { useChat } from \"@ai-sdk/react\";\nimport { DefaultChatTransport } from \"ai\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useSWR, { useSWRConfig } from \"swr\";\nimport { unstable_serialize } from \"swr/infinite\";\nimport { ChatHeader } from \"@/components/chat-header\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useArtifactSelector } from \"@/hooks/use-artifact\";\nimport { useAutoResume } from \"@/hooks/use-auto-resume\";\nimport { useChatVisibility } from \"@/hooks/use-chat-visibility\";\nimport type { Vote } from \"@/lib/db/schema\";\nimport { ChatSDKError } from \"@/lib/errors\";\nimport type { Attachment, ChatMessage } from \"@/lib/types\";\nimport type { AppUsage } from \"@/lib/usage\";\nimport { fetcher, fetchWithErrorHandlers, generateUUID } from \"@/lib/utils\";\nimport { Artifact } from \"./artifact\";\nimport { useDataStream } from \"./data-stream-provider\";\nimport { Messages } from \"./messages\";\nimport { MultimodalInput } from \"./multimodal-input\";\nimport { getChatHistoryPaginationKey } from \"./sidebar-history\";\nimport { toast } from \"./toast\";\nimport type { VisibilityType } from \"./visibility-selector\";\nimport { extractStockTicker } from \"@/lib/fingpt-clients\";\nimport { StockForecastCard } from \"@/components/stock-forecast-card\";\n\nexport function Chat({\n  id,\n  initialMessages,\n  initialChatModel,\n  initialVisibilityType,\n  isReadonly,\n  autoResume,\n  initialLastContext,\n}: {\n  id: string;\n  initialMessages: ChatMessage[];\n  initialChatModel: string;\n  initialVisibilityType: VisibilityType;\n  isReadonly: boolean;\n  autoResume: boolean;\n  initialLastContext?: AppUsage;\n}) {\n  const { visibilityType } = useChatVisibility({\n    chatId: id,\n    initialVisibilityType,\n  });\n\n  const { mutate } = useSWRConfig();\n  const { setDataStream } = useDataStream();\n\n  const [input, setInput] = useState<string>(\"\");\n  const [usage, setUsage] = useState<AppUsage | undefined>(initialLastContext);\n  const [showCreditCardAlert, setShowCreditCardAlert] = useState(false);\n  const [currentModelId, setCurrentModelId] = useState(initialChatModel);\n  const currentModelIdRef = useRef(currentModelId);\n\n  // FinGPT Integration State\n  const [detectedTicker, setDetectedTicker] = useState<string | null>(null);\n  const [showFinancialAnalysis, setShowFinancialAnalysis] = useState(false);\n  const [financialForecast, setFinancialForecast] = useState<string | null>(null);\n  const [loadingForecast, setLoadingForecast] = useState(false);\n\n  useEffect(() => {\n    currentModelIdRef.current = currentModelId;\n  }, [currentModelId]);\n\n  const {\n    messages,\n    setMessages,\n    sendMessage,\n    status,\n    stop,\n    regenerate,\n    resumeStream,\n  } = useChat<ChatMessage>({\n    id,\n    messages: initialMessages,\n    experimental_throttle: 100,\n    generateId: generateUUID,\n    transport: new DefaultChatTransport({\n      api: \"/api/chat\",\n      fetch: fetchWithErrorHandlers,\n      prepareSendMessagesRequest(request) {\n        return {\n          body: {\n            id: request.id,\n            message: request.messages.at(-1),\n            selectedChatModel: currentModelIdRef.current,\n            selectedVisibilityType: visibilityType,\n            ...request.body,\n          },\n        };\n      },\n    }),\n    onData: (dataPart) => {\n      setDataStream((ds) => (ds ? [...ds, dataPart] : []));\n      if (dataPart.type === \"data-usage\") {\n        setUsage(dataPart.data);\n      }\n    },\n    onFinish: () => {\n      mutate(unstable_serialize(getChatHistoryPaginationKey));\n    },\n    onError: (error) => {\n      if (error instanceof ChatSDKError) {\n        // Check if it's a credit card error\n        if (\n          error.message?.includes(\"AI Gateway requires a valid credit card\")\n        ) {\n          setShowCreditCardAlert(true);\n        } else {\n          toast({\n            type: \"error\",\n            description: error.message,\n          });\n        }\n      }\n    },\n  });\n\n  const searchParams = useSearchParams();\n  const query = searchParams.get(\"query\");\n\n  const [hasAppendedQuery, setHasAppendedQuery] = useState(false);\n\n  useEffect(() => {\n    if (query && !hasAppendedQuery) {\n      sendMessage({\n        role: \"user\" as const,\n        parts: [{ type: \"text\", text: query }],\n      });\n\n      setHasAppendedQuery(true);\n      window.history.replaceState({}, \"\", `/chat/${id}`);\n    }\n  }, [query, sendMessage, hasAppendedQuery, id]);\n\n  // FinGPT: Detect stock tickers in user messages\n  useEffect(() => {\n    const lastMessage = messages[messages.length - 1];\n    if (lastMessage && lastMessage.role === \"user\") {\n      const content = lastMessage.parts\n        .filter((part) => part.type === \"text\")\n        .map((part) => \"text\" in part ? part.text : \"\")\n        .join(\" \");\n\n      const ticker = extractStockTicker(content);\n      if (ticker) {\n        setDetectedTicker(ticker);\n        setShowFinancialAnalysis(true);\n      }\n    }\n  }, [messages]);\n\n  // FinGPT: Fetch financial forecast\n  const fetchFinancialForecast = async (ticker: string) => {\n    setLoadingForecast(true);\n    setFinancialForecast(null);\n\n    try {\n      const response = await fetch(\"/api/fingpt/forecast\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ticker,\n          days_back: 28,\n          include_financials: true,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch forecast\");\n      }\n\n      const data = await response.json();\n      setFinancialForecast(data.forecast);\n\n      // Optionally, add forecast to chat messages\n      setMessages((prev) => [\n        ...prev,\n        {\n          id: generateUUID(),\n          role: \"assistant\",\n          parts: [\n            {\n              type: \"text\",\n              text: `📊 **Financial Analysis for ${ticker}**\\n\\n${data.forecast}`,\n            },\n          ],\n          createdAt: new Date(),\n        },\n      ]);\n\n      toast({\n        type: \"success\",\n        description: `Financial analysis for ${ticker} completed`,\n      });\n    } catch (error) {\n      toast({\n        type: \"error\",\n        description: `Failed to fetch financial analysis: ${\n          error instanceof Error ? error.message : \"Unknown error\"\n        }`,\n      });\n    } finally {\n      setLoadingForecast(false);\n      setShowFinancialAnalysis(false);\n    }\n  };\n\n  const { data: votes } = useSWR<Vote[]>(\n    messages.length >= 2 ? `/api/vote?chatId=${id}` : null,\n    fetcher\n  );\n\n  const [attachments, setAttachments] = useState<Attachment[]>([]);\n  const isArtifactVisible = useArtifactSelector((state) => state.isVisible);\n\n  useAutoResume({\n    autoResume,\n    initialMessages,\n    resumeStream,\n    setMessages,\n  });\n\n  return (\n    <>\n      <div className=\"overscroll-behavior-contain flex h-dvh min-w-0 touch-pan-y flex-col bg-background\">\n        <ChatHeader\n          chatId={id}\n          isReadonly={isReadonly}\n          selectedVisibilityType={initialVisibilityType}\n        />\n\n        <Messages\n          chatId={id}\n          isArtifactVisible={isArtifactVisible}\n          isReadonly={isReadonly}\n          messages={messages}\n          regenerate={regenerate}\n          selectedModelId={initialChatModel}\n          setMessages={setMessages}\n          status={status}\n          votes={votes}\n        />\n\n        {/* FinGPT: Stock Analysis Suggestion */}\n        {showFinancialAnalysis && detectedTicker && !loadingForecast && (\n          <div className=\"mx-auto w-full max-w-4xl px-2 md:px-4 pb-2\">\n            <div className=\"rounded-lg border border-blue-200 bg-blue-50 p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-2xl\">📊</span>\n                  <div>\n                    <p className=\"font-medium text-blue-900\">\n                      Stock Ticker Detected: {detectedTicker}\n                    </p>\n                    <p className=\"text-sm text-blue-700\">\n                      Would you like a detailed financial analysis?\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setShowFinancialAnalysis(false)}\n                    className=\"px-3 py-1.5 text-sm text-blue-700 hover:text-blue-900\"\n                  >\n                    Dismiss\n                  </button>\n                  <button\n                    onClick={() => fetchFinancialForecast(detectedTicker)}\n                    className=\"rounded-md bg-blue-600 px-4 py-1.5 text-sm text-white hover:bg-blue-700\"\n                  >\n                    Get Analysis\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* FinGPT: Loading State */}\n        {loadingForecast && (\n          <div className=\"mx-auto w-full max-w-4xl px-2 md:px-4 pb-2\">\n            <div className=\"rounded-lg border border-gray-200 bg-white p-4 shadow-sm\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                <p className=\"text-sm text-gray-600\">\n                  Analyzing {detectedTicker} market data and news...\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"sticky bottom-0 z-1 mx-auto flex w-full max-w-4xl gap-2 border-t-0 bg-background px-2 pb-3 md:px-4 md:pb-4\">\n          {!isReadonly && (\n            <MultimodalInput\n              attachments={attachments}\n              chatId={id}\n              input={input}\n              messages={messages}\n              onModelChange={setCurrentModelId}\n              selectedModelId={currentModelId}\n              selectedVisibilityType={visibilityType}\n              sendMessage={sendMessage}\n              setAttachments={setAttachments}\n              setInput={setInput}\n              setMessages={setMessages}\n              status={status}\n              stop={stop}\n              usage={usage}\n            />\n          )}\n        </div>\n      </div>\n\n      <Artifact\n        attachments={attachments}\n        chatId={id}\n        input={input}\n        isReadonly={isReadonly}\n        messages={messages}\n        regenerate={regenerate}\n        selectedModelId={currentModelId}\n        selectedVisibilityType={visibilityType}\n        sendMessage={sendMessage}\n        setAttachments={setAttachments}\n        setInput={setInput}\n        setMessages={setMessages}\n        status={status}\n        stop={stop}\n        votes={votes}\n      />\n\n      <AlertDialog\n        onOpenChange={setShowCreditCardAlert}\n        open={showCreditCardAlert}\n      >\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Activate AI Gateway</AlertDialogTitle>\n            <AlertDialogDescription>\n              This application requires{\" \"}\n              {process.env.NODE_ENV === \"production\" ? \"the owner\" : \"you\"} to\n              activate Vercel AI Gateway.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => {\n                window.open(\n                  \"https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%3Fmodal%3Dadd-credit-card\",\n                  \"_blank\"\n                );\n                window.location.href = \"/\";\n              }}\n            >\n              Activate\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11295, "column": 0}, "map": {"version":3,"sources":["file:///Users/vihuy/Downloads/Project/financial_advisor/nextjs-ai-chatbot-main/nextjs-ai-chatbot-main/components/data-stream-handler.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { initialArtifactData, useArtifact } from \"@/hooks/use-artifact\";\nimport { artifactDefinitions } from \"./artifact\";\nimport { useDataStream } from \"./data-stream-provider\";\n\nexport function DataStreamHandler() {\n  const { dataStream } = useDataStream();\n\n  const { artifact, setArtifact, setMetadata } = useArtifact();\n  const lastProcessedIndex = useRef(-1);\n\n  useEffect(() => {\n    if (!dataStream?.length) {\n      return;\n    }\n\n    const newDeltas = dataStream.slice(lastProcessedIndex.current + 1);\n    lastProcessedIndex.current = dataStream.length - 1;\n\n    for (const delta of newDeltas) {\n      const artifactDefinition = artifactDefinitions.find(\n        (currentArtifactDefinition) =>\n          currentArtifactDefinition.kind === artifact.kind\n      );\n\n      if (artifactDefinition?.onStreamPart) {\n        artifactDefinition.onStreamPart({\n          streamPart: delta,\n          setArtifact,\n          setMetadata,\n        });\n      }\n\n      setArtifact((draftArtifact) => {\n        if (!draftArtifact) {\n          return { ...initialArtifactData, status: \"streaming\" };\n        }\n\n        switch (delta.type) {\n          case \"data-id\":\n            return {\n              ...draftArtifact,\n              documentId: delta.data,\n              status: \"streaming\",\n            };\n\n          case \"data-title\":\n            return {\n              ...draftArtifact,\n              title: delta.data,\n              status: \"streaming\",\n            };\n\n          case \"data-kind\":\n            return {\n              ...draftArtifact,\n              kind: delta.data,\n              status: \"streaming\",\n            };\n\n          case \"data-clear\":\n            return {\n              ...draftArtifact,\n              content: \"\",\n              status: \"streaming\",\n            };\n\n          case \"data-finish\":\n            return {\n              ...draftArtifact,\n              status: \"idle\",\n            };\n\n          default:\n            return draftArtifact;\n        }\n      });\n    }\n  }, [dataStream, setArtifact, setMetadata, artifact]);\n\n  return null;\n}\n"],"names":[],"mappings":";;;AAEA;AACA;AACA;AACA;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,gBAAa,AAAD;IAEnC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,2HAAA,CAAA,cAAW,AAAD;IACzD,MAAM,qBAAqB,CAAA,GAAA,kYAAA,CAAA,SAAM,AAAD,EAAE,CAAC;IAEnC,CAAA,GAAA,kYAAA,CAAA,YAAS,AAAD;uCAAE;YACR,IAAI,CAAC,YAAY,QAAQ;gBACvB;YACF;YAEA,MAAM,YAAY,WAAW,KAAK,CAAC,mBAAmB,OAAO,GAAG;YAChE,mBAAmB,OAAO,GAAG,WAAW,MAAM,GAAG;YAEjD,KAAK,MAAM,SAAS,UAAW;gBAC7B,MAAM,qBAAqB,0HAAA,CAAA,sBAAmB,CAAC,IAAI;sEACjD,CAAC,4BACC,0BAA0B,IAAI,KAAK,SAAS,IAAI;;gBAGpD,IAAI,oBAAoB,cAAc;oBACpC,mBAAmB,YAAY,CAAC;wBAC9B,YAAY;wBACZ;wBACA;oBACF;gBACF;gBAEA;mDAAY,CAAC;wBACX,IAAI,CAAC,eAAe;4BAClB,OAAO;gCAAE,GAAG,2HAAA,CAAA,sBAAmB;gCAAE,QAAQ;4BAAY;wBACvD;wBAEA,OAAQ,MAAM,IAAI;4BAChB,KAAK;gCACH,OAAO;oCACL,GAAG,aAAa;oCAChB,YAAY,MAAM,IAAI;oCACtB,QAAQ;gCACV;4BAEF,KAAK;gCACH,OAAO;oCACL,GAAG,aAAa;oCAChB,OAAO,MAAM,IAAI;oCACjB,QAAQ;gCACV;4BAEF,KAAK;gCACH,OAAO;oCACL,GAAG,aAAa;oCAChB,MAAM,MAAM,IAAI;oCAChB,QAAQ;gCACV;4BAEF,KAAK;gCACH,OAAO;oCACL,GAAG,aAAa;oCAChB,SAAS;oCACT,QAAQ;gCACV;4BAEF,KAAK;gCACH,OAAO;oCACL,GAAG,aAAa;oCAChB,QAAQ;gCACV;4BAEF;gCACE,OAAO;wBACX;oBACF;;YACF;QACF;sCAAG;QAAC;QAAY;QAAa;QAAa;KAAS;IAEnD,OAAO;AACT;GA5EgB;;QACS,4IAAA,CAAA,gBAAa;QAEW,2HAAA,CAAA,cAAW;;;KAH5C","debugId":null}}]
}